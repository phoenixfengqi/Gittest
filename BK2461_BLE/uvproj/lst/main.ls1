A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE     1


MACRO ASSEMBLER A51 V8.2.7.0
OBJECT MODULE PLACED IN .\main.OBJ
ASSEMBLER INVOKED BY: C:\Keil_v5\C51\BIN\A51.EXE .\main.src PR(.\lst\main.ls1) EP DEBUG

LOC  OBJ            LINE     SOURCE

                       1     ; .\main.SRC generated from: ..\src\main.c
                       2     ; COMPILER INVOKED BY:
                       3     ;        C:\Keil_v5\C51\BIN\C51.EXE ..\src\main.c LARGE OPTIMIZE(8,SPEED) BROWSE DEBUG OBJE
                             CTEXTEND PRINT(.\lst\main.lst) TABS(2) SRC(.\main.SRC)
                       4     
                       5     $nomod51 
                       6     
                       7     NAME    MAIN
                       8     
  0085                 9     CLK_EN_CFG      DATA    085H
  0080                10     P0      DATA    080H
  0090                11     P1      DATA    090H
  00A0                12     P2      DATA    0A0H
  00B0                13     P3      DATA    0B0H
  00B4                14     T0      BIT     0B0H.4
  00D6                15     AC      BIT     0D0H.6
  00B7                16     P4      DATA    0B7H
  00B5                17     T1      BIT     0B0H.5
  0090                18     T2      BIT     090H.0
  00AF                19     EA      BIT     0A8H.7
  00A9                20     P0_PU   DATA    0A9H
  00AA                21     P1_PU   DATA    0AAH
  00AB                22     P2_PU   DATA    0ABH
  00AC                23     P3_PU   DATA    0ACH
  00AD                24     P4_PU   DATA    0ADH
  0091                25     P0IN_EN DATA    091H
  00CE                26     PWM0_RESOL      DATA    0CEH
  0093                27     P1IN_EN DATA    093H
  00CF                28     PWM1_RESOL      DATA    0CFH
  00A8                29     IE      DATA    0A8H
  0094                30     P2IN_EN DATA    094H
  0095                31     P3IN_EN DATA    095H
  0096                32     P4IN_EN DATA    096H
  00D1                33     FL      BIT     0D0H.1
  00C6                34     INT_ADC BIT     0C0H.6
  00CE                35     EXF2    BIT     0C8H.6
  00B7                36     RD      BIT     0B0H.7
  00D8                37     P0_OPDR DATA    0D8H
  00D9                38     P1_OPDR DATA    0D9H
  00EA                39     EXSLEEP DATA    0EAH
  00DA                40     P2_OPDR DATA    0DAH
  00B8                41     IP      DATA    0B8H
  00DB                42     P3_OPDR DATA    0DBH
  0098                43     RI      BIT     098H.0
  00DC                44     P4_OPDR DATA    0DCH
  00B2                45     INT0    BIT     0B0H.2
  00D7                46     CY      BIT     0D0H.7
  0099                47     TI      BIT     098H.1
  00B3                48     INT1    BIT     0B0H.3
  0094                49     INT2    BIT     090H.4
  00C1                50     INT_LBD BIT     0C0H.1
  00B0                51     RXD0    BIT     0B0H.0
  0095                52     INT3    BIT     090H.5
  0092                53     RXD1    BIT     090H.2
  0096                54     INT4    BIT     090H.6
  00E5                55     I2CM_TXRX_STS   DATA    0E5H
  00C5                56     INT_PCA BIT     0C0H.5
  00B1                57     TXD0    BIT     0B0H.1
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE     2

  0097                58     INT5    BIT     090H.7
  00EB                59     P0_WUEN DATA    0EBH
  0093                60     TXD1    BIT     090H.3
  00EC                61     P1_WUEN DATA    0ECH
  00CB                62     RCAP2H  DATA    0CBH
  00ED                63     P2_WUEN DATA    0EDH
  00E1                64     I2CM_CTRL       DATA    0E1H
  0081                65     SP      DATA    081H
  0091                66     T2EX    BIT     090H.1
  00EE                67     P3_WUEN DATA    0EEH
  00D2                68     OV      BIT     0D0H.2
  00EF                69     P4_WUEN DATA    0EFH
  00C7                70     INT_AES BIT     0C0H.7
  00F5                71     I2CS_TXRX_STS   DATA    0F5H
  00CA                72     RCAP2L  DATA    0CAH
  00C9                73     C_T2    BIT     0C8H.1
  00B6                74     WR      BIT     0B0H.6
  00F1                75     I2CS_CTRL       DATA    0F1H
  00CD                76     RCLK    BIT     0C8H.5
  00BB                77     ASADEN  DATA    0BBH
  00CC                78     TCLK    BIT     0C8H.4
  0080                79     P00     BIT     080H.0
  0090                80     P10     BIT     090H.0
  0081                81     P01     BIT     080H.1
  00BA                82     ASADDR  DATA    0BAH
  0087                83     PCON    DATA    087H
  00A0                84     P20     BIT     0A0H.0
  0091                85     P11     BIT     090H.1
  0082                86     P02     BIT     080H.2
  00B0                87     P30     BIT     0B0H.0
  00A1                88     P21     BIT     0A0H.1
  0092                89     P12     BIT     090H.2
  0083                90     P03     BIT     080H.3
  00E7                91     I2CM_TXRX_IE    DATA    0E7H
  00E2                92     I2CM_RXDATA     DATA    0E2H
  00B1                93     P31     BIT     0B0H.1
  00A2                94     P22     BIT     0A0H.2
  0093                95     P13     BIT     090H.3
  0084                96     P04     BIT     080H.4
  00B2                97     P32     BIT     0B0H.2
  00A3                98     P23     BIT     0A0H.3
  0094                99     P14     BIT     090H.4
  0085               100     P05     BIT     080H.5
  00E3               101     I2CM_TXDATA     DATA    0E3H
  008E               102     CCMCON  DATA    08EH
  0089               103     TMOD    DATA    089H
  0088               104     TCON    DATA    088H
  00B3               105     P33     BIT     0B0H.3
  00A4               106     P24     BIT     0A0H.4
  0095               107     P15     BIT     090H.5
  0086               108     P06     BIT     080H.6
  00B4               109     P34     BIT     0B0H.4
  00A5               110     P25     BIT     0A0H.5
  0096               111     P16     BIT     090H.6
  0087               112     P07     BIT     080H.7
  00C2               113     INT_USB BIT     0C0H.2
  00B5               114     P35     BIT     0B0H.5
  00A6               115     P26     BIT     0A0H.6
  0097               116     P17     BIT     090H.7
  008F               117     CCMVAL  DATA    08FH
  00B6               118     P36     BIT     0B0H.6
  00A7               119     P27     BIT     0A0H.7
  00C0               120     INT_SPI BIT     0C0H.0
  00F2               121     I2CS_RXDATA     DATA    0F2H
  00D6               122     I2CS_TXRX_IE    DATA    0D6H
  00B1               123     SPCR    DATA    0B1H
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE     3

  00B7               124     P37     BIT     0B0H.7
  00B2               125     SPDR    DATA    0B2H
  00F3               126     I2CS_TXDATA     DATA    0F3H
  00C4               127     INT_EXT BIT     0C0H.4
  0089               128     IE0     BIT     088H.1
  008B               129     IE1     BIT     088H.3
  009B               130     PAGE_A  DATA    09BH
  009C               131     PAGE_B  DATA    09CH
  00F0               132     B       DATA    0F0H
  00C1               133     MD0     DATA    0C1H
  009D               134     PAGE_C  DATA    09DH
  00C2               135     MD1     DATA    0C2H
  00C3               136     MD2     DATA    0C3H
  00C8               137     CP_RL2  BIT     0C8H.0
  00C4               138     MD3     DATA    0C4H
  00C5               139     MD4     DATA    0C5H
  00C6               140     MD5     DATA    0C6H
  00E0               141     ACC     DATA    0E0H
  00AC               142     ES0     BIT     0A8H.4
  00A2               143     PWM0_C  DATA    0A2H
  00A9               144     ET0     BIT     0A8H.1
  00AE               145     ES1     BIT     0A8H.6
  00DD               146     PWM1_C  DATA    0DDH
  00B3               147     SPSR    DATA    0B3H
  00AB               148     ET1     BIT     0A8H.3
  008D               149     TF0     BIT     088H.5
  00AD               150     ET2     BIT     0A8H.5
  008F               151     TF1     BIT     088H.7
  00CF               152     TF2     BIT     0C8H.7
  009A               153     RB8     BIT     098H.2
  008C               154     TH0     DATA    08CH
  00B3               155     key_r0  BIT     0B0H.3
  00C3               156     INT_XVR BIT     0C0H.3
  00A8               157     EX0     BIT     0A8H.0
  0088               158     IT0     BIT     088H.0
  008D               159     TH1     DATA    08DH
  00B2               160     key_r1  BIT     0B0H.2
  00A7               161     key_s0  BIT     0A0H.7
  009B               162     TB8     BIT     098H.3
  00AA               163     EX1     BIT     0A8H.2
  008A               164     IT1     BIT     088H.2
  00CD               165     TH2     DATA    0CDH
  00B1               166     key_r2  BIT     0B0H.1
  00A6               167     key_s1  BIT     0A0H.6
  00E8               168     EX2     BIT     0E8H.0
  00D0               169     P       BIT     0D0H.0
  00E8               170     AIE     DATA    0E8H
  00B0               171     key_r3  BIT     0B0H.0
  00A4               172     key_s2  BIT     0A0H.4
  00E9               173     EX3     BIT     0E8H.1
  009F               174     SM0     BIT     098H.7
  00C0               175     AIF     DATA    0C0H
  008A               176     TL0     DATA    08AH
  00A0               177     key_s3  BIT     0A0H.0
  00EA               178     EX4     BIT     0E8H.2
  009E               179     SM1     BIT     098H.6
  008B               180     TL1     DATA    08BH
  00EB               181     EX5     BIT     0E8H.3
  009D               182     SM2     BIT     098H.5
  00CC               183     TL2     DATA    0CCH
  00EC               184     EX6     BIT     0E8H.4
  00ED               185     EX7     BIT     0E8H.5
  00EE               186     EX8     BIT     0E8H.6
  00D3               187     RS0     BIT     0D0H.3
  00EF               188     EX9     BIT     0E8H.7
  008C               189     TR0     BIT     088H.4
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE     4

  00D4               190     RS1     BIT     0D0H.4
  008E               191     TR1     BIT     088H.6
  00D4               192     I2CM_CALLADDR0  DATA    0D4H
  00CA               193     TR2     BIT     0C8H.2
  00C9               194     NMI_EN  DATA    0C9H
  00F8               195     AIP     DATA    0F8H
  0083               196     DPH     DATA    083H
  0082               197     DPL     DATA    082H
  0099               198     SBUF0   DATA    099H
  00E9               199     PALT0   DATA    0E9H
  00CB               200     EXEN2   BIT     0C8H.3
  00F7               201     PALT1   DATA    0F7H
  00E6               202     I2CM_DATA_STS   DATA    0E6H
  0086               203     PCON2   DATA    086H
  0098               204     SCON0   DATA    098H
  009C               205     REN     BIT     098H.4
  00C8               206     T2CON   DATA    0C8H
  00F6               207     I2CS_DATA_STS   DATA    0F6H
  00E4               208     I2CM_PRESC      DATA    0E4H
  00D7               209     I2CS_SELFADDR0  DATA    0D7H
  00A1               210     MPAGE   DATA    0A1H
  009A               211     P0OUT_EN        DATA    09AH
  0097               212     MMS     DATA    097H
  00F9               213     P0_WUMOD        DATA    0F9H
  009E               214     P1OUT_EN        DATA    09EH
  00FA               215     P1_WUMOD        DATA    0FAH
  00A6               216     WDT     DATA    0A6H
  00A3               217     PWM0_DCLSB      DATA    0A3H
  009F               218     P2OUT_EN        DATA    09FH
  0084               219     CKCON   DATA    084H
  00FB               220     P2_WUMOD        DATA    0FBH
  00DE               221     PWM1_DCLSB      DATA    0DEH
  00A5               222     P3OUT_EN        DATA    0A5H
  00A4               223     PWM0_DCMSB      DATA    0A4H
  00FC               224     P3_WUMOD        DATA    0FCH
  00F4               225     I2CS_PRESC      DATA    0F4H
  00DF               226     PWM1_DCMSB      DATA    0DFH
  00A7               227     P4OUT_EN        DATA    0A7H
  00FD               228     P4_WUMOD        DATA    0FDH
  00BD               229     ASBUF   DATA    0BDH
  00AE               230     P0_PD   DATA    0AEH
  00D5               231     F0      BIT     0D0H.5
  00C7               232     MDCTL   DATA    0C7H
  00BC               233     ASCON   DATA    0BCH
  00AF               234     P1_PD   DATA    0AFH
  00D2               235     I2CM_DATA_IE    DATA    0D2H
  00B4               236     P2_PD   DATA    0B4H
  00B5               237     P3_PD   DATA    0B5H
  00B6               238     P4_PD   DATA    0B6H
  0092               239     DPSEL   DATA    092H
  00D0               240     PSW     DATA    0D0H
  00D5               241     I2CS_DATA_IE    DATA    0D5H
                     242     ?PR?Ble_Packet_Encode?MAIN               SEGMENT CODE 
                     243     ?PR?FuncLED_Init?MAIN                    SEGMENT CODE 
                     244     ?PR?Open_FuncLED?MAIN                    SEGMENT CODE 
                     245     ?PR?Close_FuncLED?MAIN                   SEGMENT CODE 
                     246     ?PR?mcu_io_sleep?MAIN                    SEGMENT CODE 
                     247     ?PR?gpio_init?MAIN   SEGMENT CODE 
                     248     ?PR?mcu_clk_inital?MAIN                  SEGMENT CODE 
                     249     ?PR?Sys_SleepModeCheck?MAIN              SEGMENT CODE 
                     250     ?PR?Sys_PowerOn?MAIN SEGMENT CODE 
                     251     ?PR?Sys_PowerDown?MAIN                   SEGMENT CODE 
                     252     ?PR?KeyP2_scan_func?MAIN                 SEGMENT CODE 
                     253     ?PR?_Key_scan_func?MAIN                  SEGMENT CODE 
                     254     ?PR?Key24_Detect_GPIO?MAIN               SEGMENT CODE 
                     255     ?XD?Key24_Detect_GPIO?MAIN               SEGMENT XDATA OVERLAYABLE 
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE     5

                     256     ?PR?Calc_CRC_Value?MAIN                  SEGMENT CODE 
                     257     ?PR?Set_Common_com_Data?MAIN             SEGMENT CODE 
                     258     ?PR?Set_Common_Tx_Data?MAIN              SEGMENT CODE 
                     259     ?PR?ShortKey_PowerOn?MAIN                SEGMENT CODE 
                     260     ?PR?ShortKey_PowerOff?MAIN               SEGMENT CODE 
                     261     ?PR?ShortKey_E?MAIN  SEGMENT CODE 
                     262     ?PR?ShortKey_S_sub?MAIN                  SEGMENT CODE 
                     263     ?PR?ShortKey_S_add?MAIN                  SEGMENT CODE 
                     264     ?PR?ShortKey_White?MAIN                  SEGMENT CODE 
                     265     ?PR?ShortKey_Red?MAIN                    SEGMENT CODE 
                     266     ?PR?ShortKey_B_add?MAIN                  SEGMENT CODE 
                     267     ?PR?ShortKey_Yellow?MAIN                 SEGMENT CODE 
                     268     ?PR?ShortKey_Green?MAIN                  SEGMENT CODE 
                     269     ?PR?ShortKey_Scale?MAIN                  SEGMENT CODE 
                     270     ?PR?ShortKey_Color?MAIN                  SEGMENT CODE 
                     271     ?PR?ShortKey_Blue?MAIN                   SEGMENT CODE 
                     272     ?PR?ShortKey_B_sub?MAIN                  SEGMENT CODE 
                     273     ?PR?ShortKey_M1?MAIN SEGMENT CODE 
                     274     ?PR?ShortKey_M2?MAIN SEGMENT CODE 
                     275     ?PR?ShortKey_M3?MAIN SEGMENT CODE 
                     276     ?PR?ShortKey_M4?MAIN SEGMENT CODE 
                     277     ?PR?ShortKey_M5?MAIN SEGMENT CODE 
                     278     ?PR?ShortKey_M6?MAIN SEGMENT CODE 
                     279     ?PR?ShortKey_M7?MAIN SEGMENT CODE 
                     280     ?PR?ShortKey_M8?MAIN SEGMENT CODE 
                     281     ?PR?ShortKey_M9?MAIN SEGMENT CODE 
                     282     ?PR?_LongKey_Indentify?MAIN              SEGMENT CODE 
                     283     ?PR?LongKey_PowerOn?MAIN                 SEGMENT CODE 
                     284     ?PR?LongKey_PowerOff?MAIN                SEGMENT CODE 
                     285     ?PR?LongKey_E?MAIN   SEGMENT CODE 
                     286     ?PR?LongKey_Color?MAIN                   SEGMENT CODE 
                     287     ?PR?Key_Scan?MAIN    SEGMENT CODE 
                     288     ?XD?Key_Scan?MAIN    SEGMENT XDATA OVERLAYABLE 
                     289     ?PR?TX_CMD_USE_BLE_mode?MAIN             SEGMENT CODE 
                     290     ?PR?Get_MacAddr?MAIN SEGMENT CODE 
                     291     ?PR?Set_MacAddr?MAIN SEGMENT CODE 
                     292     ?PR?Power_On_Init?MAIN                   SEGMENT CODE 
                     293     ?XD?Power_On_Init?MAIN                   SEGMENT XDATA OVERLAYABLE 
                     294     ?PR?main?MAIN        SEGMENT CODE 
                     295     ?CO?MAIN             SEGMENT CODE 
                     296     ?C_INITSEG           SEGMENT CODE 
                     297     ?XD?MAIN             SEGMENT XDATA 
                     298     ?BI?MAIN             SEGMENT BIT 
                     299             EXTRN   CODE (Sys_set_1MHZ_rate)
                     300             EXTRN   XDATA (cRemoteIDLETime)
                     301             EXTRN   BIT (bPowerDN)
                     302             EXTRN   XDATA (u2msFlag)
                     303             EXTRN   XDATA (wIdleTime)
                     304             EXTRN   CODE (_BlePacketDeductive)
                     305             EXTRN   XDATA (?_BlePacketDeductive?BYTE)
                     306             EXTRN   DATA (CLK_EN_CFG_TEMP)
                     307             EXTRN   CODE (_Delay_ms)
                     308             EXTRN   XDATA (u10msFlag)
                     309             EXTRN   XDATA (u20msFlag)
                     310             EXTRN   BIT (adv_flag)
                     311             EXTRN   XDATA (g_patchPALT1)
                     312             EXTRN   XDATA (RF_TxFlag)
                     313             EXTRN   CODE (_BlePacketEncode)
                     314             EXTRN   XDATA (?_BlePacketEncode?BYTE)
                     315             EXTRN   CODE (PowerDown_Rf)
                     316             EXTRN   XDATA (adv_flag_count)
                     317             EXTRN   XDATA (uart_data_send)
                     318             EXTRN   CODE (_driver_uart_send_start)
                     319             EXTRN   CODE (InitSysTimer)
                     320             EXTRN   CODE (_WaitUs)
                     321             EXTRN   CODE (_logvalue)
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE     6

                     322             EXTRN   BIT (power_on)
                     323             EXTRN   CODE (PowerUp_Rf)
                     324             EXTRN   CODE (_loginfo)
                     325             EXTRN   CODE (_RF_TXNoAck)
                     326             EXTRN   CODE (Close_Uart)
                     327             EXTRN   CODE (_UartConfig)
                     328             EXTRN   CODE (?C?ICALL)
                     329             EXTRN   CODE (?C?COPY)
                     330             EXTRN   CODE (?C_STARTUP)
                     331             PUBLIC  rf_encode_39
                     332             PUBLIC  long_key_value_temp
                     333             PUBLIC  rf_encode_38
                     334             PUBLIC  rf_encode_37
                     335             PUBLIC  rgb_static_dynamic
                     336             PUBLIC  long_key_value_tempp
                     337             PUBLIC  Static_scene_state
                     338             PUBLIC  tx_data_seted
                     339             PUBLIC  KeyCode1
                     340             PUBLIC  Payload_demo
                     341             PUBLIC  short_long_touch_flag
                     342             PUBLIC  RF_TxBuf_CH39
                     343             PUBLIC  RF_TxBuf_CH38
                     344             PUBLIC  RF_TxBuf_CH37
                     345             PUBLIC  SrcAddr_1
                     346             PUBLIC  KeyCount
                     347             PUBLIC  BLE_PacketLen
                     348             PUBLIC  rf_encode_state
                     349             PUBLIC  RF_TxLen_CH3789
                     350             PUBLIC  BLE_PacketBuf
                     351             PUBLIC  longCount_scale
                     352             PUBLIC  KeyCode
                     353             PUBLIC  fen_Duan
                     354             PUBLIC  single_RF_test
                     355             PUBLIC  SequenceNum_inc_1
                     356             PUBLIC  AdvPacket_2
                     357             PUBLIC  CurrentGroup_1
                     358             PUBLIC  SequenceNum_1
                     359             PUBLIC  Key24_TBL
                     360             PUBLIC  Key_TBL
                     361             PUBLIC  main
                     362             PUBLIC  Power_On_Init
                     363             PUBLIC  Set_MacAddr
                     364             PUBLIC  Get_MacAddr
                     365             PUBLIC  TX_CMD_USE_BLE_mode
                     366             PUBLIC  Key_Scan
                     367             PUBLIC  LongKey_Color
                     368             PUBLIC  LongKey_E
                     369             PUBLIC  LongKey_PowerOff
                     370             PUBLIC  LongKey_PowerOn
                     371             PUBLIC  _LongKey_Indentify
                     372             PUBLIC  ShortKey_M9
                     373             PUBLIC  ShortKey_M8
                     374             PUBLIC  ShortKey_M7
                     375             PUBLIC  ShortKey_M6
                     376             PUBLIC  ShortKey_M5
                     377             PUBLIC  ShortKey_M4
                     378             PUBLIC  ShortKey_M3
                     379             PUBLIC  ShortKey_M2
                     380             PUBLIC  ShortKey_M1
                     381             PUBLIC  ShortKey_B_sub
                     382             PUBLIC  ShortKey_Blue
                     383             PUBLIC  ShortKey_Color
                     384             PUBLIC  ShortKey_Scale
                     385             PUBLIC  ShortKey_Green
                     386             PUBLIC  ShortKey_Yellow
                     387             PUBLIC  ShortKey_B_add
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE     7

                     388             PUBLIC  ShortKey_Red
                     389             PUBLIC  ShortKey_White
                     390             PUBLIC  ShortKey_S_add
                     391             PUBLIC  ShortKey_S_sub
                     392             PUBLIC  ShortKey_E
                     393             PUBLIC  ShortKey_PowerOff
                     394             PUBLIC  ShortKey_PowerOn
                     395             PUBLIC  Set_Common_Tx_Data
                     396             PUBLIC  Set_Common_com_Data
                     397             PUBLIC  Calc_CRC_Value
                     398             PUBLIC  Key24_Detect_GPIO
                     399             PUBLIC  _Key_scan_func
                     400             PUBLIC  KeyP2_scan_func
                     401             PUBLIC  Sys_PowerDown
                     402             PUBLIC  Sys_PowerOn
                     403             PUBLIC  Sys_SleepModeCheck
                     404             PUBLIC  mcu_clk_inital
                     405             PUBLIC  gpio_init
                     406             PUBLIC  mcu_io_sleep
                     407             PUBLIC  Close_FuncLED
                     408             PUBLIC  Open_FuncLED
                     409             PUBLIC  FuncLED_Init
                     410             PUBLIC  Ble_Packet_Encode
                     411     
----                 412             RSEG  ?XD?Key_Scan?MAIN
0000                 413     ?Key_Scan?BYTE:
0000                 414          inKey?4446:   DS   1
                     415     
----                 416             RSEG  ?XD?Power_On_Init?MAIN
0000                 417     ?Power_On_Init?BYTE:
0000                 418              i?4847:   DS   1
                     419     
----                 420             RSEG  ?XD?Key24_Detect_GPIO?MAIN
0000                 421     ?Key24_Detect_GPIO?BYTE:
0000                 422      key_value?1242:   DS   1
                     423     
----                 424             RSEG  ?XD?MAIN
0000                 425       SequenceNum_1:   DS   1
0001                 426      CurrentGroup_1:   DS   1
0002                 427         AdvPacket_2:   DS   32
0022                 428     SequenceNum_inc_1:   DS   1
0023                 429      single_RF_test:   DS   1
0024                 430            fen_Duan:   DS   1
0025                 431             KeyCode:   DS   1
0026                 432     longCount_scale:   DS   1
0027                 433       BLE_PacketBuf:   DS   32
0047                 434     RF_TxLen_CH3789:   DS   1
0048                 435     rf_encode_state:   DS   1
0049                 436       BLE_PacketLen:   DS   1
004A                 437            KeyCount:   DS   2
004C                 438           SrcAddr_1:   DS   4
0050                 439       RF_TxBuf_CH37:   DS   32
0070                 440       RF_TxBuf_CH38:   DS   32
0090                 441       RF_TxBuf_CH39:   DS   32
00B0                 442     short_long_touch_flag:   DS   1
00B1                 443        Payload_demo:   DS   32
00D1                 444            KeyCode1:   DS   1
00D2                 445     Static_scene_state:   DS   1
00D3                 446     long_key_value_tempp:   DS   1
00D4                 447     rgb_static_dynamic:   DS   1
00D5                 448     long_key_value_temp:   DS   1
                     449     
----                 450             RSEG  ?BI?MAIN
0000                 451       tx_data_seted:   DBIT   1
0001                 452        rf_encode_37:   DBIT   1
0002                 453        rf_encode_38:   DBIT   1
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE     8

0003                 454        rf_encode_39:   DBIT   1
                     455     
----                 456             RSEG  ?CO?MAIN
0000                 457     ?SC_0:
0000 50776F6E        458             DB  'P' ,'w' ,'o' ,'n' ,00DH,00AH,000H
0004 0D0A00                  
                     459     
0007                 460     ?SC_7:
0007 50776F66        461             DB  'P' ,'w' ,'o' ,'f' ,'f' ,00DH,00AH,000H
000B 660D0A00                
                     462     
000F                 463     ?SC_15:
000F 4B5F450D        464             DB  'K' ,'_' ,'E' ,00DH,00AH,000H
0013 0A00                    
                     465     
0015                 466     ?SC_21:
0015 4B5F5320        467             DB  'K' ,'_' ,'S' ,' ' ,'s' ,'u' ,'b' ,00DH,00AH,000H
0019 7375620D                
001D 0A00                    
                     468     
001F                 469     ?SC_31:
001F 4B5F5320        470             DB  'K' ,'_' ,'S' ,' ' ,'a' ,'d' ,'d' ,00DH,00AH,000H
0023 6164640D                
0027 0A00                    
                     471     
0029                 472     ?SC_41:
0029 4B5F7768        473             DB  'K' ,'_' ,'w' ,'h' ,'i' ,'t' ,'e' ,00DH,00AH,000H
002D 6974650D                
0031 0A00                    
                     474     
0033                 475     ?SC_51:
0033 4B5F7265        476             DB  'K' ,'_' ,'r' ,'e' ,'d' ,00DH,00AH,000H
0037 640D0A00                
                     477     
003B                 478     ?SC_59:
003B 4B5F6220        479             DB  'K' ,'_' ,'b' ,' ' ,'a' ,'d' ,'d' ,00DH,00AH,000H
003F 6164640D                
0043 0A00                    
                     480     
0045                 481     ?SC_69:
0045 4B5F7965        482             DB  'K' ,'_' ,'y' ,'e' ,'l' ,'l' ,'o' ,'w' ,00DH,00AH
0049 6C6C6F77                
004D 0D0A                    
004F 00              483             DB  000H
                     484     
0050                 485     ?SC_80:
0050 4B5F6772        486             DB  'K' ,'_' ,'g' ,'r' ,'e' ,'e' ,'n' ,00DH,00AH,000H
0054 65656E0D                
0058 0A00                    
                     487     
005A                 488     ?SC_90:
005A 4B5F7363        489             DB  'K' ,'_' ,'s' ,'c' ,'a' ,'l' ,'e' ,00DH,00AH,000H
005E 616C650D                
0062 0A00                    
                     490     
0064                 491     ?SC_100:
0064 4B5F636F        492             DB  'K' ,'_' ,'c' ,'o' ,'l' ,'o' ,'r' ,00DH,00AH,000H
0068 6C6F720D                
006C 0A00                    
                     493     
006E                 494     ?SC_110:
006E 4B5F626C        495             DB  'K' ,'_' ,'b' ,'l' ,'u' ,'e' ,00DH,00AH,000H
0072 75650D0A                
0076 00                      
                     496     
0077                 497     ?SC_119:
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE     9

0077 4B5F6220        498             DB  'K' ,'_' ,'b' ,' ' ,'s' ,'u' ,'b' ,00DH,00AH,000H
007B 7375620D                
007F 0A00                    
                     499     
0081                 500     ?SC_129:
0081 4B206D31        501             DB  'K' ,' ' ,'m' ,'1' ,00DH,00AH,000H
0085 0D0A00                  
                     502     
0088                 503     ?SC_136:
0088 4B206D32        504             DB  'K' ,' ' ,'m' ,'2' ,00DH,00AH,000H
008C 0D0A00                  
                     505     
008F                 506     ?SC_143:
008F 4B206D33        507             DB  'K' ,' ' ,'m' ,'3' ,00DH,00AH,000H
0093 0D0A00                  
                     508     
0096                 509     ?SC_150:
0096 4B206D34        510             DB  'K' ,' ' ,'m' ,'4' ,00DH,00AH,000H
009A 0D0A00                  
                     511     
009D                 512     ?SC_157:
009D 4B206D35        513             DB  'K' ,' ' ,'m' ,'5' ,00DH,00AH,000H
00A1 0D0A00                  
                     514     
00A4                 515     ?SC_164:
00A4 4B206D36        516             DB  'K' ,' ' ,'m' ,'6' ,00DH,00AH,000H
00A8 0D0A00                  
                     517     
00AB                 518     ?SC_171:
00AB 4B206D37        519             DB  'K' ,' ' ,'m' ,'7' ,00DH,00AH,000H
00AF 0D0A00                  
                     520     
00B2                 521     ?SC_178:
00B2 4B206D38        522             DB  'K' ,' ' ,'m' ,'8' ,00DH,00AH,000H
00B6 0D0A00                  
                     523     
00B9                 524     ?SC_185:
00B9 4B206D39        525             DB  'K' ,' ' ,'m' ,'9' ,00DH,00AH,000H
00BD 0D0A00                  
                     526     
00C0                 527     ?SC_192:
00C0 4C4B2070        528             DB  'L' ,'K' ,' ' ,'p' ,'w' ,'o' ,'n' ,00DH,00AH,000H
00C4 776F6E0D                
00C8 0A00                    
                     529     
00CA                 530     ?SC_202:
00CA 4C4B2070        531             DB  'L' ,'K' ,' ' ,'p' ,'w' ,'o' ,'f' ,'f' ,00DH,00AH
00CE 776F6666                
00D2 0D0A                    
00D4 00              532             DB  000H
                     533     
00D5                 534     ?SC_213:
00D5 4C4B2065        535             DB  'L' ,'K' ,' ' ,'e' ,00DH,00AH,000H
00D9 0D0A00                  
                     536     
00DC                 537     ?SC_220:
00DC 4C4B2063        538             DB  'L' ,'K' ,' ' ,'c' ,'l' ,00DH,00AH,000H
00E0 6C0D0A00                
                     539     
00E4                 540     ?SC_228:
00E4 4B657272        541             DB  'K' ,'e' ,'r' ,'r' ,000H
00E8 00                      
                     542     
00E9                 543     Key_TBL:
00E9 00              544             DB      000H
00EA 01              545             DB      001H
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    10

00EB 0D              546             DB      00DH
00EC 09              547             DB      009H
00ED 03              548             DB      003H
00EE 02              549             DB      002H
00EF 0C              550             DB      00CH
00F0 08              551             DB      008H
00F1 04              552             DB      004H
00F2 11              553             DB      011H
00F3 0B              554             DB      00BH
00F4 07              555             DB      007H
00F5 06              556             DB      006H
00F6 11              557             DB      011H
00F7 0E              558             DB      00EH
00F8 0A              559             DB      00AH
00F9 05              560             DB      005H
                     561     
00FA                 562     Key24_TBL:
00FA 00              563             DB      000H
00FB 000000          564             DB      000H,000H,000H  ; ptr3
00FE 01              565             DB      001H
00FF FF              566             DB      0FFH
0100 0000     F      567             DW      ShortKey_M3 + 0
0102 02              568             DB      002H
0103 FF              569             DB      0FFH
0104 0000     F      570             DW      ShortKey_Yellow + 0
0106 03              571             DB      003H
0107 FF              572             DB      0FFH
0108 0000     F      573             DW      ShortKey_M8 + 0
010A 04              574             DB      004H
010B FF              575             DB      0FFH
010C 0000     F      576             DW      ShortKey_M1 + 0
010E 05              577             DB      005H
010F FF              578             DB      0FFH
0110 0000     F      579             DW      ShortKey_B_sub + 0
0112 06              580             DB      006H
0113 FF              581             DB      0FFH
0114 0000     F      582             DW      ShortKey_S_add + 0
0116 07              583             DB      007H
0117 FF              584             DB      0FFH
0118 0000     F      585             DW      ShortKey_M6 + 0
011A 08              586             DB      008H
011B FF              587             DB      0FFH
011C 0000     F      588             DW      ShortKey_PowerOn + 0
011E 09              589             DB      009H
011F FF              590             DB      0FFH
0120 0000     F      591             DW      ShortKey_Scale + 0
0122 0A              592             DB      00AH
0123 FF              593             DB      0FFH
0124 0000     F      594             DW      ShortKey_Red + 0
0126 0B              595             DB      00BH
0127 FF              596             DB      0FFH
0128 0000     F      597             DW      ShortKey_M5 + 0
012A 0C              598             DB      00CH
012B 000000          599             DB      000H,000H,000H  ; ptr3
012E 0D              600             DB      00DH
012F FF              601             DB      0FFH
0130 0000     F      602             DW      ShortKey_Green + 0
0132 0E              603             DB      00EH
0133 FF              604             DB      0FFH
0134 0000     F      605             DW      ShortKey_White + 0
0136 0F              606             DB      00FH
0137 FF              607             DB      0FFH
0138 0000     F      608             DW      ShortKey_M7 + 0
013A 10              609             DB      010H
013B FF              610             DB      0FFH
013C 0000     F      611             DW      ShortKey_M9 + 0
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    11

013E 11              612             DB      011H
013F FF              613             DB      0FFH
0140 0000     F      614             DW      ShortKey_Color + 0
0142 12              615             DB      012H
0143 FF              616             DB      0FFH
0144 0000     F      617             DW      ShortKey_S_sub + 0
0146 13              618             DB      013H
0147 FF              619             DB      0FFH
0148 0000     F      620             DW      ShortKey_M2 + 0
014A 14              621             DB      014H
014B FF              622             DB      0FFH
014C 0000     F      623             DW      ShortKey_E + 0
014E 15              624             DB      015H
014F FF              625             DB      0FFH
0150 0000     F      626             DW      ShortKey_Blue + 0
0152 16              627             DB      016H
0153 FF              628             DB      0FFH
0154 0000     F      629             DW      ShortKey_B_add + 0
0156 17              630             DB      017H
0157 FF              631             DB      0FFH
0158 0000     F      632             DW      ShortKey_M4 + 0
015A 18              633             DB      018H
015B FF              634             DB      0FFH
015C 0000     F      635             DW      ShortKey_PowerOff + 0
015E 19              636             DB      019H
015F FF              637             DB      0FFH
0160 0000     F      638             DW      LongKey_PowerOn + 0
0162 1A              639             DB      01AH
0163 FF              640             DB      0FFH
0164 0000     F      641             DW      LongKey_PowerOff + 0
0166 1B              642             DB      01BH
0167 FF              643             DB      0FFH
0168 0000     F      644             DW      LongKey_E + 0
016A 1C              645             DB      01CH
016B FF              646             DB      0FFH
016C 0000     F      647             DW      LongKey_Color + 0
                     648     
                     649     
----                 650             RSEG  ?C_INITSEG
0000 C100     F      651             DB      0C1H, tx_data_seted + 000H      ; bit-init
                     652     
0002 41              653             DB      041H
0003 0000     F      654             DW      KeyCode
0005 00              655             DB      000H
                     656     
0006 41              657             DB      041H
0007 0000     F      658             DW      KeyCode1
0009 00              659             DB      000H
                     660     
000A 42              661             DB      042H
000B 0000     F      662             DW      KeyCount
000D 0000            663             DW      00000H
                     664     
000F 41              665             DB      041H
0010 0000     F      666             DW      longCount_scale
0012 00              667             DB      000H
                     668     
0013 41              669             DB      041H
0014 0000     F      670             DW      SequenceNum_1
0016 00              671             DB      000H
                     672     
0017 41              673             DB      041H
0018 0000     F      674             DW      long_key_value_temp
001A 00              675             DB      000H
                     676     
001B 41              677             DB      041H
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    12

001C 0000     F      678             DW      SequenceNum_inc_1
001E 00              679             DB      000H
                     680     
001F 41              681             DB      041H
0020 0000     F      682             DW      short_long_touch_flag
0022 00              683             DB      000H
                     684     
0023 41              685             DB      041H
0024 0000     F      686             DW      Static_scene_state
0026 00              687             DB      000H
                     688     
0027 60              689             DB      060H
0028 20              690             DB      020H
0029 0000     F      691             DW      AdvPacket_2
002B 02              692             DB      002H
002C 1B              693             DB      01BH
002D FE              694             DB      0FEH
002E EE              695             DB      0EEH
002F C0              696             DB      0C0H
0030 07              697             DB      007H
0031 DA              698             DB      0DAH
0032 78              699             DB      078H
0033 13              700             DB      013H
0034 01              701             DB      001H
0035 04              702             DB      004H
0036 11              703             DB      011H
0037 07              704             DB      007H
0038 00              705             DB      000H
0039 10              706             DB      010H
003A FF              707             DB      0FFH
003B 01              708             DB      001H
003C 02              709             DB      002H
003D 03              710             DB      003H
003E 14              711             DB      014H
003F 00              712             DB      000H
0040 00              713             DB      000H
0041 00              714             DB      000H
0042 01              715             DB      001H
0043 00              716             DB      000H
0044 00              717             DB      000H
0045 AA              718             DB      0AAH
0046 00000000        719             DB  000H,000H,000H,000H,000H
004A 00                      
                     720     
                     721     
004B 41              722             DB      041H
004C 0000     F      723             DW      fen_Duan
004E 00              724             DB      000H
                     725     
004F 41              726             DB      041H
0050 0000     F      727             DW      rgb_static_dynamic
0052 00              728             DB      000H
                     729     
0053 41              730             DB      041H
0054 0000     F      731             DW      single_RF_test
0056 00              732             DB      000H
                     733     
                     734     ; #include "includes.h"
                     735     ; 
                     736     ; 
                     737     ; unsigned char Payload_demo[Payload_len];
                     738     ; bit   tx_data_seted=0;
                     739     ; bit rf_encode_37,rf_encode_38,rf_encode_39;
                     740     ; uint8 rf_encode_state;
                     741     ; 
                     742     ; uint8 KeyCode=0;
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    13

                     743     ; uint8 KeyCode1=0;
                     744     ; 
                     745     ; uint16 KeyCount=0;
                     746     ; uint8  longCount_scale = 0;
                     747     ; uint8  SequenceNum_1=0;
                     748     ; uint8 long_key_value_temp = 0;  //如果长按同一个键，则会保存当前值
                     749     ; uint8 long_key_value_tempp;
                     750     ; uint8  SequenceNum_inc_1 = 0;
                     751     ; uint8 short_long_touch_flag = 0;
                     752     ; 
                     753     ; uint8 SrcAddr_1[4];
                     754     ; uint8 CurrentGroup_1[1];
                     755     ; uint8 Static_scene_state = 0;
                     756     ; 
                     757     ; #define PWM_OPEN_CLOCK() \
                     758     ;       {CLK_EN_CFG |= 0x10;}   //Enable pwm
                     759     ; 
                     760     ; #define PWM_SetupIOL(bl) \
                     761     ;     PALT1_SETB(((bl)<<3))
                     762     ; 
                     763     ; #define       PWM1_SetupIOL(b1) \
                     764     ;       PALT1_SETB(((b1)<<4))
                     765     ; 
                     766     ; #define PWM_Setup(pn,pres,resol,duty) \
                     767     ;       PWM_##pn##_CFG = (((resol>=768)<<7)|(pres));\
                     768     ;       PWM_##pn##_RESOL = ((resol>=768)?(resol-768):(resol));\
                     769     ;       PWM_##pn##_DCLSB = (duty&0xff);\
                     770     ;       PWM_##pn##_DCMSB = ((duty>>8)&0xff)
                     771     ; 
                     772     ; #define PWM_SET_DUTY(pn,duty) \
                     773     ;       PWM_##pn##_DCLSB = (duty&0xff);\
                     774     ;       PWM_##pn##_DCMSB = ((duty>>8)&0xff)
                     775     ; 
                     776     ; #define PWM_Open(pn) \
                     777     ;       PWM_##pn##_CFG |= BIT(6)
                     778     ; 
                     779     ; #define PWM_CLOSE(pn) \
                     780     ;       PWM_##pn##_CFG &= _BIT(6)
                     781     ; 
                     782     ; 
                     783     ; uint8   AdvPacket_2[32] = 
                     784     ; {
                     785     ;       //0
                     786     ;     0x02,   // 广播类型
                     787     ;     
                     788     ;     //27,   // 26 Length ( Device Address + Payload )
                     789     ;     //1
                     790     ;     27,
                     791     ;     /* Device Address(6字节) */
                     792     ;     //0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 
                     793     ;     //2   3    4    5   6     7
                     794     ;     0xfe,0xee,0xc0,0x07,0xda,0x78,                                 //6个字节
                     795     ;     //0x0A,0xFF,0x5D,0x00,0x02,0x01,0x08,0xFF,0x00,0x00,0x00,
                     796     ;     
                     797     ;     // 0x0b,0xFF,0x5D,0x00,0x02,0x01,0x09,0x02,0x01,0x00,0x35,0xf3,   //12个字节
                     798     ;     //8  9     10   11    12     13   14      15   16    17    18   19     20    21   22 
                                 23      24    25    26    27   28
                     799     ;     //0  1     2    3     4       5    6       7    8     9    10    11    12    13   14 
                                 15      16    17    18     19     20    //共21字节
                     800     ;     
                     801     ;     19,0x01,  0x04, 0x11,0x07,  0x00, 0x10,  0xff,0x01,  0x02, 0x03, 0x14, 0x00, 0x00,0x0
                             0 , 0x01,  0x00, 0x00, 0xAA//,   0xBB, 0xcc 
                     802     ; };
                     803     ; 
                     804     ; #define KEY_PUSH_LONG         (0x80)
                     805     ; #define KEY_PUSH_UP                   (0x40)
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    14

                     806     ; #define KEY_BOND_DOWN         (0x20)
                     807     ; #define KEY_PUSH_DOWN         (0x00)
                     808     ; 
                     809     ; #define HAL_KEY_NO_KEY                        0x00
                     810     ; 
                     811     ; #define HAL_KEY_POWER_ON              0x01
                     812     ; #define HAL_KEY_POWER_OFF             0x02
                     813     ; #define HAL_KEY_BRIGHT_UP             0x03
                     814     ; #define HAL_KEY_BRIGHT_DOWN           0x04
                     815     ; #define HAL_KEY_TEMP_UP                       0x05
                     816     ; #define HAL_KEY_TEMP_DOWN             0x06
                     817     ; 
                     818     ; #define HAL_KEY_POWER_ON1             0x07
                     819     ; #define HAL_KEY_POWER_ON2             0x08
                     820     ; #define HAL_KEY_POWER_ON3             0x09
                     821     ; #define HAL_KEY_POWER_ON4             0x0a
                     822     ; #define HAL_KEY_POWER_OFF1            0x0b
                     823     ; #define HAL_KEY_POWER_OFF2            0x0c
                     824     ; #define HAL_KEY_POWER_OFF3            0x0d
                     825     ; #define HAL_KEY_POWER_OFF4            0x0e
                     826     ; #define HAL_KEY_FACTORY_RESET   0x0f
                     827     ; #define HAL_KEY_BIND            0x10
                     828     ; 
                     829     ; #define HAL_TXREAD_EEPROM             0x11
                     830     ; #define HAL_RXREAD_EEPROM             (KEY_PUSH_UP|HAL_TXREAD_EEPROM)
                     831     ; 
                     832     ; // for key process 
                     833     ; #define POWER_ON1_KEY                 (KEY_PUSH_UP|HAL_KEY_POWER_ON1)
                     834     ; #define POWER_OFF1_KEY                        (KEY_PUSH_UP|HAL_KEY_POWER_OFF1)
                     835     ; #define POWER_ON2_KEY                 (KEY_PUSH_UP|HAL_KEY_POWER_ON2)
                     836     ; #define POWER_OFF2_KEY                        (KEY_PUSH_UP|HAL_KEY_POWER_OFF2)
                     837     ; #define POWER_ON3_KEY                 (KEY_PUSH_UP|HAL_KEY_POWER_ON3)
                     838     ; #define POWER_OFF3_KEY                        (KEY_PUSH_UP|HAL_KEY_POWER_OFF3)
                     839     ; #define POWER_ON4_KEY                 (KEY_PUSH_UP|HAL_KEY_POWER_ON4)
                     840     ; #define POWER_OFF4_KEY                        (KEY_PUSH_UP|HAL_KEY_POWER_OFF4)
                     841     ; #define FACTORY_RESET_KEY             (KEY_PUSH_UP|HAL_KEY_FACTORY_RESET)
                     842     ; //#define BIND_KEY                    (KEY_PUSH_UP|HAL_KEY_BIND)
                     843     ; 
                     844     ; #define POWER_ON_KEY                  (KEY_PUSH_UP|HAL_KEY_POWER_ON)
                     845     ; #define POWER_OFF_KEY                 (KEY_PUSH_UP|HAL_KEY_POWER_OFF)
                     846     ; #define BRIGHT_UP_KEY                 (KEY_PUSH_UP|HAL_KEY_BRIGHT_UP)
                     847     ; #define BRIGHT_DOWN_KEY                   (KEY_PUSH_UP|HAL_KEY_BRIGHT_DOWN)
                     848     ; #define TEMP_UP_KEY                           (KEY_PUSH_UP|HAL_KEY_TEMP_UP)
                     849     ; #define TEMP_DOWN_KEY                 (KEY_PUSH_UP|HAL_KEY_TEMP_DOWN)
                     850     ; 
                     851     ; #define DELAY_POWER_OFF_KEY           (KEY_PUSH_LONG|HAL_KEY_POWER_OFF)
                     852     ; #define BRIGHT_MOVE_UP_KEY            (KEY_PUSH_LONG|HAL_KEY_BRIGHT_UP)
                     853     ; #define BRIGHT_MOVE_DOWN_KEY  (KEY_PUSH_LONG|HAL_KEY_BRIGHT_DOWN)
                     854     ; #define TEMP_MOVE_UP_KEY              (KEY_PUSH_LONG|HAL_KEY_TEMP_UP)
                     855     ; #define TEMP_MOVE_DOWN_KEY            (KEY_PUSH_LONG|HAL_KEY_TEMP_DOWN)
                     856     ; 
                     857     ; 
                     858     ; 
                     859     ; code uint8 Key_TBL[17]={ 
                     860     ;       HAL_KEY_NO_KEY,         // 0x0 
                     861     ;       HAL_KEY_POWER_ON,       HAL_KEY_POWER_OFF3,     HAL_KEY_POWER_ON3,      HAL_KEY_BRI
                             GHT_UP,              // 
                     862     ;       HAL_KEY_POWER_OFF,      HAL_KEY_POWER_OFF2,     HAL_KEY_POWER_ON2,      HAL_KEY_BRI
                             GHT_DOWN,            // 
                     863     ;       HAL_TXREAD_EEPROM,      HAL_KEY_POWER_OFF1,     HAL_KEY_POWER_ON1,      HAL_KEY_TEM
                             P_DOWN,      // 
                     864     ;       HAL_TXREAD_EEPROM,      HAL_KEY_POWER_OFF4,     HAL_KEY_POWER_ON4,      HAL_KEY_TEM
                             P_UP,        //
                     865     ; };
                     866     ; 
                     867     ; uint8  XDATA   RF_TxLen_CH3789;  //雀鐾ǖ酪发同一组示荩则其长度也要是一样
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    15

                     868     ; volatile uint8  XDATA   RF_TxBuf_CH37[RF_TxBuf_CH3789_len];
                     869     ; volatile uint8  XDATA   RF_TxBuf_CH38[RF_TxBuf_CH3789_len];
                     870     ; volatile uint8  XDATA   RF_TxBuf_CH39[RF_TxBuf_CH3789_len];
                     871     ; 
                     872     ; uint8  XDATA   BLE_PacketBuf[BLE_PacketBuf_len];
                     873     ; uint8  XDATA   BLE_PacketLen;
                     874     ; uint8  fen_Duan=0,rgb_static_dynamic=0;
                     875     ; void Set_MacAddr(void);
                     876     ; 
                     877     ; void Ble_Packet_Encode(void){
                     878     
----                 879             RSEG  ?PR?Ble_Packet_Encode?MAIN
0000                 880     Ble_Packet_Encode:
                     881             USING   0
                     882                             ; SOURCE LINE # 144
                     883     ;       if(tx_data_seted){
                     884                             ; SOURCE LINE # 145
0000 200003   F      885             JB      tx_data_seted,$ + 6H
0003 020000   F      886             LJMP    ?C0006
                     887     ;               switch(rf_encode_state){
                     888                             ; SOURCE LINE # 146
0006 900000   F      889             MOV     DPTR,#rf_encode_state
0009 E0              890             MOVX    A,@DPTR
000A 14              891             DEC     A
000B 602F            892             JZ      ?C0004
000D 14              893             DEC     A
000E 6054            894             JZ      ?C0005
0010 2402            895             ADD     A,#02H
0012 7078            896             JNZ     ?C0006
                     897     ;                       case 0:
                     898                             ; SOURCE LINE # 147
0014                 899     ?C0003:
                     900     ;                               BlePacketEncode( RF_TxBuf_CH37, AdvPacket_2, 29, 37 );  //
                             淙徽饫锍ざ刃吹氖29，不棺钪栈够岵生雀CRC校验码，因此fifo_data会多bytes
                     901                             ; SOURCE LINE # 148
0014 900000   F      902             MOV     DPTR,#?_BlePacketEncode?BYTE+03H
0017 7401            903             MOV     A,#01H
0019 F0              904             MOVX    @DPTR,A
001A A3              905             INC     DPTR
001B 7400     F      906             MOV     A,#HIGH (AdvPacket_2)
001D F0              907             MOVX    @DPTR,A
001E A3              908             INC     DPTR
001F 7400     F      909             MOV     A,#LOW (AdvPacket_2)
0021 F0              910             MOVX    @DPTR,A
0022 A3              911             INC     DPTR
0023 741D            912             MOV     A,#01DH
0025 F0              913             MOVX    @DPTR,A
0026 A3              914             INC     DPTR
0027 7425            915             MOV     A,#025H
0029 F0              916             MOVX    @DPTR,A
002A 7B01            917             MOV     R3,#01H
002C 7A00     F      918             MOV     R2,#HIGH (RF_TxBuf_CH37)
002E 7900     F      919             MOV     R1,#LOW (RF_TxBuf_CH37)
0030 120000   F      920             LCALL   _BlePacketEncode
                     921     ;                               rf_encode_state = 1;
                     922                             ; SOURCE LINE # 149
0033 900000   F      923             MOV     DPTR,#rf_encode_state
0036 7401            924             MOV     A,#01H
0038 F0              925             MOVX    @DPTR,A
                     926     ;                               rf_encode_37  = 1;
                     927                             ; SOURCE LINE # 150
0039 D200     F      928             SETB    rf_encode_37
                     929     ;                               break;
                     930                             ; SOURCE LINE # 151
003B 22              931             RET     
                     932     ;                       case 1:
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    16

                     933                             ; SOURCE LINE # 152
003C                 934     ?C0004:
                     935     ;                               BlePacketEncode( RF_TxBuf_CH38, AdvPacket_2, 29, 38 );
                     936                             ; SOURCE LINE # 153
003C 900000   F      937             MOV     DPTR,#?_BlePacketEncode?BYTE+03H
003F 7401            938             MOV     A,#01H
0041 F0              939             MOVX    @DPTR,A
0042 A3              940             INC     DPTR
0043 7400     F      941             MOV     A,#HIGH (AdvPacket_2)
0045 F0              942             MOVX    @DPTR,A
0046 A3              943             INC     DPTR
0047 7400     F      944             MOV     A,#LOW (AdvPacket_2)
0049 F0              945             MOVX    @DPTR,A
004A A3              946             INC     DPTR
004B 741D            947             MOV     A,#01DH
004D F0              948             MOVX    @DPTR,A
004E A3              949             INC     DPTR
004F 7426            950             MOV     A,#026H
0051 F0              951             MOVX    @DPTR,A
0052 7B01            952             MOV     R3,#01H
0054 7A00     F      953             MOV     R2,#HIGH (RF_TxBuf_CH38)
0056 7900     F      954             MOV     R1,#LOW (RF_TxBuf_CH38)
0058 120000   F      955             LCALL   _BlePacketEncode
                     956     ;                               rf_encode_state = 2;
                     957                             ; SOURCE LINE # 154
005B 900000   F      958             MOV     DPTR,#rf_encode_state
005E 7402            959             MOV     A,#02H
0060 F0              960             MOVX    @DPTR,A
                     961     ;                               rf_encode_38 = 1;
                     962                             ; SOURCE LINE # 155
0061 D200     F      963             SETB    rf_encode_38
                     964     ;                               break;
                     965                             ; SOURCE LINE # 156
0063 22              966             RET     
                     967     ;                       case 2:
                     968                             ; SOURCE LINE # 157
0064                 969     ?C0005:
                     970     ;                               BlePacketEncode( RF_TxBuf_CH39, AdvPacket_2, 29, 39 );
                     971                             ; SOURCE LINE # 158
0064 900000   F      972             MOV     DPTR,#?_BlePacketEncode?BYTE+03H
0067 7401            973             MOV     A,#01H
0069 F0              974             MOVX    @DPTR,A
006A A3              975             INC     DPTR
006B 7400     F      976             MOV     A,#HIGH (AdvPacket_2)
006D F0              977             MOVX    @DPTR,A
006E A3              978             INC     DPTR
006F 7400     F      979             MOV     A,#LOW (AdvPacket_2)
0071 F0              980             MOVX    @DPTR,A
0072 A3              981             INC     DPTR
0073 741D            982             MOV     A,#01DH
0075 F0              983             MOVX    @DPTR,A
0076 A3              984             INC     DPTR
0077 7427            985             MOV     A,#027H
0079 F0              986             MOVX    @DPTR,A
007A 7B01            987             MOV     R3,#01H
007C 7A00     F      988             MOV     R2,#HIGH (RF_TxBuf_CH39)
007E 7900     F      989             MOV     R1,#LOW (RF_TxBuf_CH39)
0080 120000   F      990             LCALL   _BlePacketEncode
                     991     ;                               rf_encode_state = 0;
                     992                             ; SOURCE LINE # 159
0083 E4              993             CLR     A
0084 900000   F      994             MOV     DPTR,#rf_encode_state
0087 F0              995             MOVX    @DPTR,A
                     996     ;                               rf_encode_39 = 1;
                     997                             ; SOURCE LINE # 160
0088 D200     F      998             SETB    rf_encode_39
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    17

                     999     ;                               tx_data_seted = 0;
                    1000                             ; SOURCE LINE # 161
008A C200     F     1001             CLR     tx_data_seted
                    1002     ;                               break;
                    1003                             ; SOURCE LINE # 162
                    1004     ;                       }
                    1005                             ; SOURCE LINE # 163
                    1006     ;       }
                    1007                             ; SOURCE LINE # 164
                    1008     ; }
                    1009                             ; SOURCE LINE # 165
008C                1010     ?C0006:
008C 22             1011             RET     
                    1012     ; END OF Ble_Packet_Encode
                    1013     
                    1014     ; 
                    1015     ; void FuncLED_Init(void)
                    1016     
----                1017             RSEG  ?PR?FuncLED_Init?MAIN
0000                1018     FuncLED_Init:
                    1019                             ; SOURCE LINE # 167
                    1020     ; {
                    1021                             ; SOURCE LINE # 168
                    1022     ; #if __FQ__
                    1023     ;       PWM_OPEN_CLOCK();  //打开pwm功能
                    1024     ; #if FangZhen_Mode
                    1025     ;       PWM1_SetupIOL(BIT(0));
                    1026     ; #else
                    1027     ;       PWM_SetupIOL(BIT(0));
                    1028     ; #endif
                    1029     ; #endif
                    1030     ; }
                    1031                             ; SOURCE LINE # 177
0000 22             1032             RET     
                    1033     ; END OF FuncLED_Init
                    1034     
                    1035     ; 
                    1036     ; void Open_FuncLED(void)
                    1037     
----                1038             RSEG  ?PR?Open_FuncLED?MAIN
0000                1039     Open_FuncLED:
                    1040                             ; SOURCE LINE # 179
                    1041     ; {
                    1042                             ; SOURCE LINE # 180
                    1043     ; #if __FQ__
                    1044     ; 
                    1045     ; #if FangZhen_Mode   //在仿真模式下，不能使用VPP输出pwm信号
                    1046     ;       PWM_Setup(1, 39, (768+232), (768));
                    1047     ;       PWM_Open(1);
                    1048     ; #else
                    1049     ;       PWM_Setup(0, 39, (768+232), (768));
                    1050     ;       PWM_Open(0);
                    1051     ; #endif
                    1052     ; 
                    1053     ; #endif
                    1054     ; }
                    1055                             ; SOURCE LINE # 192
0000 22             1056             RET     
                    1057     ; END OF Open_FuncLED
                    1058     
                    1059     ; 
                    1060     ; void Close_FuncLED(void)
                    1061     
----                1062             RSEG  ?PR?Close_FuncLED?MAIN
0000                1063     Close_FuncLED:
                    1064                             ; SOURCE LINE # 194
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    18

                    1065     ; {
                    1066                             ; SOURCE LINE # 195
                    1067     ; #if __FQ__
                    1068     ; 
                    1069     ; #if FangZhen_Mode  //在仿真模式下，不能使用VPP输出pwm信号
                    1070     ;       PWM_CLOSE(1);
                    1071     ; #else
                    1072     ;       PWM_CLOSE(0);
                    1073     ; #endif
                    1074     ; 
                    1075     ; #endif
                    1076     ; }
                    1077                             ; SOURCE LINE # 205
0000 22             1078             RET     
                    1079     ; END OF Close_FuncLED
                    1080     
                    1081     ; 
                    1082     ; void mcu_io_sleep()
                    1083     
----                1084             RSEG  ?PR?mcu_io_sleep?MAIN
0000                1085     mcu_io_sleep:
                    1086             USING   0
                    1087                             ; SOURCE LINE # 207
                    1088     ; {
                    1089                             ; SOURCE LINE # 208
                    1090     ; #if Package_SOP16
                    1091     ;     GPIO_InputSetup(1, 0xff, 0xff,0);
                    1092                             ; SOURCE LINE # 210
0000 7593FF         1093             MOV     P1IN_EN,#0FFH
0003 759EFF         1094             MOV     P1OUT_EN,#0FFH
0006 75AAFF         1095             MOV     P1_PU,#0FFH
                    1096     ;       GPIO_OutputSetup(2, BIT(0)|BIT(1)|BIT(6)|BIT(7), 0);
                    1097                             ; SOURCE LINE # 211
0009 53943C         1098             ANL     P2IN_EN,#03CH
000C 539F3C         1099             ANL     P2OUT_EN,#03CH
                    1100     ;       GPIO_InputSetup(2,(~(BIT(0)|BIT(1)|BIT(6)|BIT(7))), (~(BIT(0)|BIT(1)|BIT(6)|BIT(7))
                             ),0);
                    1101                             ; SOURCE LINE # 212
000F 43943C         1102             ORL     P2IN_EN,#03CH
0012 439F3C         1103             ORL     P2OUT_EN,#03CH
0015 43AB3C         1104             ORL     P2_PU,#03CH
                    1105     ;       GPIO_DiablePU(2,BIT(0)|BIT(1)|BIT(6)|BIT(7));
                    1106                             ; SOURCE LINE # 213
0018 53AB3C         1107             ANL     P2_PU,#03CH
                    1108     ;       GPIO_DiablePD(2,0xff);
                    1109                             ; SOURCE LINE # 214
001B 75B400         1110             MOV     P2_PD,#00H
                    1111     ;       key_s0 = 0;
                    1112                             ; SOURCE LINE # 215
001E C2A7           1113             CLR     key_s0
                    1114     ;       key_s1 = 0;     
                    1115                             ; SOURCE LINE # 216
0020 C2A6           1116             CLR     key_s1
                    1117     ;       key_s2 = 0;
                    1118                             ; SOURCE LINE # 217
0022 C2A4           1119             CLR     key_s2
                    1120     ;       key_s3 = 0;
                    1121                             ; SOURCE LINE # 218
0024 C2A0           1122             CLR     key_s3
                    1123     ;       GPIO_InputSetup(3, 0xff, 0xff,0);
                    1124                             ; SOURCE LINE # 219
0026 7595FF         1125             MOV     P3IN_EN,#0FFH
0029 75A5FF         1126             MOV     P3OUT_EN,#0FFH
002C 75ACFF         1127             MOV     P3_PU,#0FFH
                    1128     ; #else
                    1129     ;       GPIO_InputSetup(1, 0xff, 0xff,0);
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    19

                    1130     ;       GPIO_OutputSetup(2, BIT(2)|BIT(3)|BIT(6)|BIT(7), 0);
                    1131     ;       GPIO_InputSetup(2,(~(BIT(2)|BIT(3)|BIT(6)|BIT(7))), (~(BIT(2)|BIT(3)|BIT(6)|BIT(7))
                             ),0);
                    1132     ;       GPIO_DiablePU(2,BIT(2)|BIT(3)|BIT(6)|BIT(7));
                    1133     ;       GPIO_DiablePD(2,0xff);
                    1134     ;       key_s0 = 0;
                    1135     ;       key_s1 = 0; 
                    1136     ;       key_s2 = 0;
                    1137     ;       key_s3 = 0;
                    1138     ;       GPIO_InputSetup(3, 0xff, 0xff,0);
                    1139     ; #endif
                    1140     ;       Delay_ms(1);
                    1141                             ; SOURCE LINE # 232
002F 7F01           1142             MOV     R7,#01H
0031 7E00           1143             MOV     R6,#00H
0033 020000   F     1144             LJMP    _Delay_ms
                    1145     ; END OF mcu_io_sleep
                    1146     
                    1147     ; }
                    1148     ; 
                    1149     ; void gpio_init()
                    1150     
----                1151             RSEG  ?PR?gpio_init?MAIN
0000                1152     gpio_init:
                    1153                             ; SOURCE LINE # 235
                    1154     ; {
                    1155                             ; SOURCE LINE # 236
                    1156     ; #if Package_SOP16
                    1157     ;       GPIO_OutputSetup(2, BIT(0)|BIT(1)|BIT(6)|BIT(7), 0);
                    1158                             ; SOURCE LINE # 238
0000 53943C         1159             ANL     P2IN_EN,#03CH
0003 539F3C         1160             ANL     P2OUT_EN,#03CH
                    1161     ;     GPIO_InputSetup(3, BIT(4)|BIT(5)|BIT(6)|BIT(7), BIT(4)|BIT(5)|BIT(6)|BIT(7),0);
                    1162                             ; SOURCE LINE # 239
0006 4395F0         1163             ORL     P3IN_EN,#0F0H
0009 43A5F0         1164             ORL     P3OUT_EN,#0F0H
000C 43ACF0         1165             ORL     P3_PU,#0F0H
                    1166     ; #endif
                    1167     ; #if Package_QFN24
                    1168     ;       GPIO_OutputSetup(2, BIT(2)|BIT(3)|BIT(6)|BIT(7), 0);
                    1169     ;       GPIO_InputSetup(3, BIT(3)|BIT(2)|BIT(1)|BIT(0), BIT(3)|BIT(2)|BIT(1)|BIT(0),0);
                    1170     ;       GPIO_OutputSetup(1,BIT(1),0);
                    1171     ;       GPIO_DiablePU(1, BIT(1));
                    1172     ;       LED_Test = 0;
                    1173     ; #endif
                    1174     ; 
                    1175     ;     key_s0 = 0;
                    1176                             ; SOURCE LINE # 249
000F C2A7           1177             CLR     key_s0
                    1178     ;       key_s1 = 0;
                    1179                             ; SOURCE LINE # 250
0011 C2A6           1180             CLR     key_s1
                    1181     ;       key_s2 = 0;
                    1182                             ; SOURCE LINE # 251
0013 C2A4           1183             CLR     key_s2
                    1184     ;       key_s3 = 0;
                    1185                             ; SOURCE LINE # 252
0015 C2A0           1186             CLR     key_s3
                    1187     ; }
                    1188                             ; SOURCE LINE # 253
0017 22             1189             RET     
                    1190     ; END OF gpio_init
                    1191     
                    1192     ; 
                    1193     ; void mcu_clk_inital(void)
                    1194     
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    20

----                1195             RSEG  ?PR?mcu_clk_inital?MAIN
0000                1196     mcu_clk_inital:
                    1197                             ; SOURCE LINE # 255
                    1198     ; {
                    1199                             ; SOURCE LINE # 256
                    1200     ;       PCON=0;          // 2018/12/11
                    1201                             ; SOURCE LINE # 257
0000 E4             1202             CLR     A
0001 F587           1203             MOV     PCON,A
                    1204     ;       PCON2 = 0 ;     
                    1205                             ; SOURCE LINE # 258
0003 F586           1206             MOV     PCON2,A
                    1207     ;     CLK_EN_CFG = 0x00 ;
                    1208                             ; SOURCE LINE # 259
0005 F585           1209             MOV     CLK_EN_CFG,A
                    1210     ;     CKCON = 0x00;    // 2018/12/11
                    1211                             ; SOURCE LINE # 260
0007 F584           1212             MOV     CKCON,A
                    1213     ; }
                    1214                             ; SOURCE LINE # 261
0009 22             1215             RET     
                    1216     ; END OF mcu_clk_inital
                    1217     
                    1218     ; 
                    1219     ; void Sys_SleepModeCheck(void)
                    1220     
----                1221             RSEG  ?PR?Sys_SleepModeCheck?MAIN
0000                1222     Sys_SleepModeCheck:
                    1223             USING   0
                    1224                             ; SOURCE LINE # 263
                    1225     ; {
                    1226                             ; SOURCE LINE # 264
                    1227     ;       if(adv_flag)
                    1228                             ; SOURCE LINE # 265
0000 200029   F     1229             JB      adv_flag,?C0026
                    1230     ;               return;
                    1231     ;     wIdleTime++;
                    1232                             ; SOURCE LINE # 267
0003 900000   F     1233             MOV     DPTR,#wIdleTime+01H
0006 E0             1234             MOVX    A,@DPTR
0007 04             1235             INC     A
0008 F0             1236             MOVX    @DPTR,A
0009 7006           1237             JNZ     ?C0132
000B 900000   F     1238             MOV     DPTR,#wIdleTime
000E E0             1239             MOVX    A,@DPTR
000F 04             1240             INC     A
0010 F0             1241             MOVX    @DPTR,A
0011                1242     ?C0132:
                    1243     ;     if(wIdleTime > cRemoteIDLETime)
                    1244                             ; SOURCE LINE # 268
0011 900000   F     1245             MOV     DPTR,#cRemoteIDLETime
0014 E0             1246             MOVX    A,@DPTR
0015 FE             1247             MOV     R6,A
0016 A3             1248             INC     DPTR
0017 E0             1249             MOVX    A,@DPTR
0018 FF             1250             MOV     R7,A
0019 D3             1251             SETB    C
001A 900000   F     1252             MOV     DPTR,#wIdleTime+01H
001D E0             1253             MOVX    A,@DPTR
001E 9F             1254             SUBB    A,R7
001F 900000   F     1255             MOV     DPTR,#wIdleTime
0022 E0             1256             MOVX    A,@DPTR
0023 9E             1257             SUBB    A,R6
0024 4006           1258             JC      ?C0026
                    1259     ;     {
                    1260                             ; SOURCE LINE # 269
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    21

                    1261     ;         bPowerDN = 1;
                    1262                             ; SOURCE LINE # 270
0026 D200     F     1263             SETB    bPowerDN
                    1264     ;         wIdleTime = 0;
                    1265                             ; SOURCE LINE # 271
0028 E4             1266             CLR     A
0029 F0             1267             MOVX    @DPTR,A
002A A3             1268             INC     DPTR
002B F0             1269             MOVX    @DPTR,A
                    1270     ;     }    
                    1271                             ; SOURCE LINE # 272
                    1272     ; }
                    1273                             ; SOURCE LINE # 273
002C                1274     ?C0026:
002C 22             1275             RET     
                    1276     ; END OF Sys_SleepModeCheck
                    1277     
                    1278     ; 
                    1279     ; void Sys_PowerOn(void)
                    1280     
----                1281             RSEG  ?PR?Sys_PowerOn?MAIN
0000                1282     Sys_PowerOn:
                    1283             USING   0
                    1284                             ; SOURCE LINE # 275
                    1285     ; {
                    1286                             ; SOURCE LINE # 276
                    1287     ;       if(power_on)                                    //MCU 从sleep 或 power_down唤醒
                    1288                             ; SOURCE LINE # 277
0000 300050   F     1289             JNB     power_on,?C0029
                    1290     ;       {
                    1291                             ; SOURCE LINE # 278
                    1292     ;         power_on = 0;
                    1293                             ; SOURCE LINE # 279
0003 C200     F     1294             CLR     power_on
                    1295     ;         gpio_init();
                    1296                             ; SOURCE LINE # 280
0005 120000   F     1297             LCALL   gpio_init
                    1298     ;               WaitUs(80);     
                    1299                             ; SOURCE LINE # 281
0008 7F50           1300             MOV     R7,#050H
000A 7E00           1301             MOV     R6,#00H
000C 7D00           1302             MOV     R5,#00H
000E 7C00           1303             MOV     R4,#00H
0010 120000   F     1304             LCALL   _WaitUs
                    1305     ;               PowerUp_Rf();
                    1306                             ; SOURCE LINE # 282
0013 120000   F     1307             LCALL   PowerUp_Rf
                    1308     ;         FLUSH_TX;
                    1309                             ; SOURCE LINE # 283
0016 9008B6         1310             MOV     DPTR,#08B6H
0019 74A0           1311             MOV     A,#0A0H
001B F0             1312             MOVX    @DPTR,A
                    1313     ;         FLUSH_RX;     
                    1314                             ; SOURCE LINE # 284
001C 7480           1315             MOV     A,#080H
001E F0             1316             MOVX    @DPTR,A
                    1317     ;         
                    1318     ;         #if UART_ENABLE
                    1319     ;       UartConfig(BAUD);
                    1320                             ; SOURCE LINE # 287
001F FF             1321             MOV     R7,A
0020 7E25           1322             MOV     R6,#025H
0022 120000   F     1323             LCALL   _UartConfig
                    1324     ;       WaitUs(60000);  
                    1325                             ; SOURCE LINE # 288
0025 7F60           1326             MOV     R7,#060H
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    22

0027 7EEA           1327             MOV     R6,#0EAH
0029 7D00           1328             MOV     R5,#00H
002B 7C00           1329             MOV     R4,#00H
002D 120000   F     1330             LCALL   _WaitUs
                    1331     ;         #endif
                    1332     ;         
                    1333     ;               WaitUs(200);                                            //  120us for PLL l
                             ocking after power up RF part.               
                    1334                             ; SOURCE LINE # 291
0030 7FC8           1335             MOV     R7,#0C8H
0032 7E00           1336             MOV     R6,#00H
0034 7D00           1337             MOV     R5,#00H
0036 7C00           1338             MOV     R4,#00H
0038 120000   F     1339             LCALL   _WaitUs
                    1340     ;               InitSysTimer(); 
                    1341                             ; SOURCE LINE # 292
003B 120000   F     1342             LCALL   InitSysTimer
                    1343     ;         
                    1344     ;               WaitUs(200);    
                    1345                             ; SOURCE LINE # 294
003E 7FC8           1346             MOV     R7,#0C8H
0040 7E00           1347             MOV     R6,#00H
0042 7D00           1348             MOV     R5,#00H
0044 7C00           1349             MOV     R4,#00H
0046 120000   F     1350             LCALL   _WaitUs
                    1351     ;         FuncLED_Init();
                    1352                             ; SOURCE LINE # 295
0049 120000   F     1353             LCALL   FuncLED_Init
                    1354     ;               wIdleTime = 0;  
                    1355                             ; SOURCE LINE # 296
004C E4             1356             CLR     A
004D 900000   F     1357             MOV     DPTR,#wIdleTime
0050 F0             1358             MOVX    @DPTR,A
0051 A3             1359             INC     DPTR
0052 F0             1360             MOVX    @DPTR,A
                    1361     ;       }
                    1362                             ; SOURCE LINE # 297
                    1363     ; } 
                    1364                             ; SOURCE LINE # 298
0053                1365     ?C0029:
0053 22             1366             RET     
                    1367     ; END OF Sys_PowerOn
                    1368     
                    1369     ; 
                    1370     ; void Sys_PowerDown(void)
                    1371     
----                1372             RSEG  ?PR?Sys_PowerDown?MAIN
0000                1373     Sys_PowerDown:
                    1374             USING   0
                    1375                             ; SOURCE LINE # 300
                    1376     ; {
                    1377                             ; SOURCE LINE # 301
                    1378     ;     if(bPowerDN)
                    1379                             ; SOURCE LINE # 302
0000 300061   F     1380             JNB     bPowerDN,?C0031
                    1381     ;     { 
                    1382                             ; SOURCE LINE # 303
                    1383     ;         bPowerDN = 0;
                    1384                             ; SOURCE LINE # 304
0003 C200     F     1385             CLR     bPowerDN
                    1386     ; 
                    1387     ;         Close_Uart();
                    1388                             ; SOURCE LINE # 306
0005 120000   F     1389             LCALL   Close_Uart
                    1390     ;         Close_FuncLED();
                    1391                             ; SOURCE LINE # 307
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    23

0008 120000   F     1392             LCALL   Close_FuncLED
                    1393     ;         
                    1394     ;               EX5  = 0 ;
                    1395                             ; SOURCE LINE # 309
000B C2EB           1396             CLR     EX5
                    1397     ;               PowerDown_Rf(); 
                    1398                             ; SOURCE LINE # 310
000D 120000   F     1399             LCALL   PowerDown_Rf
                    1400     ;               
                    1401     ;               SysTimerStop(); 
                    1402                             ; SOURCE LINE # 312
0010 C28C           1403             CLR     TR0
0012 C2A9           1404             CLR     ET0
0014 C28E           1405             CLR     TR1
0016 C2AB           1406             CLR     ET1
0018 858500   F     1407             MOV     CLK_EN_CFG_TEMP,CLK_EN_CFG
001B E4             1408             CLR     A
001C F585           1409             MOV     CLK_EN_CFG,A
                    1410     ;         mcu_io_sleep();
                    1411                             ; SOURCE LINE # 313
001E 120000   F     1412             LCALL   mcu_io_sleep
                    1413     ;         
                    1414     ;         TRX_ANAPWD_CTRL0 |=0x11;
                    1415                             ; SOURCE LINE # 315
0021 9008E3         1416             MOV     DPTR,#08E3H
0024 E0             1417             MOVX    A,@DPTR
0025 4411           1418             ORL     A,#011H
0027 F0             1419             MOVX    @DPTR,A
                    1420     ; 
                    1421     ; #if FangZhen_Mode
                    1422     ;         P3_WUEN = 0x0F;               // P3.0 P3.1 P3.2 P3.3 wakeup enable 
                    1423                             ; SOURCE LINE # 318
0028 75EE0F         1424             MOV     P3_WUEN,#0FH
                    1425     ;         P3_WUMOD = 0x00;      
                    1426                             ; SOURCE LINE # 319
002B E4             1427             CLR     A
002C F5FC           1428             MOV     P3_WUMOD,A
                    1429     ; #else
                    1430     ;         P3_WUEN = 0xF0;               // P3.4 P3.5 P3.6 P3.7 wakeup enable 
                    1431     ;         P3_WUMOD = 0x00;
                    1432     ; #endif
                    1433     ; 
                    1434     ;       TRX_ANAPWD_CTRL0 = 0x53;
                    1435                             ; SOURCE LINE # 325
002E 7453           1436             MOV     A,#053H
0030 F0             1437             MOVX    @DPTR,A
                    1438     ;       
                    1439     ;               WaitUs(200);
                    1440                             ; SOURCE LINE # 327
0031 7FC8           1441             MOV     R7,#0C8H
0033 7E00           1442             MOV     R6,#00H
0035 7D00           1443             MOV     R5,#00H
0037 7C00           1444             MOV     R4,#00H
0039 120000   F     1445             LCALL   _WaitUs
                    1446     ;               MCU_SLEEP();
                    1447                             ; SOURCE LINE # 328
003C 758603         1448             MOV     PCON2,#03H
                    1449     ;         _nop_();
                    1450                             ; SOURCE LINE # 329
003F 00             1451             NOP     
                    1452     ;               _nop_();
                    1453                             ; SOURCE LINE # 330
0040 00             1454             NOP     
                    1455     ;               _nop_();
                    1456                             ; SOURCE LINE # 331
0041 00             1457             NOP     
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    24

                    1458     ;               _nop_();
                    1459                             ; SOURCE LINE # 332
0042 00             1460             NOP     
                    1461     ;               _nop_();
                    1462                             ; SOURCE LINE # 333
0043 00             1463             NOP     
                    1464     ;               _nop_();
                    1465                             ; SOURCE LINE # 334
0044 00             1466             NOP     
                    1467     ;               _nop_();
                    1468                             ; SOURCE LINE # 335
0045 00             1469             NOP     
                    1470     ;               _nop_();
                    1471                             ; SOURCE LINE # 336
0046 00             1472             NOP     
                    1473     ;               _nop_();
                    1474                             ; SOURCE LINE # 337
0047 00             1475             NOP     
                    1476     ;               _nop_();
                    1477                             ; SOURCE LINE # 338
0048 00             1478             NOP     
                    1479     ;               _nop_();
                    1480                             ; SOURCE LINE # 339
0049 00             1481             NOP     
                    1482     ;               _nop_();
                    1483                             ; SOURCE LINE # 340
004A 00             1484             NOP     
                    1485     ;           PCON2 = 0x00;
                    1486                             ; SOURCE LINE # 341
004B E4             1487             CLR     A
004C F586           1488             MOV     PCON2,A
                    1489     ;               _nop_();
                    1490                             ; SOURCE LINE # 342
004E 00             1491             NOP     
                    1492     ;               _nop_();
                    1493                             ; SOURCE LINE # 343
004F 00             1494             NOP     
                    1495     ;               _nop_();
                    1496                             ; SOURCE LINE # 344
0050 00             1497             NOP     
                    1498     ;               _nop_();
                    1499                             ; SOURCE LINE # 345
0051 00             1500             NOP     
                    1501     ;               _nop_();
                    1502                             ; SOURCE LINE # 346
0052 00             1503             NOP     
                    1504     ;               _nop_();
                    1505                             ; SOURCE LINE # 347
0053 00             1506             NOP     
                    1507     ;               _nop_();
                    1508                             ; SOURCE LINE # 348
0054 00             1509             NOP     
                    1510     ;               _nop_();
                    1511                             ; SOURCE LINE # 349
0055 00             1512             NOP     
                    1513     ;               _nop_();
                    1514                             ; SOURCE LINE # 350
0056 00             1515             NOP     
                    1516     ;               _nop_();
                    1517                             ; SOURCE LINE # 351
0057 00             1518             NOP     
                    1519     ;               _nop_();
                    1520                             ; SOURCE LINE # 352
0058 00             1521             NOP     
                    1522     ;               _nop_();
                    1523                             ; SOURCE LINE # 353
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    25

0059 00             1524             NOP     
                    1525     ;               WaitUs(200);
                    1526                             ; SOURCE LINE # 354
005A 7FC8           1527             MOV     R7,#0C8H
005C FE             1528             MOV     R6,A
005D FD             1529             MOV     R5,A
005E FC             1530             MOV     R4,A
005F 120000   F     1531             LCALL   _WaitUs
                    1532     ;               power_on = 1;
                    1533                             ; SOURCE LINE # 355
0062 D200     F     1534             SETB    power_on
                    1535     ;                       
                    1536     ;     }
                    1537                             ; SOURCE LINE # 357
                    1538     ; }
                    1539                             ; SOURCE LINE # 358
0064                1540     ?C0031:
0064 22             1541             RET     
                    1542     ; END OF Sys_PowerDown
                    1543     
                    1544     ; 
                    1545     ; #if FangZhen_Mode
                    1546     ; #define KSA             0xd1    //P2.7  P2.6  P2.4 P2.0  is 1(high voltag)
                    1547     ; #define KS0             0x51    //P2.7 = 0
                    1548     ; #define KS1             0x91    //P2.6 = 0
                    1549     ; #define KS2             0xc1    //P2.4 = 0
                    1550     ; #define KS3             0xd0    //P2.0 = 0
                    1551     ; #define KEYSCANBIT(x)   P2=(x)
                    1552     ; #define NOKEYPUSH       0x0F    ////P3_1/2/3/4
                    1553     ; #define KEYREADBIT     (P3&NOKEYPUSH)
                    1554     ; #define KEYP2READ       P2
                    1555     ; 
                    1556     ; #else
                    1557     ; #define KSA             0xc3    //P2.7  P2.6  P2.1 P2.0  is 1(high voltag)
                    1558     ; #define KS0             0x43    //P2.7 = 0
                    1559     ; #define KS1       ss      0x83    //P2.6 = 0
                    1560     ; #define KS2             0xc1    //P2.1 = 0
                    1561     ; #define KS3             0xc2    //P2.0 = 0
                    1562     ; #define KEYSCANBIT(x)   P2=(x)
                    1563     ; #define NOKEYPUSH       0xF0        //P3_4/5/6/7
                    1564     ; #define KEYREADBIT     (P3&NOKEYPUSH)
                    1565     ; #define KEYP2READ       P2
                    1566     ; #endif
                    1567     ; 
                    1568     ; uint8 KeyP2_scan_func(){    
                    1569     
----                1570             RSEG  ?PR?KeyP2_scan_func?MAIN
0000                1571     KeyP2_scan_func:
                    1572             USING   0
                    1573                             ; SOURCE LINE # 383
                    1574     ;     int8 key_value = 0;
                    1575                             ; SOURCE LINE # 384
                    1576     ;---- Variable 'key_value?1040' assigned to Register 'R7' ----
0000 E4             1577             CLR     A
0001 FF             1578             MOV     R7,A
                    1579     ; #if FangZhen_Mode   //set P2.7  P2.6  P2.4 P2.0 input
                    1580     ;     GPIO_InputSetup(2, BIT(0)|BIT(4)|BIT(6)|BIT(7),BIT(0)|BIT(4)|BIT(6)|BIT(7), 0);
                    1581                             ; SOURCE LINE # 386
0002 4394D1         1582             ORL     P2IN_EN,#0D1H
0005 439FD1         1583             ORL     P2OUT_EN,#0D1H
0008 43ABD1         1584             ORL     P2_PU,#0D1H
                    1585     ;     GPIO_OutputSetup(3, BIT(0)|BIT(1)|BIT(2)|BIT(3)|BIT(4)|BIT(5)|BIT(6)|BIT(7), 0);//P3.
                             7  P3.6  P3.4 P3.5
                    1586                             ; SOURCE LINE # 387
000B F595           1587             MOV     P3IN_EN,A
000D F5A5           1588             MOV     P3OUT_EN,A
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    26

000F                1589     ?C0035:
                    1590     ; #else
                    1591     ;     //set P2.7  P2.6  P2.1 P2.0 input
                    1592     ;       GPIO_InputSetup(2, BIT(0)|BIT(1)|BIT(6)|BIT(7),BIT(0)|BIT(1)|BIT(6)|BIT(7), 0);
                    1593     ; #endif
                    1594     ; 
                    1595     ;     while((KEYP2READ&KSA) != KSA){        
                    1596                             ; SOURCE LINE # 393
000F E5A0           1597             MOV     A,P2
0011 54D1           1598             ANL     A,#0D1H
0013 64D1           1599             XRL     A,#0D1H
0015 601A           1600             JZ      ?C0036
                    1601     ;         //logvalue(P2,P2, 0xb2);
                    1602     ;         if(key_s0 == 0){key_value = 1; break;}
                    1603                             ; SOURCE LINE # 395
0017 20A704         1604             JB      key_s0,?C0037
001A 7F01           1605             MOV     R7,#01H
001C 8013           1606             SJMP    ?C0036
001E                1607     ?C0037:
                    1608     ;         if(key_s1 == 0){key_value = 2; break;}
                    1609                             ; SOURCE LINE # 396
001E 20A604         1610             JB      key_s1,?C0038
0021 7F02           1611             MOV     R7,#02H
0023 800C           1612             SJMP    ?C0036
0025                1613     ?C0038:
                    1614     ;         if(key_s2 == 0){key_value = 3; break;}
                    1615                             ; SOURCE LINE # 397
0025 20A404         1616             JB      key_s2,?C0039
0028 7F03           1617             MOV     R7,#03H
002A 8005           1618             SJMP    ?C0036
002C                1619     ?C0039:
                    1620     ;         if(key_s3 == 0){key_value = 4; break;}
                    1621                             ; SOURCE LINE # 398
002C 20A0E0         1622             JB      key_s3,?C0035
002F 7F04           1623             MOV     R7,#04H
                    1624     ;      }
                    1625                             ; SOURCE LINE # 399
0031                1626     ?C0036:
                    1627     ; 
                    1628     ; #if FangZhen_Mode
                    1629     ;     GPIO_OutputSetup(2, BIT(0)|BIT(4)|BIT(6)|BIT(7), 0);
                    1630                             ; SOURCE LINE # 402
0031 53942E         1631             ANL     P2IN_EN,#02EH
0034 539F2E         1632             ANL     P2OUT_EN,#02EH
                    1633     ; #else
                    1634     ;     //set P2.7  P2.6  P2.1 P2.0 output
                    1635     ;       GPIO_OutputSetup(2, BIT(0)|BIT(1)|BIT(6)|BIT(7), 0);
                    1636     ; #endif    
                    1637     ;     return key_value;
                    1638                             ; SOURCE LINE # 407
                    1639     ; }
                    1640                             ; SOURCE LINE # 408
0037 22             1641             RET     
                    1642     ; END OF KeyP2_scan_func
                    1643     
                    1644     ; 
                    1645     ; uint8 Key_scan_func(uint8 keyscan){  
                    1646     
----                1647             RSEG  ?PR?_Key_scan_func?MAIN
0000                1648     _Key_scan_func:
                    1649             USING   0
                    1650                             ; SOURCE LINE # 410
                    1651     ;---- Variable 'keyscan?1141' assigned to Register 'R7' ----
                    1652     ; #if FangZhen_Mode
                    1653     ;     GPIO_OutputSetup(2, BIT(0)|BIT(4)|BIT(6)|BIT(7), 0);//P2.7  P2.6  P2.4P2.0
                    1654                             ; SOURCE LINE # 412
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    27

0000 53942E         1655             ANL     P2IN_EN,#02EH
0003 539F2E         1656             ANL     P2OUT_EN,#02EH
                    1657     ;     GPIO_InputSetup(3, BIT(0)|BIT(1)|BIT(2)|BIT(3)|BIT(4)|BIT(5)|BIT(6)|BIT(7),
                    1658     ;                           BIT(0)|BIT(1)|BIT(2)|BIT(3)|BIT(4)|BIT(5)|BIT(6)|BIT(7), 0);//P
                             3.7  P3.6  P3.4 P3.5
                    1659                             ; SOURCE LINE # 414
0006 7595FF         1660             MOV     P3IN_EN,#0FFH
0009 75A5FF         1661             MOV     P3OUT_EN,#0FFH
000C 75ACFF         1662             MOV     P3_PU,#0FFH
                    1663     ; #else
                    1664     ;       GPIO_OutputSetup(2, BIT(0)|BIT(1)|BIT(6)|BIT(7), 0);//P2.7  P2.6  P2.1 P2.0
                    1665     ;       GPIO_InputSetup(3, BIT(4)|BIT(5)|BIT(6)|BIT(7),BIT(4)|BIT(5)|BIT(6)|BIT(7), 0);//P3
                             .7  P3.6  P3.4 P3.5
                    1666     ;       GPIO_InputSetup(3, BIT(0)|BIT(1)|BIT(2)|BIT(3)|BIT(4)|BIT(5)|BIT(6)|BIT(7),
                    1667     ;                           BIT(0)|BIT(1)|BIT(2)|BIT(3)|BIT(4)|BIT(5)|BIT(6)|BIT(7), 0);//P
                             3.7  P3.6  P3.4 P3.5
                    1668     ; #endif
                    1669     ;    // if(!key_r0)       {loginfo("37Low\r\n");}   else       {loginfo("37High\r\n");}    
                             return 0;  // for test
                    1670     ;    
                    1671     ;     KEYSCANBIT(keyscan); 
                    1672                             ; SOURCE LINE # 423
000F 8FA0           1673             MOV     P2,R7
                    1674     ;     //logvalue(P3,P3, 0xb3); 
                    1675     ;     if(KEYREADBIT != NOKEYPUSH){
                    1676                             ; SOURCE LINE # 425
0011 E5B0           1677             MOV     A,P3
0013 540F           1678             ANL     A,#0FH
0015 640F           1679             XRL     A,#0FH
0017 6018           1680             JZ      ?C0046
                    1681     ;         if(!key_r3) return 5;
                    1682                             ; SOURCE LINE # 426
0019 20B003         1683             JB      key_r3,?C0047
001C 7F05           1684             MOV     R7,#05H
001E 22             1685             RET     
001F                1686     ?C0047:
                    1687     ;         if(!key_r2) return 6;
                    1688                             ; SOURCE LINE # 427
001F 20B103         1689             JB      key_r2,?C0049
0022 7F06           1690             MOV     R7,#06H
0024 22             1691             RET     
0025                1692     ?C0049:
                    1693     ;         if(!key_r1) return 7;
                    1694                             ; SOURCE LINE # 428
0025 20B203         1695             JB      key_r1,?C0050
0028 7F07           1696             MOV     R7,#07H
002A 22             1697             RET     
002B                1698     ?C0050:
                    1699     ;         if(!key_r0) return 8;        
                    1700                             ; SOURCE LINE # 429
002B 20B303         1701             JB      key_r0,?C0046
002E 7F08           1702             MOV     R7,#08H
0030 22             1703             RET     
                    1704     ;     }
                    1705                             ; SOURCE LINE # 430
0031                1706     ?C0046:
                    1707     ;     return 0;
                    1708                             ; SOURCE LINE # 431
0031 7F00           1709             MOV     R7,#00H
                    1710     ; }
                    1711                             ; SOURCE LINE # 432
0033                1712     ?C0048:
0033 22             1713             RET     
                    1714     ; END OF _Key_scan_func
                    1715     
                    1716     ; 
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    28

                    1717     ; //key value: 1 2 3 4 5 6 ... 24
                    1718     ; //8 6 5 7   11 10 9  16 15 13
                    1719     ; uint8 Key24_Detect_GPIO(void){
                    1720     
----                1721             RSEG  ?PR?Key24_Detect_GPIO?MAIN
0000                1722     Key24_Detect_GPIO:
                    1723             USING   0
                    1724                             ; SOURCE LINE # 436
                    1725     ;     int8 key_value = 0;
                    1726                             ; SOURCE LINE # 437
0000 E4             1727             CLR     A
0001 900000   F     1728             MOV     DPTR,#key_value?1242
0004 F0             1729             MOVX    @DPTR,A
                    1730     ;     if(key_value = KeyP2_scan_func()) { logvalue(0xEA,key_value, 1);      return (key_val
                             ue);}
                    1731                             ; SOURCE LINE # 438
0005 120000   F     1732             LCALL   KeyP2_scan_func
0008 EF             1733             MOV     A,R7
0009 F0             1734             MOVX    @DPTR,A
000A 6008           1735             JZ      ?C0052
000C E0             1736             MOVX    A,@DPTR
000D FD             1737             MOV     R5,A
000E 7B01           1738             MOV     R3,#01H
0010 7FEA           1739             MOV     R7,#0EAH
0012 8031           1740             SJMP    ?C0133
0014                1741     ?C0052:
                    1742     ;     if(key_value = Key_scan_func(KSA)){ logvalue(0xEF,(key_value+16), 1); return (key_val
                             ue+16);} 
                    1743                             ; SOURCE LINE # 439
0014 7FD1           1744             MOV     R7,#0D1H
0016 120000   F     1745             LCALL   _Key_scan_func
0019 900000   F     1746             MOV     DPTR,#key_value?1242
001C EF             1747             MOV     A,R7
001D F0             1748             MOVX    @DPTR,A
001E 6013           1749             JZ      ?C0054
0020 E0             1750             MOVX    A,@DPTR
0021 2410           1751             ADD     A,#010H
0023 FD             1752             MOV     R5,A
0024 7B01           1753             MOV     R3,#01H
0026 7FEF           1754             MOV     R7,#0EFH
0028 120000   F     1755             LCALL   _logvalue
002B 900000   F     1756             MOV     DPTR,#key_value?1242
002E E0             1757             MOVX    A,@DPTR
002F 2410           1758             ADD     A,#010H
0031 FF             1759             MOV     R7,A
0032 22             1760             RET     
0033                1761     ?C0054:
                    1762     ;     
                    1763     ;     if(key_value = Key_scan_func(KS0)){ logvalue(0xEB,key_value, 1);       return (key_va
                             lue);}
                    1764                             ; SOURCE LINE # 441
0033 7F51           1765             MOV     R7,#051H
0035 120000   F     1766             LCALL   _Key_scan_func
0038 900000   F     1767             MOV     DPTR,#key_value?1242
003B EF             1768             MOV     A,R7
003C F0             1769             MOVX    @DPTR,A
003D 600B           1770             JZ      ?C0055
003F E0             1771             MOVX    A,@DPTR
0040 FD             1772             MOV     R5,A
0041 7B01           1773             MOV     R3,#01H
0043 7FEB           1774             MOV     R7,#0EBH
0045                1775     ?C0133:
0045 120000   F     1776             LCALL   _logvalue
0048 805D           1777             SJMP    ?C0134
004A                1778     ?C0055:
                    1779     ;     if(key_value = Key_scan_func(KS1)){ logvalue(0xEC,(key_value+4), 1);   return (key_va
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    29

                             lue+4);}
                    1780                             ; SOURCE LINE # 442
004A 7F91           1781             MOV     R7,#091H
004C 120000   F     1782             LCALL   _Key_scan_func
004F 900000   F     1783             MOV     DPTR,#key_value?1242
0052 EF             1784             MOV     A,R7
0053 F0             1785             MOVX    @DPTR,A
0054 6013           1786             JZ      ?C0056
0056 E0             1787             MOVX    A,@DPTR
0057 2404           1788             ADD     A,#04H
0059 FD             1789             MOV     R5,A
005A 7B01           1790             MOV     R3,#01H
005C 7FEC           1791             MOV     R7,#0ECH
005E 120000   F     1792             LCALL   _logvalue
0061 900000   F     1793             MOV     DPTR,#key_value?1242
0064 E0             1794             MOVX    A,@DPTR
0065 2404           1795             ADD     A,#04H
0067 FF             1796             MOV     R7,A
0068 22             1797             RET     
0069                1798     ?C0056:
                    1799     ;     if(key_value = Key_scan_func(KS2)){ logvalue(0xED,(key_value+8), 1);   return (key_va
                             lue+8);}
                    1800                             ; SOURCE LINE # 443
0069 7FC1           1801             MOV     R7,#0C1H
006B 120000   F     1802             LCALL   _Key_scan_func
006E 900000   F     1803             MOV     DPTR,#key_value?1242
0071 EF             1804             MOV     A,R7
0072 F0             1805             MOVX    @DPTR,A
0073 6013           1806             JZ      ?C0057
0075 E0             1807             MOVX    A,@DPTR
0076 2408           1808             ADD     A,#08H
0078 FD             1809             MOV     R5,A
0079 7B01           1810             MOV     R3,#01H
007B 7FED           1811             MOV     R7,#0EDH
007D 120000   F     1812             LCALL   _logvalue
0080 900000   F     1813             MOV     DPTR,#key_value?1242
0083 E0             1814             MOVX    A,@DPTR
0084 2408           1815             ADD     A,#08H
0086 FF             1816             MOV     R7,A
0087 22             1817             RET     
0088                1818     ?C0057:
                    1819     ;     if(key_value = Key_scan_func(KS3)){ logvalue(0xEE,(key_value+12), 1);  return (key_va
                             lue+12);} 
                    1820                             ; SOURCE LINE # 444
0088 7FD0           1821             MOV     R7,#0D0H
008A 120000   F     1822             LCALL   _Key_scan_func
008D 900000   F     1823             MOV     DPTR,#key_value?1242
0090 EF             1824             MOV     A,R7
0091 F0             1825             MOVX    @DPTR,A
0092 6013           1826             JZ      ?C0058
0094 E0             1827             MOVX    A,@DPTR
0095 240C           1828             ADD     A,#0CH
0097 FD             1829             MOV     R5,A
0098 7B01           1830             MOV     R3,#01H
009A 7FEE           1831             MOV     R7,#0EEH
009C 120000   F     1832             LCALL   _logvalue
009F 900000   F     1833             MOV     DPTR,#key_value?1242
00A2 E0             1834             MOVX    A,@DPTR
00A3 240C           1835             ADD     A,#0CH
00A5 FF             1836             MOV     R7,A
00A6 22             1837             RET     
00A7                1838     ?C0058:
                    1839     ;     
                    1840     ;     return key_value;
                    1841                             ; SOURCE LINE # 446
00A7                1842     ?C0134:
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    30

00A7 900000   F     1843             MOV     DPTR,#key_value?1242
00AA E0             1844             MOVX    A,@DPTR
00AB FF             1845             MOV     R7,A
                    1846     ; }
                    1847                             ; SOURCE LINE # 447
00AC                1848     ?C0053:
00AC 22             1849             RET     
                    1850     ; END OF Key24_Detect_GPIO
                    1851     
                    1852     ; 
                    1853     ; #if 0
                    1854     ; uint8 Key_Detect_GPIO(void)
                    1855     ; {
                    1856     ;       uint8 keybuf[2];
                    1857     ;       uint8 i, j, KeyTempCode;
                    1858     ; 
                    1859     ;       keybuf[0] = 0;
                    1860     ;       keybuf[1] = 0;
                    1861     ; 
                    1862     ;       key_s0 = 0;
                    1863     ;       key_s1 = 1;
                    1864     ;       key_s2 = 1;
                    1865     ;       key_s3 = 1;
                    1866     ; 
                    1867     ;       i = 0;
                    1868     ;       if(!key_r0)
                    1869     ;               keybuf[i] |= 0x01;
                    1870     ;       else if(!key_r1)
                    1871     ;               keybuf[i] |= 0x02;
                    1872     ;       else if(!key_r2)
                    1873     ;               keybuf[i] |= 0x04;
                    1874     ;       else if(!key_r3)
                    1875     ;               keybuf[i] |= 0x08;
                    1876     ; 
                    1877     ;       key_s0 = 1;
                    1878     ;       key_s1 = 0;
                    1879     ;       if(!key_r0)
                    1880     ;               keybuf[i] |= 0x10;
                    1881     ;       else if(!key_r1)
                    1882     ;               keybuf[i] |= 0x20;
                    1883     ;       else if(!key_r2)
                    1884     ;               keybuf[i] |= 0x40;
                    1885     ;       else if(!key_r3)
                    1886     ;               keybuf[i] |= 0x80;
                    1887     ; 
                    1888     ;       key_s1 = 1;
                    1889     ;       key_s2 = 0;     
                    1890     ;       i = 1;
                    1891     ;       if(!key_r0)
                    1892     ;               keybuf[i] |= 0x01;
                    1893     ;       else if(!key_r1)
                    1894     ;               keybuf[i] |= 0x02;
                    1895     ;       else if(!key_r2)
                    1896     ;               keybuf[i] |= 0x04;
                    1897     ;       else if(!key_r3)
                    1898     ;               keybuf[i] |= 0x08;
                    1899     ; 
                    1900     ;       key_s2 = 1;
                    1901     ;       key_s3 = 0;
                    1902     ;       if(!key_r0)
                    1903     ;               keybuf[i] |= 0x10;
                    1904     ;       else if(!key_r1)
                    1905     ;               keybuf[i] |= 0x20;
                    1906     ;       else if(!key_r2)
                    1907     ;               keybuf[i] |= 0x40;
                    1908     ;       else if(!key_r3)
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    31

                    1909     ;               keybuf[i] |= 0x80;
                    1910     ; 
                    1911     ;       key_s0 = 0;
                    1912     ;       key_s1 = 0;     
                    1913     ;       key_s2 = 0;
                    1914     ;       key_s3 = 0;
                    1915     ; 
                    1916     ;       key_r0^=1;
                    1917     ; 
                    1918     ;       KeyTempCode = 1;
                    1919     ;       for(i=0;i<2;i++) 
                    1920     ;       {
                    1921     ;               for(j=0;j<8;j++)
                    1922     ;               {
                    1923     ;                       if(keybuf[i]&0x01)
                    1924     ;                       {
                    1925     ;                               return (KeyTempCode);
                    1926     ;                       }
                    1927     ;                       keybuf[i] >>= 1;
                    1928     ;                       KeyTempCode++;
                    1929     ;               }
                    1930     ;                       
                    1931     ;       }
                    1932     ;       return 0;
                    1933     ; }
                    1934     ; #endif
                    1935     ; 
                    1936     ; #define       CRC_CHECK_START 13
                    1937     ; #define       CRC_CHECK_STOP  (CRC_CHECK_START+11)
                    1938     ; uint8 Calc_CRC_Value(void){
                    1939     
----                1940             RSEG  ?PR?Calc_CRC_Value?MAIN
0000                1941     Calc_CRC_Value:
                    1942             USING   0
                    1943                             ; SOURCE LINE # 534
                    1944     ;       uint8 i;
                    1945     ;       uint8 sum_1;
                    1946     ;       sum_1 = AdvPacket_2[CRC_CHECK_START];
                    1947                             ; SOURCE LINE # 537
0000 900000   F     1948             MOV     DPTR,#AdvPacket_2+0DH
0003 E0             1949             MOVX    A,@DPTR
0004 FF             1950             MOV     R7,A
                    1951     ;---- Variable 'sum_1?1344' assigned to Register 'R7' ----
                    1952     ;       for(i=(CRC_CHECK_START+1);i<CRC_CHECK_STOP;i++){
                    1953                             ; SOURCE LINE # 538
                    1954     ;---- Variable 'i?1343' assigned to Register 'R6' ----
0005 7E0E           1955             MOV     R6,#0EH
0007                1956     ?C0059:
0007 EE             1957             MOV     A,R6
0008 C3             1958             CLR     C
0009 9418           1959             SUBB    A,#018H
000B 7480           1960             MOV     A,#080H
000D 9480           1961             SUBB    A,#080H
000F 5010           1962             JNC     ?C0060
                    1963     ;               sum_1 += AdvPacket_2[i];
                    1964                             ; SOURCE LINE # 539
0011 7400     F     1965             MOV     A,#LOW (AdvPacket_2)
0013 2E             1966             ADD     A,R6
0014 F582           1967             MOV     DPL,A
0016 E4             1968             CLR     A
0017 3400     F     1969             ADDC    A,#HIGH (AdvPacket_2)
0019 F583           1970             MOV     DPH,A
001B E0             1971             MOVX    A,@DPTR
001C 2F             1972             ADD     A,R7
001D FF             1973             MOV     R7,A
                    1974     ;       }
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    32

                    1975                             ; SOURCE LINE # 540
001E 0E             1976             INC     R6
001F 80E6           1977             SJMP    ?C0059
0021                1978     ?C0060:
                    1979     ;       return sum_1;
                    1980                             ; SOURCE LINE # 541
                    1981     ; }
                    1982                             ; SOURCE LINE # 542
0021 22             1983             RET     
                    1984     ; END OF Calc_CRC_Value
                    1985     
                    1986     ; 
                    1987     ; void Set_Common_com_Data(void){
                    1988     
----                1989             RSEG  ?PR?Set_Common_com_Data?MAIN
0000                1990     Set_Common_com_Data:
                    1991             USING   0
                    1992                             ; SOURCE LINE # 544
                    1993     ;       Set_MacAddr();
                    1994                             ; SOURCE LINE # 545
0000 120000   F     1995             LCALL   Set_MacAddr
                    1996     ;       AdvPacket_2[1] = Adv_Packet_Len;  //示莩ざ龋定长  装载的示莩ざ  ,19+6+2 = 27
                    1997                             ; SOURCE LINE # 546
0003 900000   F     1998             MOV     DPTR,#AdvPacket_2+01H
0006 741B           1999             MOV     A,#01BH
0008 F0             2000             MOVX    @DPTR,A
                    2001     ;       
                    2002     ;       AdvPacket_2[8] = 20;   // payload示莩ざ
                    2003                             ; SOURCE LINE # 548
0009 900000   F     2004             MOV     DPTR,#AdvPacket_2+08H
000C 7414           2005             MOV     A,#014H
000E F0             2006             MOVX    @DPTR,A
                    2007     ;       AdvPacket_2[9] = 0x01;
                    2008                             ; SOURCE LINE # 549
000F A3             2009             INC     DPTR
0010 7401           2010             MOV     A,#01H
0012 F0             2011             MOVX    @DPTR,A
                    2012     ;       AdvPacket_2[10] = 0x04;
                    2013                             ; SOURCE LINE # 550
0013 A3             2014             INC     DPTR
0014 7404           2015             MOV     A,#04H
0016 F0             2016             MOVX    @DPTR,A
                    2017     ;       AdvPacket_2[11] = 0x11;
                    2018                             ; SOURCE LINE # 551
0017 A3             2019             INC     DPTR
0018 7411           2020             MOV     A,#011H
001A F0             2021             MOVX    @DPTR,A
                    2022     ;       AdvPacket_2[12] = 0x07;   //
                    2023                             ; SOURCE LINE # 552
001B A3             2024             INC     DPTR
001C 7407           2025             MOV     A,#07H
001E F0             2026             MOVX    @DPTR,A
                    2027     ;       
                    2028     ;       AdvPacket_2[13] = 0x00;    //company set,厂家码
                    2029                             ; SOURCE LINE # 554
001F E4             2030             CLR     A
0020 A3             2031             INC     DPTR
0021 F0             2032             MOVX    @DPTR,A
                    2033     ;       AdvPacket_2[14] = 0x10;    //遥控器，遥控器用0x10来识别
                    2034                             ; SOURCE LINE # 555
0022 A3             2035             INC     DPTR
0023 7410           2036             MOV     A,#010H
0025 F0             2037             MOVX    @DPTR,A
                    2038     ; }
                    2039                             ; SOURCE LINE # 556
0026 22             2040             RET     
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    33

                    2041     ; END OF Set_Common_com_Data
                    2042     
                    2043     ; 
                    2044     ; void Set_Common_Tx_Data(void){
                    2045     
----                2046             RSEG  ?PR?Set_Common_Tx_Data?MAIN
0000                2047     Set_Common_Tx_Data:
                    2048             USING   0
                    2049                             ; SOURCE LINE # 558
                    2050     ;       AdvPacket_2[22] = 0;
                    2051                             ; SOURCE LINE # 559
0000 E4             2052             CLR     A
0001 900000   F     2053             MOV     DPTR,#AdvPacket_2+016H
0004 F0             2054             MOVX    @DPTR,A
                    2055     ;     
                    2056     ;       SequenceNum_1 ++;
                    2057                             ; SOURCE LINE # 561
0005 900000   F     2058             MOV     DPTR,#SequenceNum_1
0008 E0             2059             MOVX    A,@DPTR
0009 04             2060             INC     A
000A F0             2061             MOVX    @DPTR,A
                    2062     ; 
                    2063     ;       AdvPacket_2[23] = SequenceNum_1;
                    2064                             ; SOURCE LINE # 563
000B E0             2065             MOVX    A,@DPTR
000C 900000   F     2066             MOV     DPTR,#AdvPacket_2+017H
000F F0             2067             MOVX    @DPTR,A
                    2068     ;       AdvPacket_2[24] = Calc_CRC_Value();
                    2069                             ; SOURCE LINE # 564
0010 120000   F     2070             LCALL   Calc_CRC_Value
0013 900000   F     2071             MOV     DPTR,#AdvPacket_2+018H
0016 EF             2072             MOV     A,R7
0017 F0             2073             MOVX    @DPTR,A
                    2074     ;       AdvPacket_2[25] = 0x00;
                    2075                             ; SOURCE LINE # 565
0018 E4             2076             CLR     A
0019 A3             2077             INC     DPTR
001A F0             2078             MOVX    @DPTR,A
                    2079     ;       AdvPacket_2[26] = 0xAA;  //幸好在接收模块上只识别到0xAA
                    2080                             ; SOURCE LINE # 566
001B A3             2081             INC     DPTR
001C 74AA           2082             MOV     A,#0AAH
001E F0             2083             MOVX    @DPTR,A
                    2084     ; }
                    2085                             ; SOURCE LINE # 567
001F 22             2086             RET     
                    2087     ; END OF Set_Common_Tx_Data
                    2088     
                    2089     ; 
                    2090     ; 
                    2091     ; void ShortKey_PowerOn(void){
                    2092     
----                2093             RSEG  ?PR?ShortKey_PowerOn?MAIN
0000                2094     ShortKey_PowerOn:
                    2095             USING   0
                    2096                             ; SOURCE LINE # 570
                    2097     ;     loginfo("Pwon\r\n");
                    2098                             ; SOURCE LINE # 571
0000 7BFF           2099             MOV     R3,#0FFH
0002 7A00     F     2100             MOV     R2,#HIGH (?SC_0)
0004 7900     F     2101             MOV     R1,#LOW (?SC_0)
0006 120000   F     2102             LCALL   _loginfo
                    2103     ;     CurrentGroup_1[0] = Group_ALL;
                    2104                             ; SOURCE LINE # 572
0009 900000   F     2105             MOV     DPTR,#CurrentGroup_1
000C 74FF           2106             MOV     A,#0FFH
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    34

000E F0             2107             MOVX    @DPTR,A
                    2108     ;     AdvPacket_2[15] = Group_ALL;    //组
                    2109                             ; SOURCE LINE # 573
000F 900000   F     2110             MOV     DPTR,#AdvPacket_2+0FH
0012 F0             2111             MOVX    @DPTR,A
                    2112     ;     AdvPacket_2[19] = BLE_CMD_onoff;    //on/off cmd
                    2113                             ; SOURCE LINE # 574
0013 900000   F     2114             MOV     DPTR,#AdvPacket_2+013H
0016 7414           2115             MOV     A,#014H
0018 F0             2116             MOVX    @DPTR,A
                    2117     ;     AdvPacket_2[20] = CMD_turn_on;
                    2118                             ; SOURCE LINE # 575
0019 E4             2119             CLR     A
001A A3             2120             INC     DPTR
001B F0             2121             MOVX    @DPTR,A
                    2122     ;     
                    2123     ; }
                    2124                             ; SOURCE LINE # 577
001C 22             2125             RET     
                    2126     ; END OF ShortKey_PowerOn
                    2127     
                    2128     ; void ShortKey_PowerOff(void){
                    2129     
----                2130             RSEG  ?PR?ShortKey_PowerOff?MAIN
0000                2131     ShortKey_PowerOff:
                    2132             USING   0
                    2133                             ; SOURCE LINE # 578
                    2134     ;     loginfo("Pwoff\r\n");
                    2135                             ; SOURCE LINE # 579
0000 7BFF           2136             MOV     R3,#0FFH
0002 7A00     F     2137             MOV     R2,#HIGH (?SC_7)
0004 7900     F     2138             MOV     R1,#LOW (?SC_7)
0006 120000   F     2139             LCALL   _loginfo
                    2140     ;     CurrentGroup_1[0] = Group_ALL;
                    2141                             ; SOURCE LINE # 580
0009 900000   F     2142             MOV     DPTR,#CurrentGroup_1
000C 74FF           2143             MOV     A,#0FFH
000E F0             2144             MOVX    @DPTR,A
                    2145     ;     AdvPacket_2[15] = Group_ALL;    //组
                    2146                             ; SOURCE LINE # 581
000F 900000   F     2147             MOV     DPTR,#AdvPacket_2+0FH
0012 F0             2148             MOVX    @DPTR,A
                    2149     ;     AdvPacket_2[19] = BLE_CMD_onoff;    //on/off cmd
                    2150                             ; SOURCE LINE # 582
0013 900000   F     2151             MOV     DPTR,#AdvPacket_2+013H
0016 7414           2152             MOV     A,#014H
0018 F0             2153             MOVX    @DPTR,A
                    2154     ;     AdvPacket_2[20] = CMD_turn_off;
                    2155                             ; SOURCE LINE # 583
0019 A3             2156             INC     DPTR
001A 7401           2157             MOV     A,#01H
001C F0             2158             MOVX    @DPTR,A
                    2159     ; }
                    2160                             ; SOURCE LINE # 584
001D 22             2161             RET     
                    2162     ; END OF ShortKey_PowerOff
                    2163     
                    2164     ; void ShortKey_E(void){
                    2165     
----                2166             RSEG  ?PR?ShortKey_E?MAIN
0000                2167     ShortKey_E:
                    2168             USING   0
                    2169                             ; SOURCE LINE # 585
                    2170     ;     loginfo("K_E\r\n");
                    2171                             ; SOURCE LINE # 586
0000 7BFF           2172             MOV     R3,#0FFH
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    35

0002 7A00     F     2173             MOV     R2,#HIGH (?SC_15)
0004 7900     F     2174             MOV     R1,#LOW (?SC_15)
0006 020000   F     2175             LJMP    _loginfo
                    2176     ; END OF ShortKey_E
                    2177     
                    2178     ; 
                    2179     ; }
                    2180     ; void ShortKey_S_sub(void){
                    2181     
----                2182             RSEG  ?PR?ShortKey_S_sub?MAIN
0000                2183     ShortKey_S_sub:
                    2184             USING   0
                    2185                             ; SOURCE LINE # 589
                    2186     ;     loginfo("K_S sub\r\n");
                    2187                             ; SOURCE LINE # 590
0000 7BFF           2188             MOV     R3,#0FFH
0002 7A00     F     2189             MOV     R2,#HIGH (?SC_21)
0004 7900     F     2190             MOV     R1,#LOW (?SC_21)
0006 020000   F     2191             LJMP    _loginfo
                    2192     ; END OF ShortKey_S_sub
                    2193     
                    2194     ; 
                    2195     ; }
                    2196     ; void ShortKey_S_add(void){
                    2197     
----                2198             RSEG  ?PR?ShortKey_S_add?MAIN
0000                2199     ShortKey_S_add:
                    2200             USING   0
                    2201                             ; SOURCE LINE # 593
                    2202     ;     loginfo("K_S add\r\n");
                    2203                             ; SOURCE LINE # 594
0000 7BFF           2204             MOV     R3,#0FFH
0002 7A00     F     2205             MOV     R2,#HIGH (?SC_31)
0004 7900     F     2206             MOV     R1,#LOW (?SC_31)
0006 020000   F     2207             LJMP    _loginfo
                    2208     ; END OF ShortKey_S_add
                    2209     
                    2210     ; 
                    2211     ; }
                    2212     ; void ShortKey_White(void){
                    2213     
----                2214             RSEG  ?PR?ShortKey_White?MAIN
0000                2215     ShortKey_White:
                    2216             USING   0
                    2217                             ; SOURCE LINE # 597
                    2218     ;     loginfo("K_white\r\n");
                    2219                             ; SOURCE LINE # 598
0000 7BFF           2220             MOV     R3,#0FFH
0002 7A00     F     2221             MOV     R2,#HIGH (?SC_41)
0004 7900     F     2222             MOV     R1,#LOW (?SC_41)
0006 020000   F     2223             LJMP    _loginfo
                    2224     ; END OF ShortKey_White
                    2225     
                    2226     ; }
                    2227     ; void ShortKey_Red(void){
                    2228     
----                2229             RSEG  ?PR?ShortKey_Red?MAIN
0000                2230     ShortKey_Red:
                    2231             USING   0
                    2232                             ; SOURCE LINE # 600
                    2233     ;     loginfo("K_red\r\n");
                    2234                             ; SOURCE LINE # 601
0000 7BFF           2235             MOV     R3,#0FFH
0002 7A00     F     2236             MOV     R2,#HIGH (?SC_51)
0004 7900     F     2237             MOV     R1,#LOW (?SC_51)
0006 020000   F     2238             LJMP    _loginfo
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    36

                    2239     ; END OF ShortKey_Red
                    2240     
                    2241     ; 
                    2242     ; }
                    2243     ; void ShortKey_B_add(void){
                    2244     
----                2245             RSEG  ?PR?ShortKey_B_add?MAIN
0000                2246     ShortKey_B_add:
                    2247             USING   0
                    2248                             ; SOURCE LINE # 604
                    2249     ;     loginfo("K_b add\r\n");
                    2250                             ; SOURCE LINE # 605
0000 7BFF           2251             MOV     R3,#0FFH
0002 7A00     F     2252             MOV     R2,#HIGH (?SC_59)
0004 7900     F     2253             MOV     R1,#LOW (?SC_59)
0006 020000   F     2254             LJMP    _loginfo
                    2255     ; END OF ShortKey_B_add
                    2256     
                    2257     ; 
                    2258     ; }
                    2259     ; void ShortKey_Yellow(void){
                    2260     
----                2261             RSEG  ?PR?ShortKey_Yellow?MAIN
0000                2262     ShortKey_Yellow:
                    2263             USING   0
                    2264                             ; SOURCE LINE # 608
                    2265     ;     loginfo("K_yellow\r\n");
                    2266                             ; SOURCE LINE # 609
0000 7BFF           2267             MOV     R3,#0FFH
0002 7A00     F     2268             MOV     R2,#HIGH (?SC_69)
0004 7900     F     2269             MOV     R1,#LOW (?SC_69)
0006 020000   F     2270             LJMP    _loginfo
                    2271     ; END OF ShortKey_Yellow
                    2272     
                    2273     ; 
                    2274     ; }
                    2275     ; void ShortKey_Green(void){
                    2276     
----                2277             RSEG  ?PR?ShortKey_Green?MAIN
0000                2278     ShortKey_Green:
                    2279             USING   0
                    2280                             ; SOURCE LINE # 612
                    2281     ;     loginfo("K_green\r\n");
                    2282                             ; SOURCE LINE # 613
0000 7BFF           2283             MOV     R3,#0FFH
0002 7A00     F     2284             MOV     R2,#HIGH (?SC_80)
0004 7900     F     2285             MOV     R1,#LOW (?SC_80)
0006 020000   F     2286             LJMP    _loginfo
                    2287     ; END OF ShortKey_Green
                    2288     
                    2289     ; 
                    2290     ; }
                    2291     ; void ShortKey_Scale(void){
                    2292     
----                2293             RSEG  ?PR?ShortKey_Scale?MAIN
0000                2294     ShortKey_Scale:
                    2295             USING   0
                    2296                             ; SOURCE LINE # 616
                    2297     ;     loginfo("K_scale\r\n");
                    2298                             ; SOURCE LINE # 617
0000 7BFF           2299             MOV     R3,#0FFH
0002 7A00     F     2300             MOV     R2,#HIGH (?SC_90)
0004 7900     F     2301             MOV     R1,#LOW (?SC_90)
0006 020000   F     2302             LJMP    _loginfo
                    2303     ; END OF ShortKey_Scale
                    2304     
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    37

                    2305     ; 
                    2306     ; }
                    2307     ; void ShortKey_Color(void){
                    2308     
----                2309             RSEG  ?PR?ShortKey_Color?MAIN
0000                2310     ShortKey_Color:
                    2311             USING   0
                    2312                             ; SOURCE LINE # 620
                    2313     ;     loginfo("K_color\r\n");
                    2314                             ; SOURCE LINE # 621
0000 7BFF           2315             MOV     R3,#0FFH
0002 7A00     F     2316             MOV     R2,#HIGH (?SC_100)
0004 7900     F     2317             MOV     R1,#LOW (?SC_100)
0006 020000   F     2318             LJMP    _loginfo
                    2319     ; END OF ShortKey_Color
                    2320     
                    2321     ; 
                    2322     ; }
                    2323     ; 
                    2324     ; void ShortKey_Blue(void){
                    2325     
----                2326             RSEG  ?PR?ShortKey_Blue?MAIN
0000                2327     ShortKey_Blue:
                    2328             USING   0
                    2329                             ; SOURCE LINE # 625
                    2330     ;     loginfo("K_blue\r\n");
                    2331                             ; SOURCE LINE # 626
0000 7BFF           2332             MOV     R3,#0FFH
0002 7A00     F     2333             MOV     R2,#HIGH (?SC_110)
0004 7900     F     2334             MOV     R1,#LOW (?SC_110)
0006 020000   F     2335             LJMP    _loginfo
                    2336     ; END OF ShortKey_Blue
                    2337     
                    2338     ; 
                    2339     ; }
                    2340     ; void ShortKey_B_sub(void){
                    2341     
----                2342             RSEG  ?PR?ShortKey_B_sub?MAIN
0000                2343     ShortKey_B_sub:
                    2344             USING   0
                    2345                             ; SOURCE LINE # 629
                    2346     ;     loginfo("K_b sub\r\n");
                    2347                             ; SOURCE LINE # 630
0000 7BFF           2348             MOV     R3,#0FFH
0002 7A00     F     2349             MOV     R2,#HIGH (?SC_119)
0004 7900     F     2350             MOV     R1,#LOW (?SC_119)
0006 020000   F     2351             LJMP    _loginfo
                    2352     ; END OF ShortKey_B_sub
                    2353     
                    2354     ; 
                    2355     ; }
                    2356     ; void ShortKey_M1(void){
                    2357     
----                2358             RSEG  ?PR?ShortKey_M1?MAIN
0000                2359     ShortKey_M1:
                    2360             USING   0
                    2361                             ; SOURCE LINE # 633
                    2362     ;     loginfo("K m1\r\n");
                    2363                             ; SOURCE LINE # 634
0000 7BFF           2364             MOV     R3,#0FFH
0002 7A00     F     2365             MOV     R2,#HIGH (?SC_129)
0004 7900     F     2366             MOV     R1,#LOW (?SC_129)
0006 020000   F     2367             LJMP    _loginfo
                    2368     ; END OF ShortKey_M1
                    2369     
                    2370     ; 
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    38

                    2371     ; }
                    2372     ; void ShortKey_M2(void){
                    2373     
----                2374             RSEG  ?PR?ShortKey_M2?MAIN
0000                2375     ShortKey_M2:
                    2376             USING   0
                    2377                             ; SOURCE LINE # 637
                    2378     ;     loginfo("K m2\r\n");
                    2379                             ; SOURCE LINE # 638
0000 7BFF           2380             MOV     R3,#0FFH
0002 7A00     F     2381             MOV     R2,#HIGH (?SC_136)
0004 7900     F     2382             MOV     R1,#LOW (?SC_136)
0006 020000   F     2383             LJMP    _loginfo
                    2384     ; END OF ShortKey_M2
                    2385     
                    2386     ; 
                    2387     ; }
                    2388     ; void ShortKey_M3(void){
                    2389     
----                2390             RSEG  ?PR?ShortKey_M3?MAIN
0000                2391     ShortKey_M3:
                    2392             USING   0
                    2393                             ; SOURCE LINE # 641
                    2394     ;     loginfo("K m3\r\n");
                    2395                             ; SOURCE LINE # 642
0000 7BFF           2396             MOV     R3,#0FFH
0002 7A00     F     2397             MOV     R2,#HIGH (?SC_143)
0004 7900     F     2398             MOV     R1,#LOW (?SC_143)
0006 020000   F     2399             LJMP    _loginfo
                    2400     ; END OF ShortKey_M3
                    2401     
                    2402     ; 
                    2403     ; }
                    2404     ; void ShortKey_M4(void){
                    2405     
----                2406             RSEG  ?PR?ShortKey_M4?MAIN
0000                2407     ShortKey_M4:
                    2408             USING   0
                    2409                             ; SOURCE LINE # 645
                    2410     ;     loginfo("K m4\r\n");
                    2411                             ; SOURCE LINE # 646
0000 7BFF           2412             MOV     R3,#0FFH
0002 7A00     F     2413             MOV     R2,#HIGH (?SC_150)
0004 7900     F     2414             MOV     R1,#LOW (?SC_150)
0006 020000   F     2415             LJMP    _loginfo
                    2416     ; END OF ShortKey_M4
                    2417     
                    2418     ; 
                    2419     ; }
                    2420     ; void ShortKey_M5(void){
                    2421     
----                2422             RSEG  ?PR?ShortKey_M5?MAIN
0000                2423     ShortKey_M5:
                    2424             USING   0
                    2425                             ; SOURCE LINE # 649
                    2426     ;     loginfo("K m5\r\n");
                    2427                             ; SOURCE LINE # 650
0000 7BFF           2428             MOV     R3,#0FFH
0002 7A00     F     2429             MOV     R2,#HIGH (?SC_157)
0004 7900     F     2430             MOV     R1,#LOW (?SC_157)
0006 020000   F     2431             LJMP    _loginfo
                    2432     ; END OF ShortKey_M5
                    2433     
                    2434     ; 
                    2435     ; }
                    2436     ; void ShortKey_M6(void){
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    39

                    2437     
----                2438             RSEG  ?PR?ShortKey_M6?MAIN
0000                2439     ShortKey_M6:
                    2440             USING   0
                    2441                             ; SOURCE LINE # 653
                    2442     ;     loginfo("K m6\r\n");
                    2443                             ; SOURCE LINE # 654
0000 7BFF           2444             MOV     R3,#0FFH
0002 7A00     F     2445             MOV     R2,#HIGH (?SC_164)
0004 7900     F     2446             MOV     R1,#LOW (?SC_164)
0006 020000   F     2447             LJMP    _loginfo
                    2448     ; END OF ShortKey_M6
                    2449     
                    2450     ; 
                    2451     ; }
                    2452     ; void ShortKey_M7(void){
                    2453     
----                2454             RSEG  ?PR?ShortKey_M7?MAIN
0000                2455     ShortKey_M7:
                    2456             USING   0
                    2457                             ; SOURCE LINE # 657
                    2458     ;     loginfo("K m7\r\n");
                    2459                             ; SOURCE LINE # 658
0000 7BFF           2460             MOV     R3,#0FFH
0002 7A00     F     2461             MOV     R2,#HIGH (?SC_171)
0004 7900     F     2462             MOV     R1,#LOW (?SC_171)
0006 020000   F     2463             LJMP    _loginfo
                    2464     ; END OF ShortKey_M7
                    2465     
                    2466     ; 
                    2467     ; }
                    2468     ; void ShortKey_M8(void){
                    2469     
----                2470             RSEG  ?PR?ShortKey_M8?MAIN
0000                2471     ShortKey_M8:
                    2472             USING   0
                    2473                             ; SOURCE LINE # 661
                    2474     ;     loginfo("K m8\r\n");
                    2475                             ; SOURCE LINE # 662
0000 7BFF           2476             MOV     R3,#0FFH
0002 7A00     F     2477             MOV     R2,#HIGH (?SC_178)
0004 7900     F     2478             MOV     R1,#LOW (?SC_178)
0006 020000   F     2479             LJMP    _loginfo
                    2480     ; END OF ShortKey_M8
                    2481     
                    2482     ; 
                    2483     ; }
                    2484     ; void ShortKey_M9(void){
                    2485     
----                2486             RSEG  ?PR?ShortKey_M9?MAIN
0000                2487     ShortKey_M9:
                    2488             USING   0
                    2489                             ; SOURCE LINE # 665
                    2490     ;     loginfo("K m9\r\n");
                    2491                             ; SOURCE LINE # 666
0000 7BFF           2492             MOV     R3,#0FFH
0002 7A00     F     2493             MOV     R2,#HIGH (?SC_185)
0004 7900     F     2494             MOV     R1,#LOW (?SC_185)
0006 020000   F     2495             LJMP    _loginfo
                    2496     ; END OF ShortKey_M9
                    2497     
                    2498     ; 
                    2499     ; }
                    2500     ; 
                    2501     ; uint8 LongKey_Indentify(uint8 keyvalue){
                    2502     
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    40

----                2503             RSEG  ?PR?_LongKey_Indentify?MAIN
0000                2504     _LongKey_Indentify:
                    2505             USING   0
                    2506                             ; SOURCE LINE # 670
                    2507     ;---- Variable 'keyvalue?3945' assigned to Register 'R7' ----
                    2508     ;     if(keyvalue == SKEY_POWER_ON){
                    2509                             ; SOURCE LINE # 671
0000 EF             2510             MOV     A,R7
0001 FD             2511             MOV     R5,A
0002 7C00           2512             MOV     R4,#00H
0004 6408           2513             XRL     A,#08H
0006 7003           2514             JNZ     ?C0088
                    2515     ;         return LKEY_POWER_ON;
                    2516                             ; SOURCE LINE # 672
0008 7F19           2517             MOV     R7,#019H
000A 22             2518             RET     
                    2519     ;     }
                    2520                             ; SOURCE LINE # 673
000B                2521     ?C0088:
                    2522     ;     if(keyvalue == SKEY_POWER_OFF){
                    2523                             ; SOURCE LINE # 674
000B ED             2524             MOV     A,R5
000C 6418           2525             XRL     A,#018H
000E 4C             2526             ORL     A,R4
000F 7003           2527             JNZ     ?C0090
                    2528     ;         return LKEY_POWER_OFF;
                    2529                             ; SOURCE LINE # 675
0011 7F1A           2530             MOV     R7,#01AH
0013 22             2531             RET     
                    2532     ;     }
                    2533                             ; SOURCE LINE # 676
0014                2534     ?C0090:
                    2535     ;     if(keyvalue == SKEY_E){
                    2536                             ; SOURCE LINE # 677
0014 EF             2537             MOV     A,R7
0015 FD             2538             MOV     R5,A
0016 7C00           2539             MOV     R4,#00H
0018 6414           2540             XRL     A,#014H
001A 7003           2541             JNZ     ?C0091
                    2542     ;         return LKEY_E;
                    2543                             ; SOURCE LINE # 678
001C 7F1B           2544             MOV     R7,#01BH
001E 22             2545             RET     
                    2546     ;     }
                    2547                             ; SOURCE LINE # 679
001F                2548     ?C0091:
                    2549     ;     if(keyvalue == SKEY_COLOR){
                    2550                             ; SOURCE LINE # 680
001F ED             2551             MOV     A,R5
0020 6411           2552             XRL     A,#011H
0022 4C             2553             ORL     A,R4
0023 7003           2554             JNZ     ?C0092
                    2555     ;         return LKEY_COLOR;
                    2556                             ; SOURCE LINE # 681
0025 7F1C           2557             MOV     R7,#01CH
0027 22             2558             RET     
                    2559     ;     }
                    2560                             ; SOURCE LINE # 682
0028                2561     ?C0092:
                    2562     ;     return keyvalue;
                    2563                             ; SOURCE LINE # 683
                    2564     ; }
                    2565                             ; SOURCE LINE # 684
0028                2566     ?C0089:
0028 22             2567             RET     
                    2568     ; END OF _LongKey_Indentify
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    41

                    2569     
                    2570     ; 
                    2571     ; void LongKey_PowerOn(void){
                    2572     
----                2573             RSEG  ?PR?LongKey_PowerOn?MAIN
0000                2574     LongKey_PowerOn:
                    2575             USING   0
                    2576                             ; SOURCE LINE # 686
                    2577     ;     loginfo("LK pwon\r\n");
                    2578                             ; SOURCE LINE # 687
0000 7BFF           2579             MOV     R3,#0FFH
0002 7A00     F     2580             MOV     R2,#HIGH (?SC_192)
0004 7900     F     2581             MOV     R1,#LOW (?SC_192)
0006 020000   F     2582             LJMP    _loginfo
                    2583     ; END OF LongKey_PowerOn
                    2584     
                    2585     ; }
                    2586     ; void LongKey_PowerOff(void){
                    2587     
----                2588             RSEG  ?PR?LongKey_PowerOff?MAIN
0000                2589     LongKey_PowerOff:
                    2590             USING   0
                    2591                             ; SOURCE LINE # 689
                    2592     ;     loginfo("LK pwoff\r\n");
                    2593                             ; SOURCE LINE # 690
0000 7BFF           2594             MOV     R3,#0FFH
0002 7A00     F     2595             MOV     R2,#HIGH (?SC_202)
0004 7900     F     2596             MOV     R1,#LOW (?SC_202)
0006 120000   F     2597             LCALL   _loginfo
                    2598     ;     CurrentGroup_1[0] = Group_ALL;
                    2599                             ; SOURCE LINE # 691
0009 900000   F     2600             MOV     DPTR,#CurrentGroup_1
000C 74FF           2601             MOV     A,#0FFH
000E F0             2602             MOVX    @DPTR,A
                    2603     ;     AdvPacket_2[15] = Group_ALL;    //组
                    2604                             ; SOURCE LINE # 692
000F 900000   F     2605             MOV     DPTR,#AdvPacket_2+0FH
0012 F0             2606             MOVX    @DPTR,A
                    2607     ;     AdvPacket_2[19] = BLE_CMD_onoff;    //on/off cmd
                    2608                             ; SOURCE LINE # 693
0013 900000   F     2609             MOV     DPTR,#AdvPacket_2+013H
0016 7414           2610             MOV     A,#014H
0018 F0             2611             MOVX    @DPTR,A
                    2612     ;     AdvPacket_2[20] = CMD_turn_off;  
                    2613                             ; SOURCE LINE # 694
0019 A3             2614             INC     DPTR
001A 7401           2615             MOV     A,#01H
001C F0             2616             MOVX    @DPTR,A
                    2617     ; 
                    2618     ; }
                    2619                             ; SOURCE LINE # 696
001D 22             2620             RET     
                    2621     ; END OF LongKey_PowerOff
                    2622     
                    2623     ; void LongKey_E(void){
                    2624     
----                2625             RSEG  ?PR?LongKey_E?MAIN
0000                2626     LongKey_E:
                    2627             USING   0
                    2628                             ; SOURCE LINE # 697
                    2629     ;     loginfo("LK e\r\n");
                    2630                             ; SOURCE LINE # 698
0000 7BFF           2631             MOV     R3,#0FFH
0002 7A00     F     2632             MOV     R2,#HIGH (?SC_213)
0004 7900     F     2633             MOV     R1,#LOW (?SC_213)
0006 020000   F     2634             LJMP    _loginfo
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    42

                    2635     ; END OF LongKey_E
                    2636     
                    2637     ; 
                    2638     ; }
                    2639     ; void LongKey_Color(void){
                    2640     
----                2641             RSEG  ?PR?LongKey_Color?MAIN
0000                2642     LongKey_Color:
                    2643             USING   0
                    2644                             ; SOURCE LINE # 701
                    2645     ;     loginfo("LK cl\r\n");
                    2646                             ; SOURCE LINE # 702
0000 7BFF           2647             MOV     R3,#0FFH
0002 7A00     F     2648             MOV     R2,#HIGH (?SC_220)
0004 7900     F     2649             MOV     R1,#LOW (?SC_220)
0006 020000   F     2650             LJMP    _loginfo
                    2651     ; END OF LongKey_Color
                    2652     
                    2653     ; 
                    2654     ; }
                    2655     ; 
                    2656     ; 
                    2657     ; code st_key_handle_map Key24_TBL[]={ 
                    2658     ;     {NO_KEY_PRESS,    NULL,}, // 0x0 
                    2659     ;     //短按键处理
                    2660     ;     
                    2661     ;     {SKEY_M3,          ShortKey_M3,},         // 1
                    2662     ;     {SKEY_YELLOW,    ShortKey_Yellow,},     // 2
                    2663     ;     {SKEY_M8,        ShortKey_M8,},         // 3
                    2664     ;     {SKEY_M1,        ShortKey_M1,},
                    2665     ;     {SKEY_B_SUB,     ShortKey_B_sub,},
                    2666     ;     {SKEY_S_ADD,     ShortKey_S_add,},
                    2667     ;     {SKEY_M6,        ShortKey_M6,},  //7
                    2668     ; 
                    2669     ;     {SKEY_POWER_ON,  ShortKey_PowerOn,},
                    2670     ;     {SKEY_SCALE,     ShortKey_Scale,},
                    2671     ;     {SKEY_RED,       ShortKey_Red,},  // 10
                    2672     ;     {SKEY_M5,        ShortKey_M5,},
                    2673     ;     {SKEY_S1,          NULL,},        // 12
                    2674     ;     {SKEY_GREEN,     ShortKey_Green,},
                    2675     ;     {SKEY_WHITE,     ShortKey_White,},
                    2676     ;     {SKEY_M7,        ShortKey_M7,},
                    2677     ;     {SKEY_M9,        ShortKey_M9,}, //15
                    2678     ;     {SKEY_COLOR,     ShortKey_Color,},
                    2679     ;     {SKEY_S_SUB,     ShortKey_S_sub,},
                    2680     ;     {SKEY_M2,        ShortKey_M2,},
                    2681     ;     {SKEY_E,         ShortKey_E,},
                    2682     ;     {SKEY_BLUE,      ShortKey_Blue,}, //20
                    2683     ;     {SKEY_B_ADD,     ShortKey_B_add,},
                    2684     ;     {SKEY_M4,          ShortKey_M4,}, //22
                    2685     ;     {SKEY_POWER_OFF, ShortKey_PowerOff,}, //23
                    2686     ; 
                    2687     ;     {LKEY_POWER_ON,  LongKey_PowerOn,},
                    2688     ;     {LKEY_POWER_OFF, LongKey_PowerOff,},    
                    2689     ;     {LKEY_E,         LongKey_E,},
                    2690     ;     {LKEY_COLOR,     LongKey_Color}
                    2691     ; };
                    2692     ; 
                    2693     ; 
                    2694     ; //K_green   K_white  K_S add  K_color
                    2695     ; #define KEYRELEASE  0
                    2696     ; void Key_Scan(void){
                    2697     
----                2698             RSEG  ?PR?Key_Scan?MAIN
0000                2699     Key_Scan:
                    2700             USING   0
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    43

                    2701                             ; SOURCE LINE # 746
                    2702     ;       uint8 inKey;
                    2703     ;     
                    2704     ;     inKey = Key24_Detect_GPIO();
                    2705                             ; SOURCE LINE # 749
0000 120000   F     2706             LCALL   Key24_Detect_GPIO
0003 900000   F     2707             MOV     DPTR,#inKey?4446
0006 EF             2708             MOV     A,R7
0007 F0             2709             MOVX    @DPTR,A
                    2710     ;     if(inKey == KEYRELEASE){//按键释放
                    2711                             ; SOURCE LINE # 750
0008 6003           2712             JZ      $ + 5H
000A 020000   F     2713             LJMP    ?C0097
                    2714     ;         if(KeyCode){
                    2715                             ; SOURCE LINE # 751
000D 900000   F     2716             MOV     DPTR,#KeyCode
0010 E0             2717             MOVX    A,@DPTR
0011 FF             2718             MOV     R7,A
0012 7003           2719             JNZ     $ + 5H
0014 020000   F     2720             LJMP    ?C0109
                    2721     ;             if((KeyCount >= 50) && (KeyCount < 1000))  //短按的释放
                    2722                             ; SOURCE LINE # 752
0017 900000   F     2723             MOV     DPTR,#KeyCount
001A E0             2724             MOVX    A,@DPTR
001B FC             2725             MOV     R4,A
001C A3             2726             INC     DPTR
001D E0             2727             MOVX    A,@DPTR
001E FD             2728             MOV     R5,A
001F C3             2729             CLR     C
0020 9432           2730             SUBB    A,#032H
0022 EC             2731             MOV     A,R4
0023 9400           2732             SUBB    A,#00H
0025 402D           2733             JC      ?C0099
0027 ED             2734             MOV     A,R5
0028 94E8           2735             SUBB    A,#0E8H
002A EC             2736             MOV     A,R4
002B 9403           2737             SUBB    A,#03H
002D 5025           2738             JNC     ?C0099
                    2739     ;             {
                    2740                             ; SOURCE LINE # 753
                    2741     ;                 if(Key24_TBL[KeyCode].index == KeyCode){
                    2742                             ; SOURCE LINE # 754
002F 900000   F     2743             MOV     DPTR,#KeyCode
0032 E0             2744             MOVX    A,@DPTR
0033 FE             2745             MOV     R6,A
0034 25E0           2746             ADD     A,ACC
0036 25E0           2747             ADD     A,ACC
0038 2400     F     2748             ADD     A,#LOW (Key24_TBL)
003A F582           2749             MOV     DPL,A
003C E4             2750             CLR     A
003D 3400     F     2751             ADDC    A,#HIGH (Key24_TBL)
003F F583           2752             MOV     DPH,A
0041 E4             2753             CLR     A
0042 93             2754             MOVC    A,@A+DPTR
0043 B50603         2755             CJNE    A,AR6,?C0100
                    2756     ;                     Key24_TBL[KeyCode].handle();
                    2757                             ; SOURCE LINE # 755
0046 EF             2758             MOV     A,R7
                    2759     ;                 }else{
                    2760                             ; SOURCE LINE # 756
0047 8035           2761             SJMP    ?C0135
0049                2762     ?C0100:
                    2763     ;                     //logvalue(0xAA,KeyCode, Key24_TBL[KeyCode].index); 
                    2764     ;                     loginfo("Kerr");
                    2765                             ; SOURCE LINE # 758
0049 7BFF           2766             MOV     R3,#0FFH
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    44

004B 7A00     F     2767             MOV     R2,#HIGH (?SC_228)
004D 7900     F     2768             MOV     R1,#LOW (?SC_228)
004F 120000   F     2769             LCALL   _loginfo
                    2770     ;                 }
                    2771                             ; SOURCE LINE # 759
                    2772     ;             }else if(KeyCount > 1200){//长按按键
                    2773                             ; SOURCE LINE # 760
0052 8042           2774             SJMP    ?C0102
0054                2775     ?C0099:
0054 D3             2776             SETB    C
0055 900000   F     2777             MOV     DPTR,#KeyCount+01H
0058 E0             2778             MOVX    A,@DPTR
0059 94B0           2779             SUBB    A,#0B0H
005B 900000   F     2780             MOV     DPTR,#KeyCount
005E E0             2781             MOVX    A,@DPTR
005F 9404           2782             SUBB    A,#04H
0061 4033           2783             JC      ?C0102
                    2784     ;                 if(Key24_TBL[KeyCode].index == KeyCode){
                    2785                             ; SOURCE LINE # 761
0063 900000   F     2786             MOV     DPTR,#KeyCode
0066 E0             2787             MOVX    A,@DPTR
0067 FF             2788             MOV     R7,A
0068 25E0           2789             ADD     A,ACC
006A 25E0           2790             ADD     A,ACC
006C 2400     F     2791             ADD     A,#LOW (Key24_TBL)
006E F582           2792             MOV     DPL,A
0070 E4             2793             CLR     A
0071 3400     F     2794             ADDC    A,#HIGH (Key24_TBL)
0073 F583           2795             MOV     DPH,A
0075 E4             2796             CLR     A
0076 93             2797             MOVC    A,@A+DPTR
0077 B5071C         2798             CJNE    A,AR7,?C0102
                    2799     ;                    Key24_TBL[KeyCode].handle();
                    2800                             ; SOURCE LINE # 762
007A 900000   F     2801             MOV     DPTR,#KeyCode
007D E0             2802             MOVX    A,@DPTR
007E                2803     ?C0135:
007E 25E0           2804             ADD     A,ACC
0080 25E0           2805             ADD     A,ACC
0082 2400     F     2806             ADD     A,#LOW (Key24_TBL+01H)
0084 F582           2807             MOV     DPL,A
0086 E4             2808             CLR     A
0087 3400     F     2809             ADDC    A,#HIGH (Key24_TBL+01H)
0089 F583           2810             MOV     DPH,A
008B 7401           2811             MOV     A,#01H
008D 93             2812             MOVC    A,@A+DPTR
008E FA             2813             MOV     R2,A
008F 7402           2814             MOV     A,#02H
0091 93             2815             MOVC    A,@A+DPTR
0092 F9             2816             MOV     R1,A
0093 120000   F     2817             LCALL   ?C?ICALL
                    2818     ;                 }
                    2819                             ; SOURCE LINE # 763
                    2820     ;             }
                    2821                             ; SOURCE LINE # 764
0096                2822     ?C0102:
                    2823     ;             
                    2824     ;             adv_flag = 1 ;
                    2825                             ; SOURCE LINE # 766
0096 D200     F     2826             SETB    adv_flag
                    2827     ;             KeyCode = 0;
                    2828                             ; SOURCE LINE # 767
0098 E4             2829             CLR     A
                    2830     ;         }
                    2831                             ; SOURCE LINE # 768
                    2832     ;     }else{//按键
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    45

                    2833                             ; SOURCE LINE # 769
0099 8029           2834             SJMP    ?C0136
009B                2835     ?C0097:
                    2836     ;         if(KeyCode == 0){
                    2837                             ; SOURCE LINE # 770
009B 900000   F     2838             MOV     DPTR,#KeyCode
009E E0             2839             MOVX    A,@DPTR
009F 7006           2840             JNZ     ?C0106
                    2841     ;             KeyCount = 0;
                    2842                             ; SOURCE LINE # 771
00A1 900000   F     2843             MOV     DPTR,#KeyCount
00A4 F0             2844             MOVX    @DPTR,A
00A5 A3             2845             INC     DPTR
00A6 F0             2846             MOVX    @DPTR,A
                    2847     ;         }
                    2848                             ; SOURCE LINE # 772
00A7                2849     ?C0106:
                    2850     ;         
                    2851     ;         if(KeyCount > 1000){
                    2852                             ; SOURCE LINE # 774
00A7 D3             2853             SETB    C
00A8 900000   F     2854             MOV     DPTR,#KeyCount+01H
00AB E0             2855             MOVX    A,@DPTR
00AC 94E8           2856             SUBB    A,#0E8H
00AE 900000   F     2857             MOV     DPTR,#KeyCount
00B1 E0             2858             MOVX    A,@DPTR
00B2 9403           2859             SUBB    A,#03H
00B4 900000   F     2860             MOV     DPTR,#inKey?4446
00B7 E0             2861             MOVX    A,@DPTR
00B8 400A           2862             JC      ?C0107
                    2863     ;             KeyCode = LongKey_Indentify(inKey);
                    2864                             ; SOURCE LINE # 775
00BA FF             2865             MOV     R7,A
00BB 120000   F     2866             LCALL   _LongKey_Indentify
00BE 900000   F     2867             MOV     DPTR,#KeyCode
00C1 EF             2868             MOV     A,R7
00C2 F0             2869             MOVX    @DPTR,A
                    2870     ;         }else{
                    2871                             ; SOURCE LINE # 776
00C3 22             2872             RET     
00C4                2873     ?C0107:
                    2874     ;             KeyCode = inKey;
                    2875                             ; SOURCE LINE # 777
00C4                2876     ?C0136:
00C4 900000   F     2877             MOV     DPTR,#KeyCode
00C7 F0             2878             MOVX    @DPTR,A
                    2879     ;         }
                    2880                             ; SOURCE LINE # 778
                    2881     ; #if 0
                    2882     ;               if(KeyCount < 10000){   
                    2883     ;                       KeyCount++;     
                    2884     ;               }else{
                    2885     ;                       KeyCount = LONG_CNT+1;
                    2886     ;               }
                    2887     ; #endif        
                    2888     ;     }
                    2889                             ; SOURCE LINE # 786
                    2890     ; }
                    2891                             ; SOURCE LINE # 787
00C8                2892     ?C0109:
00C8 22             2893             RET     
                    2894     ; END OF Key_Scan
                    2895     
                    2896     ; 
                    2897     ; #if 0
                    2898     ; void Key_Scan_old(void)
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    46

                    2899     ; {
                    2900     ;       uint8 inKey;
                    2901     ;       uint8 KeyMode = 0;
                    2902     ;       uint8 newKey;
                    2903     ;       newKey=HAL_KEY_NO_KEY;
                    2904     ;       inKey = Key_Detect_GPIO();  //读取按键值
                    2905     ;       short_long_touch_flag = 0;
                    2906     ;       if(inKey != KeyCode)
                    2907     ;       {
                    2908     ;               if(KeyCode)
                    2909     ;               {
                    2910     ;                       Close_FuncLED();
                    2911     ;                       if((KeyCount >= SHORT_CNT) && (KeyCount < LONG_CNT))  //短按的释放
                    2912     ;                       {
                    2913     ;                               KeyMode = KEY_PUSH_UP;  //释放按键
                    2914     ;                               newKey  = Key_TBL[KeyCode];
                    2915     ;                               switch(newKey)
                    2916     ;                               {
                    2917     ;                     case HAL_KEY_POWER_ON:    // all on/off
                    2918     ;                                       case HAL_KEY_POWER_OFF:
                    2919     ;                         CurrentGroup_1[0] = Group_ALL;
                    2920     ;                         AdvPacket_2[15] = Group_ALL;    //组
                    2921     ;                                               AdvPacket_2[19] = BLE_CMD_onoff;    //on/of
                             f cmd
                    2922     ;                         if(newKey == HAL_KEY_POWER_ON){  //on
                    2923     ;                             AdvPacket_2[20] = CMD_turn_on;
                    2924     ;                         }else if(newKey == HAL_KEY_POWER_OFF){
                    2925     ;                               AdvPacket_2[20] = CMD_turn_off;  
                    2926     ;                         }
                    2927     ;                                               goto exit_0;
                    2928     ;                                               break;  
                    2929     ; 
                    2930     ;                    case HAL_KEY_POWER_OFF1:  //小夜灯 -> 中性光 
                    2931     ;                     AdvPacket_2[15] = CurrentGroup_1[0];
                    2932     ;                                   AdvPacket_2[19] = cmd_setcw_mode;   //on/off cmd
                    2933     ;                                   AdvPacket_2[20] = 255; //打开
                    2934     ;                                   AdvPacket_2[21] = 255; //打开
                    2935     ;                                   goto exit_2;
                    2936     ;                                       //AdvPacket_2[15] = CurrentGroup_1[0];
                    2937     ;                                       //AdvPacket_2[19] = cmd_cw_low_set;     //on/off cmd
                    2938     ;                                       //AdvPacket_2[20] = 0; //打开
                    2939     ;                     //goto exit_0;
                    2940     ;                                               break;
                    2941     ;                         
                    2942     ;                                       //case HAL_KEY_POWER_ON1:   //在长条形中是小夜灯
                    2943     ;                                       case HAL_KEY_POWER_ON2:  // // 开1 //  休闲  -> 定时
                    2944     ;                                           AdvPacket_2[15] = CurrentGroup_1[0];
                    2945     ;                                           AdvPacket_2[19] = cmd_time_set;     //on/off cmd
                    2946     ;                                           AdvPacket_2[20] = DingShing_Time; //打开
                    2947     ;                                           //AdvPacket_2[21] = 0x0f; //打开
                    2948     ;                                               //CurrentGroup_1[0] = Group_One;
                    2949     ;                                               //AdvPacket_2[15] = CurrentGroup_1[0];
                    2950     ;                                               //AdvPacket_2[19] = BLE_CMD_onoff;      //o
                             n/off cmd
                    2951     ;                                               //AdvPacket_2[20] = CMD_turn_on; //打开
                    2952     ;                                               goto exit_0;
                    2953     ;                                               break;
                    2954     ;                                       //组2开
                    2955     ;                                       //case HAL_KEY_POWER_ON2:
                    2956     ;                                        case HAL_KEY_POWER_OFF2:  //   开2   // 阅读  -> 
                             ∫沟
                    2957     ;                                           AdvPacket_2[15] = CurrentGroup_1[0];
                    2958     ;                                           AdvPacket_2[19] = cmd_setcw_mode;   //on/off cmd
                    2959     ;                                           AdvPacket_2[20] = 15; //打开
                    2960     ;                                           AdvPacket_2[21] = 15; //打开
                    2961     ;                                               //CurrentGroup_1[0] = Group_Two;
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    47

                    2962     ;                                               //AdvPacket_2[15] = CurrentGroup_1[0];
                    2963     ;                                               //AdvPacket_2[19] = BLE_CMD_onoff;      //o
                             n/off cmd
                    2964     ;                                               //AdvPacket_2[20] = CMD_turn_on; //打开
                    2965     ;                                               goto exit_2;
                    2966     ;                                               break;  
                    2967     ;                  
                    2968     ;                     
                    2969     ;                                       case HAL_KEY_POWER_ON3:    // 关1      学习   ->  
                             光
                    2970     ;                                           AdvPacket_2[15] = CurrentGroup_1[0];
                    2971     ;                                           AdvPacket_2[19] = cmd_setcw_mode;   //on/off cmd
                    2972     ;                                           AdvPacket_2[20] = 0; //打开
                    2973     ;                                           AdvPacket_2[21] = 255; //打开
                    2974     ;                         goto exit_2;
                    2975     ;                                               break;
                    2976     ;                                       //case HAL_KEY_POWER_OFF2:
                    2977     ;                                        case HAL_KEY_POWER_OFF3:  // 关2      工作   ->  
                             坠
                    2978     ;                         AdvPacket_2[15] = CurrentGroup_1[0];
                    2979     ;                                           AdvPacket_2[19] = cmd_setcw_mode;   //on/off cmd
                    2980     ;                                           AdvPacket_2[20] = 255; //打开
                    2981     ;                                           AdvPacket_2[21] = 0; //打开
                    2982     ;                         goto exit_2;
                    2983     ;                                               break;  
                    2984     ;   
                    2985     ;                     case HAL_KEY_BRIGHT_UP:
                    2986     ;                     case HAL_KEY_BRIGHT_DOWN:
                    2987     ;                                               AdvPacket_2[15] = CurrentGroup_1[0];//组号 
                              off时，不切换组，只对当前操作发组号
                    2988     ;                                               if(newKey==HAL_KEY_BRIGHT_UP)
                    2989     ;                                                       AdvPacket_2[19] = cmd_light_inc_set
                             ;    //亮度
                    2990     ;                                               else if(newKey==HAL_KEY_BRIGHT_DOWN)
                    2991     ;                                                       AdvPacket_2[19] = cmd_light_dec_set
                             ;    //亮度
                    2992     ;                                               goto exit_0;
                    2993     ;                                               break;
                    2994     ;                     case HAL_KEY_TEMP_DOWN:
                    2995     ;                     case HAL_KEY_TEMP_UP:
                    2996     ;                                               AdvPacket_2[15] = CurrentGroup_1[0];//组号 
                              off时，不切换组，只对当前操作发组号
                    2997     ;                                               if(newKey==HAL_KEY_TEMP_UP)
                    2998     ;                                                       AdvPacket_2[19] = cmd_temp_inc_set;
                                  //色温
                    2999     ;                                               else if(newKey==HAL_KEY_TEMP_DOWN)
                    3000     ;                                                       AdvPacket_2[19] = cmd_temp_dec_set;
                                  //色温
                    3001     ; 
                    3002     ;                                               AdvPacket_2[20] = 0x00;
                    3003     ;                                       exit_0:
                    3004     ;                                               fen_Duan = 0;
                    3005     ;                                               rgb_static_dynamic = 0;
                    3006     ;                                       //exit_1:
                    3007     ;                                               AdvPacket_2[21] = 0x00;
                    3008     ;                     exit_2:
                    3009     ;                                               short_long_touch_flag = 1;
                    3010     ;                                               AdvPacket_2[22] = 0x00;
                    3011     ;                                               SequenceNum_inc_1 = 0;
                    3012     ;                         break;
                    3013     ;                                       default:
                    3014     ;                                               {
                    3015     ;                         KeyMode = 0 ;
                    3016     ;                         newKey = 0 ;
                    3017     ;                                               break;
                    3018     ;                                               }
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    48

                    3019     ;                               }                       
                    3020     ;                       }
                    3021     ;                       else if(KeyCount > LONG_CNT){   //长按的释放
                    3022     ;                               KeyMode = KEY_PUSH_UP;  //释放按键
                    3023     ;                               newKey  = Key_TBL[KeyCode];
                    3024     ;                               long_key_value_tempp = 0;  //长按只要释放了，就算重新按键
                    3025     ;                               SequenceNum_1++;
                    3026     ;                               switch(newKey)
                    3027     ;                               {
                    3028     ;                     case HAL_KEY_BRIGHT_UP:
                    3029     ;                     case HAL_KEY_BRIGHT_DOWN:
                    3030     ;                     case HAL_KEY_TEMP_DOWN:
                    3031     ;                     case HAL_KEY_TEMP_UP:
                    3032     ;                                               short_long_touch_flag = 3;
                    3033     ;                                               long_key_value_temp = 0;
                    3034     ;                                               AdvPacket_2[15] = CurrentGroup_1[0];       
                                          //组号  off时，不切换组，只对当前操作发组号
                    3035     ;                                               AdvPacket_2[19] = cmd_light_temp_change_sto
                             p;   //停止变化
                    3036     ;                                               AdvPacket_2[21] = 0x00;
                    3037     ;                                               AdvPacket_2[22] = 0x00;
                    3038     ;                                               SequenceNum_inc_1 = 0;
                    3039     ;                                               break;
                    3040     ;                               }
                    3041     ;                       }
                    3042     ;               }
                    3043     ;               KeyCode = inKey;
                    3044     ;               KeyCount = 0;
                    3045     ;               longCount_scale = 0;
                    3046     ;         wIdleTime = 0;
                    3047     ;         KeyCode1 = 0;
                    3048     ;       }
                    3049     ;       else if(KeyCode)
                    3050     ;       {
                    3051     ;               if(KeyCount < 10000){   
                    3052     ;                       KeyCount++;     
                    3053     ;               }else{
                    3054     ;                       KeyCount = LONG_CNT+1;
                    3055     ;               }
                    3056     ;                       
                    3057     ;         if(KeyCount == SHORT_CNT){
                    3058     ;             Open_FuncLED();
                    3059     ;         }
                    3060     ; 
                    3061     ;         if(KeyCount >= LONG_CNT_ADD){
                    3062     ;             KeyCount = LONG_CNT+1; 
                    3063     ;             KeyMode = KEY_PUSH_LONG;
                    3064     ;                       newKey = Key_TBL[KeyCode];
                    3065     ;              switch(newKey){
                    3066     ; 
                    3067     ;                 case HAL_KEY_BRIGHT_UP:
                    3068     ;                 case HAL_KEY_BRIGHT_DOWN:
                    3069     ;                                       AdvPacket_2[15] = CurrentGroup_1[0];//组号  off时，
                             不切换组，只对当前操作发组号
                    3070     ;                                       if(newKey==HAL_KEY_BRIGHT_UP)
                    3071     ;                                               AdvPacket_2[19] = cmd_light_inc_set;    //
                             炼瘸ぜ
                    3072     ;                                       else if(newKey==HAL_KEY_BRIGHT_DOWN)
                    3073     ;                                               AdvPacket_2[19] = cmd_light_dec_set;    //
                             炼瘸ぜ
                    3074     ;                                       AdvPacket_2[20] = 0x00;
                    3075     ;                                       short_long_touch_flag = 2;
                    3076     ;                                       AdvPacket_2[21] = 0x00;
                    3077     ;                                       AdvPacket_2[22] = 0x00; 
                    3078     ;                                       break;
                    3079     ;                     
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    49

                    3080     ;                 case HAL_KEY_TEMP_DOWN:
                    3081     ;                 case HAL_KEY_TEMP_UP:
                    3082     ;                                               AdvPacket_2[15] = CurrentGroup_1[0];//组号 
                              off时，不切换组，只对当前操作发组号
                    3083     ;                                               if(newKey==HAL_KEY_TEMP_UP)
                    3084     ;                                                       AdvPacket_2[19] = cmd_temp_inc_set;
                                  //色温长增
                    3085     ;                                               else if(newKey==HAL_KEY_TEMP_DOWN)
                    3086     ;                                                       AdvPacket_2[19] = cmd_temp_dec_set;
                                  //色温长减
                    3087     ;                                               AdvPacket_2[20] = 0x00;
                    3088     ;                                               short_long_touch_flag = 2;
                    3089     ;                                               AdvPacket_2[21] = 0x00;
                    3090     ;                                               AdvPacket_2[22] = 0x00;
                    3091     ;                     break;
                    3092     ;                 
                    3093     ;                 default:      
                    3094     ;                                       newKey  = HAL_KEY_NO_KEY;
                    3095     ;                     KeyMode = 0;
                    3096     ;                               break;   
                    3097     ;              }
                    3098     ;             
                    3099     ;         }
                    3100     ; 
                    3101     ;               
                    3102     ;               if(KeyCount == LONG_CNT)        // long key
                    3103     ;               {
                    3104     ;                       longCount_scale++;
                    3105     ;                       if(longCount_scale>=Long_CNT_SCALE){
                    3106     ;                               longCount_scale = 0;
                    3107     ;                       }
                    3108     ;                       KeyMode = KEY_PUSH_LONG;
                    3109     ;                       newKey = Key_TBL[KeyCode];
                    3110     ;                       {
                    3111     ;             switch(newKey)
                    3112     ;                       {
                    3113     ;                 case HAL_KEY_POWER_ON1:
                    3114     ;                                       
                    3115     ;                                               CurrentGroup_1[0] =  Group_One;
                    3116     ; 
                    3117     ;                                               AdvPacket_2[15] = Group_ALL;//组号  off时，
                             不切换组，只对当前操作发组号         
                    3118     ;                                               AdvPacket_2[19] = cmd_team_set; //组设置命令
                    3119     ;                                               AdvPacket_2[20] = CurrentGroup_1[0];
                    3120     ;                                               short_long_touch_flag = 2;
                    3121     ;                                           AdvPacket_2[21] = 0x00;
                    3122     ;                                           AdvPacket_2[22] = 0x00;                        
                                                  
                    3123     ;                                               break;
                    3124     ;                                                                                          
                                  
                    3125     ;                 case HAL_KEY_BRIGHT_UP:
                    3126     ;                 case HAL_KEY_BRIGHT_DOWN:
                    3127     ;                                       AdvPacket_2[15] = CurrentGroup_1[0];//组号  off时，
                             不切换组，只对当前操作发组号
                    3128     ;                                       if(newKey==HAL_KEY_BRIGHT_UP)
                    3129     ;                                               AdvPacket_2[19] = cmd_light_inc_set;    //
                             炼瘸ぜ
                    3130     ;                                       else if(newKey==HAL_KEY_BRIGHT_DOWN)
                    3131     ;                                               AdvPacket_2[19] = cmd_light_dec_set;    //
                             炼瘸ぜ
                    3132     ;                                       AdvPacket_2[20] = 0x00;
                    3133     ;                                       short_long_touch_flag = 2;
                    3134     ;                                       AdvPacket_2[21] = 0x00;
                    3135     ;                                       AdvPacket_2[22] = 0x00;                            
                                  
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    50

                    3136     ;                                       break;
                    3137     ;                 case HAL_KEY_TEMP_DOWN:
                    3138     ;                 case HAL_KEY_TEMP_UP:
                    3139     ;                                       AdvPacket_2[15] = CurrentGroup_1[0];//组号  off时，
                             不切换组，只对当前操作发组号
                    3140     ;                                       if(newKey==HAL_KEY_TEMP_UP)
                    3141     ;                                               AdvPacket_2[19] = cmd_temp_inc_set;     //
                             温长增
                    3142     ;                                       else if(newKey==HAL_KEY_TEMP_DOWN)
                    3143     ;                                               AdvPacket_2[19] = cmd_temp_dec_set;     //
                             温长减
                    3144     ;                                       AdvPacket_2[20] = 0x00;
                    3145     ; 
                    3146     ;                                       short_long_touch_flag = 2;
                    3147     ;                                       AdvPacket_2[21] = 0x00;
                    3148     ;                                       AdvPacket_2[22] = 0x00; 
                    3149     ;                     break;
                    3150     ;                 case HAL_KEY_POWER_ON:
                    3151     ;                                       CurrentGroup_1[0] =  Group_ALL;
                    3152     ;                                       AdvPacket_2[15] = Group_ALL;//组号  off时，不切换组
                             ，只对当前操作发组号
                    3153     ;                                       AdvPacket_2[19] = cmd_team_set; //组设置命令
                    3154     ;                                       AdvPacket_2[20] = Group_ALL;
                    3155     ;                                       short_long_touch_flag = 2;
                    3156     ;                                       AdvPacket_2[21] = 0x00;
                    3157     ;                                       AdvPacket_2[22] = 0x00; 
                    3158     ;                     break;
                    3159     ;                               case HAL_KEY_POWER_OFF:
                    3160     ;                                       AdvPacket_2[15] = Group_ALL;//组号  off时，不切换组
                             ，只对当前操作发组号
                    3161     ;                                       AdvPacket_2[19] = cmd_dissolve_set; //组设置命令
                    3162     ;                                       AdvPacket_2[20] = Group_ALL;
                    3163     ;                                       short_long_touch_flag = 2;
                    3164     ;                                       AdvPacket_2[21] = 0x00;
                    3165     ;                                       AdvPacket_2[22] = 0x00;                            
                                          
                    3166     ;                                   break;
                    3167     ;                               default:        
                    3168     ;                                       newKey  = HAL_KEY_NO_KEY;
                    3169     ;                     KeyMode = 0;
                    3170     ;                               break;
                    3171     ;                       }       
                    3172     ;                       }
                    3173     ;               }               
                    3174     ;       } 
                    3175     ; 
                    3176     ;       if((newKey != HAL_KEY_NO_KEY)&&(short_long_touch_flag!=0))
                    3177     ;       {
                    3178     ;               Set_Common_Tx_Data(); //设置一些公用的Tx示
                    3179     ;         adv_flag = 1 ;
                    3180     ;         adv_flag_count = 0;
                    3181     ;               tx_data_seted = 1;
                    3182     ;               rf_encode_37 = 0;
                    3183     ;               rf_encode_38 = 0;
                    3184     ;               rf_encode_39 = 0;
                    3185     ;               rf_encode_state = 0;
                    3186     ;       }
                    3187     ; }
                    3188     ; #endif
                    3189     ; 
                    3190     ; void TX_CMD_USE_BLE_mode(void)
                    3191     
----                3192             RSEG  ?PR?TX_CMD_USE_BLE_mode?MAIN
0000                3193     TX_CMD_USE_BLE_mode:
                    3194             USING   0
                    3195                             ; SOURCE LINE # 1082
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    51

                    3196     ; {  //使用BLE方式发码
                    3197                             ; SOURCE LINE # 1083
                    3198     ;       //雀鐾ǖ涝3ms
                    3199     ;       /* 在BLE雀龉悴バ诺乐蟹⑺BLE Packet */
                    3200     ;       ++adv_flag_count;
                    3201                             ; SOURCE LINE # 1086
0000 900000   F     3202             MOV     DPTR,#adv_flag_count
0003 E0             3203             MOVX    A,@DPTR
0004 04             3204             INC     A
0005 F0             3205             MOVX    @DPTR,A
                    3206     ;       if( adv_flag_count > Tx_Resend_Times){  //发15次
                    3207                             ; SOURCE LINE # 1087
0006 E0             3208             MOVX    A,@DPTR
0007 D3             3209             SETB    C
0008 94C8           3210             SUBB    A,#0C8H
000A 7480           3211             MOV     A,#080H
000C 9480           3212             SUBB    A,#080H
000E 4013           3213             JC      ?C0110
                    3214     ;               long_key_value_tempp = long_key_value_temp;//用于判断本次的长按与上一次的长
                             按键是否一致。
                    3215                             ; SOURCE LINE # 1088
0010 900000   F     3216             MOV     DPTR,#long_key_value_temp
0013 E0             3217             MOVX    A,@DPTR
0014 900000   F     3218             MOV     DPTR,#long_key_value_tempp
0017 F0             3219             MOVX    @DPTR,A
                    3220     ;               long_key_value_temp = 0;
                    3221                             ; SOURCE LINE # 1089
0018 E4             3222             CLR     A
0019 900000   F     3223             MOV     DPTR,#long_key_value_temp
001C F0             3224             MOVX    @DPTR,A
                    3225     ;               adv_flag = 0;
                    3226                             ; SOURCE LINE # 1090
001D C200     F     3227             CLR     adv_flag
                    3228     ;               adv_flag_count = 0;
                    3229                             ; SOURCE LINE # 1091
001F 900000   F     3230             MOV     DPTR,#adv_flag_count
0022 F0             3231             MOVX    @DPTR,A
                    3232     ;       }
                    3233                             ; SOURCE LINE # 1092
0023                3234     ?C0110:
                    3235     ;       
                    3236     ;       RF_TxLen_CH3789 = 32;
                    3237                             ; SOURCE LINE # 1094
0023 900000   F     3238             MOV     DPTR,#RF_TxLen_CH3789
0026 7420           3239             MOV     A,#020H
0028 F0             3240             MOVX    @DPTR,A
                    3241     ;       //雀鐾ǖ婪⒁淮蔚氖奔湓2ms,每4ms发一个轮回，则不会有冲突
                    3242     ;       //一个通道发一次的时间约800us
                    3243     ;       if(rf_encode_37  == 1){
                    3244                             ; SOURCE LINE # 1097
0029 300039   F     3245             JNB     rf_encode_37,?C0111
                    3246     ;               memcpy(&Payload_demo[0],&RF_TxBuf_CH37[0],RF_TxLen_CH3789);
                    3247                             ; SOURCE LINE # 1098
002C E0             3248             MOVX    A,@DPTR
002D FF             3249             MOV     R7,A
002E 7E00           3250             MOV     R6,#00H
0030 7800     F     3251             MOV     R0,#LOW (Payload_demo)
0032 7C00     F     3252             MOV     R4,#HIGH (Payload_demo)
0034 7D01           3253             MOV     R5,#01H
0036 7B01           3254             MOV     R3,#01H
0038 7A00     F     3255             MOV     R2,#HIGH (RF_TxBuf_CH37)
003A 7900     F     3256             MOV     R1,#LOW (RF_TxBuf_CH37)
003C 120000   F     3257             LCALL   ?C?COPY
                    3258     ;               RF_Set_Chn(2);
                    3259                             ; SOURCE LINE # 1099
003F 900885         3260             MOV     DPTR,#0885H
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    52

0042 7402           3261             MOV     A,#02H
0044 F0             3262             MOVX    @DPTR,A
0045 9008D2         3263             MOV     DPTR,#08D2H
0048 74F0           3264             MOV     A,#0F0H
004A F0             3265             MOVX    @DPTR,A
004B A3             3266             INC     DPTR
004C 744A           3267             MOV     A,#04AH
004E F0             3268             MOVX    @DPTR,A
                    3269     ;               RF_TXNoAck(Payload_demo, RF_TxLen_CH3789);
                    3270                             ; SOURCE LINE # 1100
004F 7B01           3271             MOV     R3,#01H
0051 7A00     F     3272             MOV     R2,#HIGH (Payload_demo)
0053 7900     F     3273             MOV     R1,#LOW (Payload_demo)
0055 900000   F     3274             MOV     DPTR,#RF_TxLen_CH3789
0058 E0             3275             MOVX    A,@DPTR
0059 FD             3276             MOV     R5,A
005A 120000   F     3277             LCALL   _RF_TXNoAck
005D                3278     ?C0112:
                    3279     ;               while(RF_TxFlag==0);
                    3280                             ; SOURCE LINE # 1101
005D 900000   F     3281             MOV     DPTR,#RF_TxFlag
0060 E0             3282             MOVX    A,@DPTR
0061 60FA           3283             JZ      ?C0112
                    3284     ;               RF_TxFlag=0;
                    3285                             ; SOURCE LINE # 1102
0063 E4             3286             CLR     A
0064 F0             3287             MOVX    @DPTR,A
                    3288     ;       }
                    3289                             ; SOURCE LINE # 1103
0065                3290     ?C0111:
                    3291     ;       if(rf_encode_38  == 1){ 
                    3292                             ; SOURCE LINE # 1104
0065 30003C   F     3293             JNB     rf_encode_38,?C0114
                    3294     ;               memcpy(&Payload_demo[0],&RF_TxBuf_CH38[0],RF_TxLen_CH3789);
                    3295                             ; SOURCE LINE # 1105
0068 900000   F     3296             MOV     DPTR,#RF_TxLen_CH3789
006B E0             3297             MOVX    A,@DPTR
006C FF             3298             MOV     R7,A
006D 7E00           3299             MOV     R6,#00H
006F 7800     F     3300             MOV     R0,#LOW (Payload_demo)
0071 7C00     F     3301             MOV     R4,#HIGH (Payload_demo)
0073 7D01           3302             MOV     R5,#01H
0075 7B01           3303             MOV     R3,#01H
0077 7A00     F     3304             MOV     R2,#HIGH (RF_TxBuf_CH38)
0079 7900     F     3305             MOV     R1,#LOW (RF_TxBuf_CH38)
007B 120000   F     3306             LCALL   ?C?COPY
                    3307     ;               RF_Set_Chn(26);
                    3308                             ; SOURCE LINE # 1106
007E 900885         3309             MOV     DPTR,#0885H
0081 741A           3310             MOV     A,#01AH
0083 F0             3311             MOVX    @DPTR,A
0084 9008D2         3312             MOV     DPTR,#08D2H
0087 7430           3313             MOV     A,#030H
0089 F0             3314             MOVX    @DPTR,A
008A A3             3315             INC     DPTR
008B 744A           3316             MOV     A,#04AH
008D F0             3317             MOVX    @DPTR,A
                    3318     ;               RF_TXNoAck(Payload_demo, RF_TxLen_CH3789);
                    3319                             ; SOURCE LINE # 1107
008E 7B01           3320             MOV     R3,#01H
0090 7A00     F     3321             MOV     R2,#HIGH (Payload_demo)
0092 7900     F     3322             MOV     R1,#LOW (Payload_demo)
0094 900000   F     3323             MOV     DPTR,#RF_TxLen_CH3789
0097 E0             3324             MOVX    A,@DPTR
0098 FD             3325             MOV     R5,A
0099 120000   F     3326             LCALL   _RF_TXNoAck
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    53

009C                3327     ?C0115:
                    3328     ;               while(RF_TxFlag==0);
                    3329                             ; SOURCE LINE # 1108
009C 900000   F     3330             MOV     DPTR,#RF_TxFlag
009F E0             3331             MOVX    A,@DPTR
00A0 60FA           3332             JZ      ?C0115
                    3333     ;               RF_TxFlag=0;
                    3334                             ; SOURCE LINE # 1109
00A2 E4             3335             CLR     A
00A3 F0             3336             MOVX    @DPTR,A
                    3337     ;       }
                    3338                             ; SOURCE LINE # 1110
00A4                3339     ?C0114:
                    3340     ;       if(rf_encode_39  == 1){
                    3341                             ; SOURCE LINE # 1111
00A4 30003C   F     3342             JNB     rf_encode_39,?C0120
                    3343     ;               memcpy(&Payload_demo[0],&RF_TxBuf_CH39[0],RF_TxLen_CH3789);
                    3344                             ; SOURCE LINE # 1112
00A7 900000   F     3345             MOV     DPTR,#RF_TxLen_CH3789
00AA E0             3346             MOVX    A,@DPTR
00AB FF             3347             MOV     R7,A
00AC 7E00           3348             MOV     R6,#00H
00AE 7800     F     3349             MOV     R0,#LOW (Payload_demo)
00B0 7C00     F     3350             MOV     R4,#HIGH (Payload_demo)
00B2 7D01           3351             MOV     R5,#01H
00B4 7B01           3352             MOV     R3,#01H
00B6 7A00     F     3353             MOV     R2,#HIGH (RF_TxBuf_CH39)
00B8 7900     F     3354             MOV     R1,#LOW (RF_TxBuf_CH39)
00BA 120000   F     3355             LCALL   ?C?COPY
                    3356     ;               RF_Set_Chn(80);
                    3357                             ; SOURCE LINE # 1113
00BD 900885         3358             MOV     DPTR,#0885H
00C0 7450           3359             MOV     A,#050H
00C2 F0             3360             MOVX    @DPTR,A
00C3 9008D2         3361             MOV     DPTR,#08D2H
00C6 7480           3362             MOV     A,#080H
00C8 F0             3363             MOVX    @DPTR,A
00C9 A3             3364             INC     DPTR
00CA 7448           3365             MOV     A,#048H
00CC F0             3366             MOVX    @DPTR,A
                    3367     ;               RF_TXNoAck(Payload_demo, RF_TxLen_CH3789);
                    3368                             ; SOURCE LINE # 1114
00CD 7B01           3369             MOV     R3,#01H
00CF 7A00     F     3370             MOV     R2,#HIGH (Payload_demo)
00D1 7900     F     3371             MOV     R1,#LOW (Payload_demo)
00D3 900000   F     3372             MOV     DPTR,#RF_TxLen_CH3789
00D6 E0             3373             MOVX    A,@DPTR
00D7 FD             3374             MOV     R5,A
00D8 120000   F     3375             LCALL   _RF_TXNoAck
00DB                3376     ?C0118:
                    3377     ;               while(RF_TxFlag==0);
                    3378                             ; SOURCE LINE # 1115
00DB 900000   F     3379             MOV     DPTR,#RF_TxFlag
00DE E0             3380             MOVX    A,@DPTR
00DF 60FA           3381             JZ      ?C0118
                    3382     ;               RF_TxFlag=0;
                    3383                             ; SOURCE LINE # 1116
00E1 E4             3384             CLR     A
00E2 F0             3385             MOVX    @DPTR,A
                    3386     ;       }
                    3387                             ; SOURCE LINE # 1117
                    3388     ; }
                    3389                             ; SOURCE LINE # 1118
00E3                3390     ?C0120:
00E3 22             3391             RET     
                    3392     ; END OF TX_CMD_USE_BLE_mode
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    54

                    3393     
                    3394     ; 
                    3395     ; void Get_MacAddr(void){   //从IC的寄存器中获取 mac地址
                    3396     
----                3397             RSEG  ?PR?Get_MacAddr?MAIN
0000                3398     Get_MacAddr:
                    3399                             ; SOURCE LINE # 1120
                    3400     ;    // SrcAddr_1[4] = ID4;
                    3401     ;       SrcAddr_1[3] = ID3;
                    3402                             ; SOURCE LINE # 1122
0000 900000   F     3403             MOV     DPTR,#SrcAddr_1+03H
0003 7422           3404             MOV     A,#022H
0005 F0             3405             MOVX    @DPTR,A
                    3406     ;       SrcAddr_1[2] = ID2;
                    3407                             ; SOURCE LINE # 1123
0006 900000   F     3408             MOV     DPTR,#SrcAddr_1+02H
0009 7433           3409             MOV     A,#033H
000B F0             3410             MOVX    @DPTR,A
                    3411     ;     SrcAddr_1[1] = ID1;
                    3412                             ; SOURCE LINE # 1124
000C 900000   F     3413             MOV     DPTR,#SrcAddr_1+01H
000F 7444           3414             MOV     A,#044H
0011 F0             3415             MOVX    @DPTR,A
                    3416     ;       SrcAddr_1[0] = ID0;
                    3417                             ; SOURCE LINE # 1125
0012 900000   F     3418             MOV     DPTR,#SrcAddr_1
0015 7455           3419             MOV     A,#055H
0017 F0             3420             MOVX    @DPTR,A
                    3421     ; }
                    3422                             ; SOURCE LINE # 1126
0018 22             3423             RET     
                    3424     ; END OF Get_MacAddr
                    3425     
                    3426     ; 
                    3427     ; void Set_MacAddr(void){
                    3428     
----                3429             RSEG  ?PR?Set_MacAddr?MAIN
0000                3430     Set_MacAddr:
                    3431             USING   0
                    3432                             ; SOURCE LINE # 1128
                    3433     ;     AdvPacket_2[2] = SrcAddr_1[0];
                    3434                             ; SOURCE LINE # 1129
0000 900000   F     3435             MOV     DPTR,#SrcAddr_1
0003 E0             3436             MOVX    A,@DPTR
0004 FF             3437             MOV     R7,A
0005 900000   F     3438             MOV     DPTR,#AdvPacket_2+02H
0008 F0             3439             MOVX    @DPTR,A
                    3440     ;     AdvPacket_2[3] = SrcAddr_1[1];
                    3441                             ; SOURCE LINE # 1130
0009 900000   F     3442             MOV     DPTR,#SrcAddr_1+01H
000C E0             3443             MOVX    A,@DPTR
000D FE             3444             MOV     R6,A
000E 900000   F     3445             MOV     DPTR,#AdvPacket_2+03H
0011 F0             3446             MOVX    @DPTR,A
                    3447     ;     AdvPacket_2[4] = SrcAddr_1[2];
                    3448                             ; SOURCE LINE # 1131
0012 900000   F     3449             MOV     DPTR,#SrcAddr_1+02H
0015 E0             3450             MOVX    A,@DPTR
0016 FD             3451             MOV     R5,A
0017 900000   F     3452             MOV     DPTR,#AdvPacket_2+04H
001A F0             3453             MOVX    @DPTR,A
                    3454     ;     AdvPacket_2[5] = SrcAddr_1[3];
                    3455                             ; SOURCE LINE # 1132
001B 900000   F     3456             MOV     DPTR,#SrcAddr_1+03H
001E E0             3457             MOVX    A,@DPTR
001F 900000   F     3458             MOV     DPTR,#AdvPacket_2+05H
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    55

0022 F0             3459             MOVX    @DPTR,A
                    3460     ;     AdvPacket_2[6] = 0;//SrcAddr_1[4];  //原来BLE包需要的示
                    3461                             ; SOURCE LINE # 1133
0023 E4             3462             CLR     A
0024 A3             3463             INC     DPTR
0025 F0             3464             MOVX    @DPTR,A
                    3465     ; 
                    3466     ;     AdvPacket_2[16] = SrcAddr_1[0];  //ID的LSB ，1586从示莅抓取的mac地址
                    3467                             ; SOURCE LINE # 1135
0026 900000   F     3468             MOV     DPTR,#AdvPacket_2+010H
0029 EF             3469             MOV     A,R7
002A F0             3470             MOVX    @DPTR,A
                    3471     ;     AdvPacket_2[17] = SrcAddr_1[1];
                    3472                             ; SOURCE LINE # 1136
002B A3             3473             INC     DPTR
002C EE             3474             MOV     A,R6
002D F0             3475             MOVX    @DPTR,A
                    3476     ;     AdvPacket_2[18] = SrcAddr_1[2];
                    3477                             ; SOURCE LINE # 1137
002E A3             3478             INC     DPTR
002F ED             3479             MOV     A,R5
0030 F0             3480             MOVX    @DPTR,A
                    3481     ; }
                    3482                             ; SOURCE LINE # 1138
0031 22             3483             RET     
                    3484     ; END OF Set_MacAddr
                    3485     
                    3486     ; void Power_On_Init(void){
                    3487     
----                3488             RSEG  ?PR?Power_On_Init?MAIN
0000                3489     Power_On_Init:
                    3490             USING   0
                    3491                             ; SOURCE LINE # 1139
                    3492     ;     uint8 i = 10;
                    3493                             ; SOURCE LINE # 1140
0000 900000   F     3494             MOV     DPTR,#i?4847
0003 740A           3495             MOV     A,#0AH
0005 F0             3496             MOVX    @DPTR,A
                    3497     ;       EA = 0;
                    3498                             ; SOURCE LINE # 1141
0006 C2AF           3499             CLR     EA
                    3500     ;       InitSysTimer();
                    3501                             ; SOURCE LINE # 1142
0008 120000   F     3502             LCALL   InitSysTimer
                    3503     ;       Sys_set_1MHZ_rate();
                    3504                             ; SOURCE LINE # 1143
000B 120000   F     3505             LCALL   Sys_set_1MHZ_rate
                    3506     ;       EA = 1;
                    3507                             ; SOURCE LINE # 1144
000E D2AF           3508             SETB    EA
                    3509     ; 
                    3510     ; #if UART_ENABLE
                    3511     ;     UartConfig(BAUD);
                    3512                             ; SOURCE LINE # 1147
0010 7F80           3513             MOV     R7,#080H
0012 7E25           3514             MOV     R6,#025H
0014 120000   F     3515             LCALL   _UartConfig
                    3516     ;     WaitUs(60000);    
                    3517                             ; SOURCE LINE # 1148
0017 7F60           3518             MOV     R7,#060H
0019 7EEA           3519             MOV     R6,#0EAH
001B 7D00           3520             MOV     R5,#00H
001D 7C00           3521             MOV     R4,#00H
001F 120000   F     3522             LCALL   _WaitUs
                    3523     ; #endif
                    3524     ; 
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    56

                    3525     ;     BlePacketDeductive( RF_TxBuf_CH37, AdvPacket_2, 29, 37);
                    3526                             ; SOURCE LINE # 1151
0022 900000   F     3527             MOV     DPTR,#?_BlePacketDeductive?BYTE+03H
0025 7401           3528             MOV     A,#01H
0027 F0             3529             MOVX    @DPTR,A
0028 A3             3530             INC     DPTR
0029 7400     F     3531             MOV     A,#HIGH (AdvPacket_2)
002B F0             3532             MOVX    @DPTR,A
002C A3             3533             INC     DPTR
002D 7400     F     3534             MOV     A,#LOW (AdvPacket_2)
002F F0             3535             MOVX    @DPTR,A
0030 A3             3536             INC     DPTR
0031 741D           3537             MOV     A,#01DH
0033 F0             3538             MOVX    @DPTR,A
0034 A3             3539             INC     DPTR
0035 7425           3540             MOV     A,#025H
0037 F0             3541             MOVX    @DPTR,A
0038 7B01           3542             MOV     R3,#01H
003A 7A00     F     3543             MOV     R2,#HIGH (RF_TxBuf_CH37)
003C 7900     F     3544             MOV     R1,#LOW (RF_TxBuf_CH37)
003E 120000   F     3545             LCALL   _BlePacketDeductive
                    3546     ; #if UART_ENABLE
                    3547     ;     uart_data_send[0] = '2';
                    3548                             ; SOURCE LINE # 1153
0041 900000   F     3549             MOV     DPTR,#uart_data_send
0044 7432           3550             MOV     A,#032H
0046 F0             3551             MOVX    @DPTR,A
                    3552     ;     uart_data_send[1] = '4';
                    3553                             ; SOURCE LINE # 1154
0047 A3             3554             INC     DPTR
0048 7434           3555             MOV     A,#034H
004A F0             3556             MOVX    @DPTR,A
                    3557     ;     uart_data_send[2] = '6';
                    3558                             ; SOURCE LINE # 1155
004B A3             3559             INC     DPTR
004C 7436           3560             MOV     A,#036H
004E F0             3561             MOVX    @DPTR,A
                    3562     ;     uart_data_send[3] = '1';
                    3563                             ; SOURCE LINE # 1156
004F A3             3564             INC     DPTR
0050 7431           3565             MOV     A,#031H
0052 F0             3566             MOVX    @DPTR,A
                    3567     ;     uart_data_send[4] = 'i';
                    3568                             ; SOURCE LINE # 1157
0053 A3             3569             INC     DPTR
0054 7469           3570             MOV     A,#069H
0056 F0             3571             MOVX    @DPTR,A
                    3572     ;     uart_data_send[5] = 'n';
                    3573                             ; SOURCE LINE # 1158
0057 A3             3574             INC     DPTR
0058 746E           3575             MOV     A,#06EH
005A F0             3576             MOVX    @DPTR,A
                    3577     ;     uart_data_send[6] = 'i';
                    3578                             ; SOURCE LINE # 1159
005B A3             3579             INC     DPTR
005C 7469           3580             MOV     A,#069H
005E F0             3581             MOVX    @DPTR,A
                    3582     ;     uart_data_send[7] = 't';
                    3583                             ; SOURCE LINE # 1160
005F A3             3584             INC     DPTR
0060 7474           3585             MOV     A,#074H
0062 F0             3586             MOVX    @DPTR,A
                    3587     ;     uart_data_send[8] = '\n';
                    3588                             ; SOURCE LINE # 1161
0063 A3             3589             INC     DPTR
0064 740A           3590             MOV     A,#0AH
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    57

0066 F0             3591             MOVX    @DPTR,A
                    3592     ;     uart_data_send[9] = '\r';
                    3593                             ; SOURCE LINE # 1162
0067 A3             3594             INC     DPTR
0068 740D           3595             MOV     A,#0DH
006A F0             3596             MOVX    @DPTR,A
                    3597     ;     driver_uart_send_start(9);
                    3598                             ; SOURCE LINE # 1163
006B 7F09           3599             MOV     R7,#09H
006D 120000   F     3600             LCALL   _driver_uart_send_start
                    3601     ;     WaitUs(60000); 
                    3602                             ; SOURCE LINE # 1164
0070 7F60           3603             MOV     R7,#060H
0072 7EEA           3604             MOV     R6,#0EAH
0074 7D00           3605             MOV     R5,#00H
0076 7C00           3606             MOV     R4,#00H
0078 120000   F     3607             LCALL   _WaitUs
                    3608     ; #if 0    
                    3609     ;       while(i){ //
                    3610     ;          // driver_uart_send_start(9);
                    3611     ;        //  WaitUs(60000); 
                    3612     ;        
                    3613     ;               WaitUs(10); 
                    3614     ;         Key_Scan();
                    3615     ;       }
                    3616     ; #endif
                    3617     ; 
                    3618     ; #else
                    3619     ;     PALT1_CLB(BIT(2)); // 衬艽口脚  
                    3620     ; #endif
                    3621     ;     
                    3622     ;     Delay_ms(1);
                    3623                             ; SOURCE LINE # 1179
007B 7F01           3624             MOV     R7,#01H
007D 7E00           3625             MOV     R6,#00H
007F 120000   F     3626             LCALL   _Delay_ms
                    3627     ;     
                    3628     ;     FuncLED_Init();
                    3629                             ; SOURCE LINE # 1181
0082 120000   F     3630             LCALL   FuncLED_Init
                    3631     ;       CurrentGroup_1[0] = Group_ALL;
                    3632                             ; SOURCE LINE # 1182
0085 900000   F     3633             MOV     DPTR,#CurrentGroup_1
0088 74FF           3634             MOV     A,#0FFH
008A F0             3635             MOVX    @DPTR,A
                    3636     ;       Get_MacAddr();
                    3637                             ; SOURCE LINE # 1183
008B 120000   F     3638             LCALL   Get_MacAddr
                    3639     ;       cRemoteIDLETime = 500;
                    3640                             ; SOURCE LINE # 1184
008E 900000   F     3641             MOV     DPTR,#cRemoteIDLETime
0091 7401           3642             MOV     A,#01H
0093 F0             3643             MOVX    @DPTR,A
0094 A3             3644             INC     DPTR
0095 74F4           3645             MOV     A,#0F4H
0097 F0             3646             MOVX    @DPTR,A
                    3647     ;       fen_Duan = 0;  //分段
                    3648                             ; SOURCE LINE # 1185
0098 E4             3649             CLR     A
0099 900000   F     3650             MOV     DPTR,#fen_Duan
009C F0             3651             MOVX    @DPTR,A
                    3652     ;       Set_Common_com_Data();  
                    3653                             ; SOURCE LINE # 1186
009D 020000   F     3654             LJMP    Set_Common_com_Data
                    3655     ; END OF Power_On_Init
                    3656     
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    58

                    3657     ; }
                    3658     ; 
                    3659     ; uint8 single_RF_test=0;
                    3660     ; void main(void)  
                    3661     
----                3662             RSEG  ?PR?main?MAIN
0000                3663     main:
                    3664             USING   0
                    3665                             ; SOURCE LINE # 1190
                    3666     ; {
                    3667                             ; SOURCE LINE # 1191
                    3668     ;       PALT1_INIT();   //PALT1:(0x87):bit[]7:0]=PWM4_IO_EN,PWM3_IO_EN,PWM2_IO_EN,PWM1_IO_E
                             N,PWM0_IO_EN,UART0_IO,SPI_IO,IIC_IO
                    3669                             ; SOURCE LINE # 1192
0000 E4             3670             CLR     A
0001 900000   F     3671             MOV     DPTR,#g_patchPALT1
0004 F0             3672             MOVX    @DPTR,A
0005 F5F7           3673             MOV     PALT1,A
                    3674     ;       mcu_clk_inital();
                    3675                             ; SOURCE LINE # 1193
0007 120000   F     3676             LCALL   mcu_clk_inital
                    3677     ;       gpio_init();
                    3678                             ; SOURCE LINE # 1194
000A 120000   F     3679             LCALL   gpio_init
                    3680     ;     WaitUs(500);
                    3681                             ; SOURCE LINE # 1195
000D 7FF4           3682             MOV     R7,#0F4H
000F 7E01           3683             MOV     R6,#01H
0011 7D00           3684             MOV     R5,#00H
0013 7C00           3685             MOV     R4,#00H
0015 120000   F     3686             LCALL   _WaitUs
                    3687     ;       
                    3688     ;       Power_On_Init();   
                    3689                             ; SOURCE LINE # 1197
0018 120000   F     3690             LCALL   Power_On_Init
001B                3691     ?C0124:
                    3692     ;     
                    3693     ;       while(1)
                    3694                             ; SOURCE LINE # 1199
                    3695     ;       {
                    3696                             ; SOURCE LINE # 1200
                    3697     ;               EX5  = 1;                                                               //R
                             F interrupt
                    3698                             ; SOURCE LINE # 1201
001B D2EB           3699             SETB    EX5
                    3700     ;               if(u10msFlag)
                    3701                             ; SOURCE LINE # 1202
001D 900000   F     3702             MOV     DPTR,#u10msFlag
0020 E0             3703             MOVX    A,@DPTR
0021 6008           3704             JZ      ?C0126
                    3705     ;               {
                    3706                             ; SOURCE LINE # 1203
                    3707     ;             u10msFlag = 0;
                    3708                             ; SOURCE LINE # 1204
0023 E4             3709             CLR     A
0024 F0             3710             MOVX    @DPTR,A
                    3711     ;             Key_Scan();
                    3712                             ; SOURCE LINE # 1205
0025 120000   F     3713             LCALL   Key_Scan
                    3714     ;             Sys_SleepModeCheck();
                    3715                             ; SOURCE LINE # 1206
0028 120000   F     3716             LCALL   Sys_SleepModeCheck
                    3717     ;               }
                    3718                             ; SOURCE LINE # 1207
002B                3719     ?C0126:
                    3720     ;               if(u2msFlag){   //每4ms执行一次
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    59

                    3721                             ; SOURCE LINE # 1208
002B 900000   F     3722             MOV     DPTR,#u2msFlag
002E E0             3723             MOVX    A,@DPTR
002F 6008           3724             JZ      ?C0127
                    3725     ;                       u2msFlag = 0;
                    3726                             ; SOURCE LINE # 1209
0031 E4             3727             CLR     A
0032 F0             3728             MOVX    @DPTR,A
                    3729     ;                       if(adv_flag)
                    3730                             ; SOURCE LINE # 1210
0033 300003   F     3731             JNB     adv_flag,?C0127
                    3732     ;                               TX_CMD_USE_BLE_mode();  //使用BLE模式发码               
                    3733                             ; SOURCE LINE # 1211
0036 120000   F     3734             LCALL   TX_CMD_USE_BLE_mode
                    3735     ;               }
                    3736                             ; SOURCE LINE # 1212
0039                3737     ?C0127:
                    3738     ;               if(u20msFlag){
                    3739                             ; SOURCE LINE # 1213
0039 900000   F     3740             MOV     DPTR,#u20msFlag
003C E0             3741             MOVX    A,@DPTR
003D 6008           3742             JZ      ?C0129
                    3743     ;                       u20msFlag = 0;
                    3744                             ; SOURCE LINE # 1214
003F E4             3745             CLR     A
0040 F0             3746             MOVX    @DPTR,A
                    3747     ;                       if(adv_flag){
                    3748                             ; SOURCE LINE # 1215
0041 300003   F     3749             JNB     adv_flag,?C0129
                    3750     ;                               Ble_Packet_Encode();
                    3751                             ; SOURCE LINE # 1216
0044 120000   F     3752             LCALL   Ble_Packet_Encode
                    3753     ;                       }
                    3754                             ; SOURCE LINE # 1217
                    3755     ;               }
                    3756                             ; SOURCE LINE # 1218
0047                3757     ?C0129:
                    3758     ;               Sys_PowerDown();
                    3759                             ; SOURCE LINE # 1219
0047 120000   F     3760             LCALL   Sys_PowerDown
                    3761     ;               Sys_PowerOn();
                    3762                             ; SOURCE LINE # 1220
004A 120000   F     3763             LCALL   Sys_PowerOn
                    3764     ;               MCU_IDLE();
                    3765                             ; SOURCE LINE # 1221
004D 758601         3766             MOV     PCON2,#01H
                    3767     ;               _nop_();
                    3768                             ; SOURCE LINE # 1222
0050 00             3769             NOP     
                    3770     ;               _nop_();
                    3771                             ; SOURCE LINE # 1223
0051 00             3772             NOP     
                    3773     ;               _nop_();
                    3774                             ; SOURCE LINE # 1224
0052 00             3775             NOP     
                    3776     ;               _nop_();
                    3777                             ; SOURCE LINE # 1225
0053 00             3778             NOP     
                    3779     ;               _nop_();
                    3780                             ; SOURCE LINE # 1226
0054 00             3781             NOP     
                    3782     ;               _nop_();
                    3783                             ; SOURCE LINE # 1227
0055 00             3784             NOP     
                    3785     ;       }
                    3786                             ; SOURCE LINE # 1228
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    60

0056 80C3           3787             SJMP    ?C0124
                    3788     ; END OF main
                    3789     
                    3790             END
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    61

SYMBOL TABLE LISTING
------ ----- -------


N A M E                       T Y P E  V A L U E   ATTRIBUTES

?BI?MAIN . . . . . . . . . .  B SEG    0004H       REL=UNIT
?C0003 . . . . . . . . . . .  C ADDR   0014H   R   SEG=?PR?BLE_PACKET_ENCODE?MAIN
?C0004 . . . . . . . . . . .  C ADDR   003CH   R   SEG=?PR?BLE_PACKET_ENCODE?MAIN
?C0005 . . . . . . . . . . .  C ADDR   0064H   R   SEG=?PR?BLE_PACKET_ENCODE?MAIN
?C0006 . . . . . . . . . . .  C ADDR   008CH   R   SEG=?PR?BLE_PACKET_ENCODE?MAIN
?C0026 . . . . . . . . . . .  C ADDR   002CH   R   SEG=?PR?SYS_SLEEPMODECHECK?MAIN
?C0029 . . . . . . . . . . .  C ADDR   0053H   R   SEG=?PR?SYS_POWERON?MAIN
?C0031 . . . . . . . . . . .  C ADDR   0064H   R   SEG=?PR?SYS_POWERDOWN?MAIN
?C0035 . . . . . . . . . . .  C ADDR   000FH   R   SEG=?PR?KEYP2_SCAN_FUNC?MAIN
?C0036 . . . . . . . . . . .  C ADDR   0031H   R   SEG=?PR?KEYP2_SCAN_FUNC?MAIN
?C0037 . . . . . . . . . . .  C ADDR   001EH   R   SEG=?PR?KEYP2_SCAN_FUNC?MAIN
?C0038 . . . . . . . . . . .  C ADDR   0025H   R   SEG=?PR?KEYP2_SCAN_FUNC?MAIN
?C0039 . . . . . . . . . . .  C ADDR   002CH   R   SEG=?PR?KEYP2_SCAN_FUNC?MAIN
?C0046 . . . . . . . . . . .  C ADDR   0031H   R   SEG=?PR?_KEY_SCAN_FUNC?MAIN
?C0047 . . . . . . . . . . .  C ADDR   001FH   R   SEG=?PR?_KEY_SCAN_FUNC?MAIN
?C0048 . . . . . . . . . . .  C ADDR   0033H   R   SEG=?PR?_KEY_SCAN_FUNC?MAIN
?C0049 . . . . . . . . . . .  C ADDR   0025H   R   SEG=?PR?_KEY_SCAN_FUNC?MAIN
?C0050 . . . . . . . . . . .  C ADDR   002BH   R   SEG=?PR?_KEY_SCAN_FUNC?MAIN
?C0052 . . . . . . . . . . .  C ADDR   0014H   R   SEG=?PR?KEY24_DETECT_GPIO?MAIN
?C0053 . . . . . . . . . . .  C ADDR   00ACH   R   SEG=?PR?KEY24_DETECT_GPIO?MAIN
?C0054 . . . . . . . . . . .  C ADDR   0033H   R   SEG=?PR?KEY24_DETECT_GPIO?MAIN
?C0055 . . . . . . . . . . .  C ADDR   004AH   R   SEG=?PR?KEY24_DETECT_GPIO?MAIN
?C0056 . . . . . . . . . . .  C ADDR   0069H   R   SEG=?PR?KEY24_DETECT_GPIO?MAIN
?C0057 . . . . . . . . . . .  C ADDR   0088H   R   SEG=?PR?KEY24_DETECT_GPIO?MAIN
?C0058 . . . . . . . . . . .  C ADDR   00A7H   R   SEG=?PR?KEY24_DETECT_GPIO?MAIN
?C0059 . . . . . . . . . . .  C ADDR   0007H   R   SEG=?PR?CALC_CRC_VALUE?MAIN
?C0060 . . . . . . . . . . .  C ADDR   0021H   R   SEG=?PR?CALC_CRC_VALUE?MAIN
?C0088 . . . . . . . . . . .  C ADDR   000BH   R   SEG=?PR?_LONGKEY_INDENTIFY?MAIN
?C0089 . . . . . . . . . . .  C ADDR   0028H   R   SEG=?PR?_LONGKEY_INDENTIFY?MAIN
?C0090 . . . . . . . . . . .  C ADDR   0014H   R   SEG=?PR?_LONGKEY_INDENTIFY?MAIN
?C0091 . . . . . . . . . . .  C ADDR   001FH   R   SEG=?PR?_LONGKEY_INDENTIFY?MAIN
?C0092 . . . . . . . . . . .  C ADDR   0028H   R   SEG=?PR?_LONGKEY_INDENTIFY?MAIN
?C0097 . . . . . . . . . . .  C ADDR   009BH   R   SEG=?PR?KEY_SCAN?MAIN
?C0099 . . . . . . . . . . .  C ADDR   0054H   R   SEG=?PR?KEY_SCAN?MAIN
?C0100 . . . . . . . . . . .  C ADDR   0049H   R   SEG=?PR?KEY_SCAN?MAIN
?C0102 . . . . . . . . . . .  C ADDR   0096H   R   SEG=?PR?KEY_SCAN?MAIN
?C0106 . . . . . . . . . . .  C ADDR   00A7H   R   SEG=?PR?KEY_SCAN?MAIN
?C0107 . . . . . . . . . . .  C ADDR   00C4H   R   SEG=?PR?KEY_SCAN?MAIN
?C0109 . . . . . . . . . . .  C ADDR   00C8H   R   SEG=?PR?KEY_SCAN?MAIN
?C0110 . . . . . . . . . . .  C ADDR   0023H   R   SEG=?PR?TX_CMD_USE_BLE_MODE?MAIN
?C0111 . . . . . . . . . . .  C ADDR   0065H   R   SEG=?PR?TX_CMD_USE_BLE_MODE?MAIN
?C0112 . . . . . . . . . . .  C ADDR   005DH   R   SEG=?PR?TX_CMD_USE_BLE_MODE?MAIN
?C0114 . . . . . . . . . . .  C ADDR   00A4H   R   SEG=?PR?TX_CMD_USE_BLE_MODE?MAIN
?C0115 . . . . . . . . . . .  C ADDR   009CH   R   SEG=?PR?TX_CMD_USE_BLE_MODE?MAIN
?C0118 . . . . . . . . . . .  C ADDR   00DBH   R   SEG=?PR?TX_CMD_USE_BLE_MODE?MAIN
?C0120 . . . . . . . . . . .  C ADDR   00E3H   R   SEG=?PR?TX_CMD_USE_BLE_MODE?MAIN
?C0124 . . . . . . . . . . .  C ADDR   001BH   R   SEG=?PR?MAIN?MAIN
?C0126 . . . . . . . . . . .  C ADDR   002BH   R   SEG=?PR?MAIN?MAIN
?C0127 . . . . . . . . . . .  C ADDR   0039H   R   SEG=?PR?MAIN?MAIN
?C0129 . . . . . . . . . . .  C ADDR   0047H   R   SEG=?PR?MAIN?MAIN
?C0132 . . . . . . . . . . .  C ADDR   0011H   R   SEG=?PR?SYS_SLEEPMODECHECK?MAIN
?C0133 . . . . . . . . . . .  C ADDR   0045H   R   SEG=?PR?KEY24_DETECT_GPIO?MAIN
?C0134 . . . . . . . . . . .  C ADDR   00A7H   R   SEG=?PR?KEY24_DETECT_GPIO?MAIN
?C0135 . . . . . . . . . . .  C ADDR   007EH   R   SEG=?PR?KEY_SCAN?MAIN
?C0136 . . . . . . . . . . .  C ADDR   00C4H   R   SEG=?PR?KEY_SCAN?MAIN
?C?COPY. . . . . . . . . . .  C ADDR   -----       EXT
?C?ICALL . . . . . . . . . .  C ADDR   -----       EXT
?CO?MAIN . . . . . . . . . .  C SEG    016EH       REL=UNIT
?C_INITSEG . . . . . . . . .  C SEG    0057H       REL=UNIT
?C_STARTUP . . . . . . . . .  C ADDR   -----       EXT
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    62

?KEY24_DETECT_GPIO?BYTE. . .  X ADDR   0000H   R   SEG=?XD?KEY24_DETECT_GPIO?MAIN
?KEY_SCAN?BYTE . . . . . . .  X ADDR   0000H   R   SEG=?XD?KEY_SCAN?MAIN
?POWER_ON_INIT?BYTE. . . . .  X ADDR   0000H   R   SEG=?XD?POWER_ON_INIT?MAIN
?PR?BLE_PACKET_ENCODE?MAIN .  C SEG    008DH       REL=UNIT
?PR?CALC_CRC_VALUE?MAIN. . .  C SEG    0022H       REL=UNIT
?PR?CLOSE_FUNCLED?MAIN . . .  C SEG    0001H       REL=UNIT
?PR?FUNCLED_INIT?MAIN. . . .  C SEG    0001H       REL=UNIT
?PR?GET_MACADDR?MAIN . . . .  C SEG    0019H       REL=UNIT
?PR?GPIO_INIT?MAIN . . . . .  C SEG    0018H       REL=UNIT
?PR?KEY24_DETECT_GPIO?MAIN .  C SEG    00ADH       REL=UNIT
?PR?KEYP2_SCAN_FUNC?MAIN . .  C SEG    0038H       REL=UNIT
?PR?KEY_SCAN?MAIN. . . . . .  C SEG    00C9H       REL=UNIT
?PR?LONGKEY_COLOR?MAIN . . .  C SEG    0009H       REL=UNIT
?PR?LONGKEY_E?MAIN . . . . .  C SEG    0009H       REL=UNIT
?PR?LONGKEY_POWEROFF?MAIN. .  C SEG    001EH       REL=UNIT
?PR?LONGKEY_POWERON?MAIN . .  C SEG    0009H       REL=UNIT
?PR?MAIN?MAIN. . . . . . . .  C SEG    0058H       REL=UNIT
?PR?MCU_CLK_INITAL?MAIN. . .  C SEG    000AH       REL=UNIT
?PR?MCU_IO_SLEEP?MAIN. . . .  C SEG    0036H       REL=UNIT
?PR?OPEN_FUNCLED?MAIN. . . .  C SEG    0001H       REL=UNIT
?PR?POWER_ON_INIT?MAIN . . .  C SEG    00A0H       REL=UNIT
?PR?SET_COMMON_COM_DATA?MAIN  C SEG    0027H       REL=UNIT
?PR?SET_COMMON_TX_DATA?MAIN.  C SEG    0020H       REL=UNIT
?PR?SET_MACADDR?MAIN . . . .  C SEG    0032H       REL=UNIT
?PR?SHORTKEY_BLUE?MAIN . . .  C SEG    0009H       REL=UNIT
?PR?SHORTKEY_B_ADD?MAIN. . .  C SEG    0009H       REL=UNIT
?PR?SHORTKEY_B_SUB?MAIN. . .  C SEG    0009H       REL=UNIT
?PR?SHORTKEY_COLOR?MAIN. . .  C SEG    0009H       REL=UNIT
?PR?SHORTKEY_E?MAIN. . . . .  C SEG    0009H       REL=UNIT
?PR?SHORTKEY_GREEN?MAIN. . .  C SEG    0009H       REL=UNIT
?PR?SHORTKEY_M1?MAIN . . . .  C SEG    0009H       REL=UNIT
?PR?SHORTKEY_M2?MAIN . . . .  C SEG    0009H       REL=UNIT
?PR?SHORTKEY_M3?MAIN . . . .  C SEG    0009H       REL=UNIT
?PR?SHORTKEY_M4?MAIN . . . .  C SEG    0009H       REL=UNIT
?PR?SHORTKEY_M5?MAIN . . . .  C SEG    0009H       REL=UNIT
?PR?SHORTKEY_M6?MAIN . . . .  C SEG    0009H       REL=UNIT
?PR?SHORTKEY_M7?MAIN . . . .  C SEG    0009H       REL=UNIT
?PR?SHORTKEY_M8?MAIN . . . .  C SEG    0009H       REL=UNIT
?PR?SHORTKEY_M9?MAIN . . . .  C SEG    0009H       REL=UNIT
?PR?SHORTKEY_POWEROFF?MAIN .  C SEG    001EH       REL=UNIT
?PR?SHORTKEY_POWERON?MAIN. .  C SEG    001DH       REL=UNIT
?PR?SHORTKEY_RED?MAIN. . . .  C SEG    0009H       REL=UNIT
?PR?SHORTKEY_SCALE?MAIN. . .  C SEG    0009H       REL=UNIT
?PR?SHORTKEY_S_ADD?MAIN. . .  C SEG    0009H       REL=UNIT
?PR?SHORTKEY_S_SUB?MAIN. . .  C SEG    0009H       REL=UNIT
?PR?SHORTKEY_WHITE?MAIN. . .  C SEG    0009H       REL=UNIT
?PR?SHORTKEY_YELLOW?MAIN . .  C SEG    0009H       REL=UNIT
?PR?SYS_POWERDOWN?MAIN . . .  C SEG    0065H       REL=UNIT
?PR?SYS_POWERON?MAIN . . . .  C SEG    0054H       REL=UNIT
?PR?SYS_SLEEPMODECHECK?MAIN.  C SEG    002DH       REL=UNIT
?PR?TX_CMD_USE_BLE_MODE?MAIN  C SEG    00E4H       REL=UNIT
?PR?_KEY_SCAN_FUNC?MAIN. . .  C SEG    0034H       REL=UNIT
?PR?_LONGKEY_INDENTIFY?MAIN.  C SEG    0029H       REL=UNIT
?SC_0. . . . . . . . . . . .  C ADDR   0000H   R   SEG=?CO?MAIN
?SC_100. . . . . . . . . . .  C ADDR   0064H   R   SEG=?CO?MAIN
?SC_110. . . . . . . . . . .  C ADDR   006EH   R   SEG=?CO?MAIN
?SC_119. . . . . . . . . . .  C ADDR   0077H   R   SEG=?CO?MAIN
?SC_129. . . . . . . . . . .  C ADDR   0081H   R   SEG=?CO?MAIN
?SC_136. . . . . . . . . . .  C ADDR   0088H   R   SEG=?CO?MAIN
?SC_143. . . . . . . . . . .  C ADDR   008FH   R   SEG=?CO?MAIN
?SC_15 . . . . . . . . . . .  C ADDR   000FH   R   SEG=?CO?MAIN
?SC_150. . . . . . . . . . .  C ADDR   0096H   R   SEG=?CO?MAIN
?SC_157. . . . . . . . . . .  C ADDR   009DH   R   SEG=?CO?MAIN
?SC_164. . . . . . . . . . .  C ADDR   00A4H   R   SEG=?CO?MAIN
?SC_171. . . . . . . . . . .  C ADDR   00ABH   R   SEG=?CO?MAIN
?SC_178. . . . . . . . . . .  C ADDR   00B2H   R   SEG=?CO?MAIN
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    63

?SC_185. . . . . . . . . . .  C ADDR   00B9H   R   SEG=?CO?MAIN
?SC_192. . . . . . . . . . .  C ADDR   00C0H   R   SEG=?CO?MAIN
?SC_202. . . . . . . . . . .  C ADDR   00CAH   R   SEG=?CO?MAIN
?SC_21 . . . . . . . . . . .  C ADDR   0015H   R   SEG=?CO?MAIN
?SC_213. . . . . . . . . . .  C ADDR   00D5H   R   SEG=?CO?MAIN
?SC_220. . . . . . . . . . .  C ADDR   00DCH   R   SEG=?CO?MAIN
?SC_228. . . . . . . . . . .  C ADDR   00E4H   R   SEG=?CO?MAIN
?SC_31 . . . . . . . . . . .  C ADDR   001FH   R   SEG=?CO?MAIN
?SC_41 . . . . . . . . . . .  C ADDR   0029H   R   SEG=?CO?MAIN
?SC_51 . . . . . . . . . . .  C ADDR   0033H   R   SEG=?CO?MAIN
?SC_59 . . . . . . . . . . .  C ADDR   003BH   R   SEG=?CO?MAIN
?SC_69 . . . . . . . . . . .  C ADDR   0045H   R   SEG=?CO?MAIN
?SC_7. . . . . . . . . . . .  C ADDR   0007H   R   SEG=?CO?MAIN
?SC_80 . . . . . . . . . . .  C ADDR   0050H   R   SEG=?CO?MAIN
?SC_90 . . . . . . . . . . .  C ADDR   005AH   R   SEG=?CO?MAIN
?XD?KEY24_DETECT_GPIO?MAIN .  X SEG    0001H       REL=UNIT
?XD?KEY_SCAN?MAIN. . . . . .  X SEG    0001H       REL=UNIT
?XD?MAIN . . . . . . . . . .  X SEG    00D6H       REL=UNIT
?XD?POWER_ON_INIT?MAIN . . .  X SEG    0001H       REL=UNIT
?_BLEPACKETDEDUCTIVE?BYTE. .  X ADDR   -----       EXT
?_BLEPACKETENCODE?BYTE . . .  X ADDR   -----       EXT
AC . . . . . . . . . . . . .  B ADDR   00D0H.6 A   
ACC. . . . . . . . . . . . .  D ADDR   00E0H   A   
ADVPACKET_2. . . . . . . . .  X ADDR   0002H   R   SEG=?XD?MAIN
ADV_FLAG . . . . . . . . . .  B ADDR   -----       EXT
ADV_FLAG_COUNT . . . . . . .  X ADDR   -----       EXT
AIE. . . . . . . . . . . . .  D ADDR   00E8H   A   
AIF. . . . . . . . . . . . .  D ADDR   00C0H   A   
AIP. . . . . . . . . . . . .  D ADDR   00F8H   A   
AR6. . . . . . . . . . . . .  D ADDR   0006H   A   
AR7. . . . . . . . . . . . .  D ADDR   0007H   A   
ASADDR . . . . . . . . . . .  D ADDR   00BAH   A   
ASADEN . . . . . . . . . . .  D ADDR   00BBH   A   
ASBUF. . . . . . . . . . . .  D ADDR   00BDH   A   
ASCON. . . . . . . . . . . .  D ADDR   00BCH   A   
B. . . . . . . . . . . . . .  D ADDR   00F0H   A   
BLE_PACKETBUF. . . . . . . .  X ADDR   0027H   R   SEG=?XD?MAIN
BLE_PACKETLEN. . . . . . . .  X ADDR   0049H   R   SEG=?XD?MAIN
BLE_PACKET_ENCODE. . . . . .  C ADDR   0000H   R   SEG=?PR?BLE_PACKET_ENCODE?MAIN
BPOWERDN . . . . . . . . . .  B ADDR   -----       EXT
CALC_CRC_VALUE . . . . . . .  C ADDR   0000H   R   SEG=?PR?CALC_CRC_VALUE?MAIN
CCMCON . . . . . . . . . . .  D ADDR   008EH   A   
CCMVAL . . . . . . . . . . .  D ADDR   008FH   A   
CKCON. . . . . . . . . . . .  D ADDR   0084H   A   
CLK_EN_CFG . . . . . . . . .  D ADDR   0085H   A   
CLK_EN_CFG_TEMP. . . . . . .  D ADDR   -----       EXT
CLOSE_FUNCLED. . . . . . . .  C ADDR   0000H   R   SEG=?PR?CLOSE_FUNCLED?MAIN
CLOSE_UART . . . . . . . . .  C ADDR   -----       EXT
CP_RL2 . . . . . . . . . . .  B ADDR   00C8H.0 A   
CREMOTEIDLETIME. . . . . . .  X ADDR   -----       EXT
CURRENTGROUP_1 . . . . . . .  X ADDR   0001H   R   SEG=?XD?MAIN
CY . . . . . . . . . . . . .  B ADDR   00D0H.7 A   
C_T2 . . . . . . . . . . . .  B ADDR   00C8H.1 A   
DPH. . . . . . . . . . . . .  D ADDR   0083H   A   
DPL. . . . . . . . . . . . .  D ADDR   0082H   A   
DPSEL. . . . . . . . . . . .  D ADDR   0092H   A   
EA . . . . . . . . . . . . .  B ADDR   00A8H.7 A   
ES0. . . . . . . . . . . . .  B ADDR   00A8H.4 A   
ES1. . . . . . . . . . . . .  B ADDR   00A8H.6 A   
ET0. . . . . . . . . . . . .  B ADDR   00A8H.1 A   
ET1. . . . . . . . . . . . .  B ADDR   00A8H.3 A   
ET2. . . . . . . . . . . . .  B ADDR   00A8H.5 A   
EX0. . . . . . . . . . . . .  B ADDR   00A8H.0 A   
EX1. . . . . . . . . . . . .  B ADDR   00A8H.2 A   
EX2. . . . . . . . . . . . .  B ADDR   00E8H.0 A   
EX3. . . . . . . . . . . . .  B ADDR   00E8H.1 A   
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    64

EX4. . . . . . . . . . . . .  B ADDR   00E8H.2 A   
EX5. . . . . . . . . . . . .  B ADDR   00E8H.3 A   
EX6. . . . . . . . . . . . .  B ADDR   00E8H.4 A   
EX7. . . . . . . . . . . . .  B ADDR   00E8H.5 A   
EX8. . . . . . . . . . . . .  B ADDR   00E8H.6 A   
EX9. . . . . . . . . . . . .  B ADDR   00E8H.7 A   
EXEN2. . . . . . . . . . . .  B ADDR   00C8H.3 A   
EXF2 . . . . . . . . . . . .  B ADDR   00C8H.6 A   
EXSLEEP. . . . . . . . . . .  D ADDR   00EAH   A   
F0 . . . . . . . . . . . . .  B ADDR   00D0H.5 A   
FEN_DUAN . . . . . . . . . .  X ADDR   0024H   R   SEG=?XD?MAIN
FL . . . . . . . . . . . . .  B ADDR   00D0H.1 A   
FUNCLED_INIT . . . . . . . .  C ADDR   0000H   R   SEG=?PR?FUNCLED_INIT?MAIN
GET_MACADDR. . . . . . . . .  C ADDR   0000H   R   SEG=?PR?GET_MACADDR?MAIN
GPIO_INIT. . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?GPIO_INIT?MAIN
G_PATCHPALT1 . . . . . . . .  X ADDR   -----       EXT
I2CM_CALLADDR0 . . . . . . .  D ADDR   00D4H   A   
I2CM_CTRL. . . . . . . . . .  D ADDR   00E1H   A   
I2CM_DATA_IE . . . . . . . .  D ADDR   00D2H   A   
I2CM_DATA_STS. . . . . . . .  D ADDR   00E6H   A   
I2CM_PRESC . . . . . . . . .  D ADDR   00E4H   A   
I2CM_RXDATA. . . . . . . . .  D ADDR   00E2H   A   
I2CM_TXDATA. . . . . . . . .  D ADDR   00E3H   A   
I2CM_TXRX_IE . . . . . . . .  D ADDR   00E7H   A   
I2CM_TXRX_STS. . . . . . . .  D ADDR   00E5H   A   
I2CS_CTRL. . . . . . . . . .  D ADDR   00F1H   A   
I2CS_DATA_IE . . . . . . . .  D ADDR   00D5H   A   
I2CS_DATA_STS. . . . . . . .  D ADDR   00F6H   A   
I2CS_PRESC . . . . . . . . .  D ADDR   00F4H   A   
I2CS_RXDATA. . . . . . . . .  D ADDR   00F2H   A   
I2CS_SELFADDR0 . . . . . . .  D ADDR   00D7H   A   
I2CS_TXDATA. . . . . . . . .  D ADDR   00F3H   A   
I2CS_TXRX_IE . . . . . . . .  D ADDR   00D6H   A   
I2CS_TXRX_STS. . . . . . . .  D ADDR   00F5H   A   
I?4847 . . . . . . . . . . .  X ADDR   0000H   R   SEG=?XD?POWER_ON_INIT?MAIN
IE . . . . . . . . . . . . .  D ADDR   00A8H   A   
IE0. . . . . . . . . . . . .  B ADDR   0088H.1 A   
IE1. . . . . . . . . . . . .  B ADDR   0088H.3 A   
INITSYSTIMER . . . . . . . .  C ADDR   -----       EXT
INKEY?4446 . . . . . . . . .  X ADDR   0000H   R   SEG=?XD?KEY_SCAN?MAIN
INT0 . . . . . . . . . . . .  B ADDR   00B0H.2 A   
INT1 . . . . . . . . . . . .  B ADDR   00B0H.3 A   
INT2 . . . . . . . . . . . .  B ADDR   0090H.4 A   
INT3 . . . . . . . . . . . .  B ADDR   0090H.5 A   
INT4 . . . . . . . . . . . .  B ADDR   0090H.6 A   
INT5 . . . . . . . . . . . .  B ADDR   0090H.7 A   
INT_ADC. . . . . . . . . . .  B ADDR   00C0H.6 A   
INT_AES. . . . . . . . . . .  B ADDR   00C0H.7 A   
INT_EXT. . . . . . . . . . .  B ADDR   00C0H.4 A   
INT_LBD. . . . . . . . . . .  B ADDR   00C0H.1 A   
INT_PCA. . . . . . . . . . .  B ADDR   00C0H.5 A   
INT_SPI. . . . . . . . . . .  B ADDR   00C0H.0 A   
INT_USB. . . . . . . . . . .  B ADDR   00C0H.2 A   
INT_XVR. . . . . . . . . . .  B ADDR   00C0H.3 A   
IP . . . . . . . . . . . . .  D ADDR   00B8H   A   
IT0. . . . . . . . . . . . .  B ADDR   0088H.0 A   
IT1. . . . . . . . . . . . .  B ADDR   0088H.2 A   
KEY24_DETECT_GPIO. . . . . .  C ADDR   0000H   R   SEG=?PR?KEY24_DETECT_GPIO?MAIN
KEY24_TBL. . . . . . . . . .  C ADDR   00FAH   R   SEG=?CO?MAIN
KEYCODE. . . . . . . . . . .  X ADDR   0025H   R   SEG=?XD?MAIN
KEYCODE1 . . . . . . . . . .  X ADDR   00D1H   R   SEG=?XD?MAIN
KEYCOUNT . . . . . . . . . .  X ADDR   004AH   R   SEG=?XD?MAIN
KEYP2_SCAN_FUNC. . . . . . .  C ADDR   0000H   R   SEG=?PR?KEYP2_SCAN_FUNC?MAIN
KEY_R0 . . . . . . . . . . .  B ADDR   00B0H.3 A   
KEY_R1 . . . . . . . . . . .  B ADDR   00B0H.2 A   
KEY_R2 . . . . . . . . . . .  B ADDR   00B0H.1 A   
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    65

KEY_R3 . . . . . . . . . . .  B ADDR   00B0H.0 A   
KEY_S0 . . . . . . . . . . .  B ADDR   00A0H.7 A   
KEY_S1 . . . . . . . . . . .  B ADDR   00A0H.6 A   
KEY_S2 . . . . . . . . . . .  B ADDR   00A0H.4 A   
KEY_S3 . . . . . . . . . . .  B ADDR   00A0H.0 A   
KEY_SCAN . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?KEY_SCAN?MAIN
KEY_TBL. . . . . . . . . . .  C ADDR   00E9H   R   SEG=?CO?MAIN
KEY_VALUE?1242 . . . . . . .  X ADDR   0000H   R   SEG=?XD?KEY24_DETECT_GPIO?MAIN
LONGCOUNT_SCALE. . . . . . .  X ADDR   0026H   R   SEG=?XD?MAIN
LONGKEY_COLOR. . . . . . . .  C ADDR   0000H   R   SEG=?PR?LONGKEY_COLOR?MAIN
LONGKEY_E. . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?LONGKEY_E?MAIN
LONGKEY_POWEROFF . . . . . .  C ADDR   0000H   R   SEG=?PR?LONGKEY_POWEROFF?MAIN
LONGKEY_POWERON. . . . . . .  C ADDR   0000H   R   SEG=?PR?LONGKEY_POWERON?MAIN
LONG_KEY_VALUE_TEMP. . . . .  X ADDR   00D5H   R   SEG=?XD?MAIN
LONG_KEY_VALUE_TEMPP . . . .  X ADDR   00D3H   R   SEG=?XD?MAIN
MAIN . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?MAIN?MAIN
MCU_CLK_INITAL . . . . . . .  C ADDR   0000H   R   SEG=?PR?MCU_CLK_INITAL?MAIN
MCU_IO_SLEEP . . . . . . . .  C ADDR   0000H   R   SEG=?PR?MCU_IO_SLEEP?MAIN
MD0. . . . . . . . . . . . .  D ADDR   00C1H   A   
MD1. . . . . . . . . . . . .  D ADDR   00C2H   A   
MD2. . . . . . . . . . . . .  D ADDR   00C3H   A   
MD3. . . . . . . . . . . . .  D ADDR   00C4H   A   
MD4. . . . . . . . . . . . .  D ADDR   00C5H   A   
MD5. . . . . . . . . . . . .  D ADDR   00C6H   A   
MDCTL. . . . . . . . . . . .  D ADDR   00C7H   A   
MMS. . . . . . . . . . . . .  D ADDR   0097H   A   
MPAGE. . . . . . . . . . . .  D ADDR   00A1H   A   
NMI_EN . . . . . . . . . . .  D ADDR   00C9H   A   
OPEN_FUNCLED . . . . . . . .  C ADDR   0000H   R   SEG=?PR?OPEN_FUNCLED?MAIN
OV . . . . . . . . . . . . .  B ADDR   00D0H.2 A   
P. . . . . . . . . . . . . .  B ADDR   00D0H.0 A   
P0 . . . . . . . . . . . . .  D ADDR   0080H   A   
P00. . . . . . . . . . . . .  B ADDR   0080H.0 A   
P01. . . . . . . . . . . . .  B ADDR   0080H.1 A   
P02. . . . . . . . . . . . .  B ADDR   0080H.2 A   
P03. . . . . . . . . . . . .  B ADDR   0080H.3 A   
P04. . . . . . . . . . . . .  B ADDR   0080H.4 A   
P05. . . . . . . . . . . . .  B ADDR   0080H.5 A   
P06. . . . . . . . . . . . .  B ADDR   0080H.6 A   
P07. . . . . . . . . . . . .  B ADDR   0080H.7 A   
P0IN_EN. . . . . . . . . . .  D ADDR   0091H   A   
P0OUT_EN . . . . . . . . . .  D ADDR   009AH   A   
P0_OPDR. . . . . . . . . . .  D ADDR   00D8H   A   
P0_PD. . . . . . . . . . . .  D ADDR   00AEH   A   
P0_PU. . . . . . . . . . . .  D ADDR   00A9H   A   
P0_WUEN. . . . . . . . . . .  D ADDR   00EBH   A   
P0_WUMOD . . . . . . . . . .  D ADDR   00F9H   A   
P1 . . . . . . . . . . . . .  D ADDR   0090H   A   
P10. . . . . . . . . . . . .  B ADDR   0090H.0 A   
P11. . . . . . . . . . . . .  B ADDR   0090H.1 A   
P12. . . . . . . . . . . . .  B ADDR   0090H.2 A   
P13. . . . . . . . . . . . .  B ADDR   0090H.3 A   
P14. . . . . . . . . . . . .  B ADDR   0090H.4 A   
P15. . . . . . . . . . . . .  B ADDR   0090H.5 A   
P16. . . . . . . . . . . . .  B ADDR   0090H.6 A   
P17. . . . . . . . . . . . .  B ADDR   0090H.7 A   
P1IN_EN. . . . . . . . . . .  D ADDR   0093H   A   
P1OUT_EN . . . . . . . . . .  D ADDR   009EH   A   
P1_OPDR. . . . . . . . . . .  D ADDR   00D9H   A   
P1_PD. . . . . . . . . . . .  D ADDR   00AFH   A   
P1_PU. . . . . . . . . . . .  D ADDR   00AAH   A   
P1_WUEN. . . . . . . . . . .  D ADDR   00ECH   A   
P1_WUMOD . . . . . . . . . .  D ADDR   00FAH   A   
P2 . . . . . . . . . . . . .  D ADDR   00A0H   A   
P20. . . . . . . . . . . . .  B ADDR   00A0H.0 A   
P21. . . . . . . . . . . . .  B ADDR   00A0H.1 A   
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    66

P22. . . . . . . . . . . . .  B ADDR   00A0H.2 A   
P23. . . . . . . . . . . . .  B ADDR   00A0H.3 A   
P24. . . . . . . . . . . . .  B ADDR   00A0H.4 A   
P25. . . . . . . . . . . . .  B ADDR   00A0H.5 A   
P26. . . . . . . . . . . . .  B ADDR   00A0H.6 A   
P27. . . . . . . . . . . . .  B ADDR   00A0H.7 A   
P2IN_EN. . . . . . . . . . .  D ADDR   0094H   A   
P2OUT_EN . . . . . . . . . .  D ADDR   009FH   A   
P2_OPDR. . . . . . . . . . .  D ADDR   00DAH   A   
P2_PD. . . . . . . . . . . .  D ADDR   00B4H   A   
P2_PU. . . . . . . . . . . .  D ADDR   00ABH   A   
P2_WUEN. . . . . . . . . . .  D ADDR   00EDH   A   
P2_WUMOD . . . . . . . . . .  D ADDR   00FBH   A   
P3 . . . . . . . . . . . . .  D ADDR   00B0H   A   
P30. . . . . . . . . . . . .  B ADDR   00B0H.0 A   
P31. . . . . . . . . . . . .  B ADDR   00B0H.1 A   
P32. . . . . . . . . . . . .  B ADDR   00B0H.2 A   
P33. . . . . . . . . . . . .  B ADDR   00B0H.3 A   
P34. . . . . . . . . . . . .  B ADDR   00B0H.4 A   
P35. . . . . . . . . . . . .  B ADDR   00B0H.5 A   
P36. . . . . . . . . . . . .  B ADDR   00B0H.6 A   
P37. . . . . . . . . . . . .  B ADDR   00B0H.7 A   
P3IN_EN. . . . . . . . . . .  D ADDR   0095H   A   
P3OUT_EN . . . . . . . . . .  D ADDR   00A5H   A   
P3_OPDR. . . . . . . . . . .  D ADDR   00DBH   A   
P3_PD. . . . . . . . . . . .  D ADDR   00B5H   A   
P3_PU. . . . . . . . . . . .  D ADDR   00ACH   A   
P3_WUEN. . . . . . . . . . .  D ADDR   00EEH   A   
P3_WUMOD . . . . . . . . . .  D ADDR   00FCH   A   
P4 . . . . . . . . . . . . .  D ADDR   00B7H   A   
P4IN_EN. . . . . . . . . . .  D ADDR   0096H   A   
P4OUT_EN . . . . . . . . . .  D ADDR   00A7H   A   
P4_OPDR. . . . . . . . . . .  D ADDR   00DCH   A   
P4_PD. . . . . . . . . . . .  D ADDR   00B6H   A   
P4_PU. . . . . . . . . . . .  D ADDR   00ADH   A   
P4_WUEN. . . . . . . . . . .  D ADDR   00EFH   A   
P4_WUMOD . . . . . . . . . .  D ADDR   00FDH   A   
PAGE_A . . . . . . . . . . .  D ADDR   009BH   A   
PAGE_B . . . . . . . . . . .  D ADDR   009CH   A   
PAGE_C . . . . . . . . . . .  D ADDR   009DH   A   
PALT0. . . . . . . . . . . .  D ADDR   00E9H   A   
PALT1. . . . . . . . . . . .  D ADDR   00F7H   A   
PAYLOAD_DEMO . . . . . . . .  X ADDR   00B1H   R   SEG=?XD?MAIN
PCON . . . . . . . . . . . .  D ADDR   0087H   A   
PCON2. . . . . . . . . . . .  D ADDR   0086H   A   
POWERDOWN_RF . . . . . . . .  C ADDR   -----       EXT
POWERUP_RF . . . . . . . . .  C ADDR   -----       EXT
POWER_ON . . . . . . . . . .  B ADDR   -----       EXT
POWER_ON_INIT. . . . . . . .  C ADDR   0000H   R   SEG=?PR?POWER_ON_INIT?MAIN
PSW. . . . . . . . . . . . .  D ADDR   00D0H   A   
PWM0_C . . . . . . . . . . .  D ADDR   00A2H   A   
PWM0_DCLSB . . . . . . . . .  D ADDR   00A3H   A   
PWM0_DCMSB . . . . . . . . .  D ADDR   00A4H   A   
PWM0_RESOL . . . . . . . . .  D ADDR   00CEH   A   
PWM1_C . . . . . . . . . . .  D ADDR   00DDH   A   
PWM1_DCLSB . . . . . . . . .  D ADDR   00DEH   A   
PWM1_DCMSB . . . . . . . . .  D ADDR   00DFH   A   
PWM1_RESOL . . . . . . . . .  D ADDR   00CFH   A   
RB8. . . . . . . . . . . . .  B ADDR   0098H.2 A   
RCAP2H . . . . . . . . . . .  D ADDR   00CBH   A   
RCAP2L . . . . . . . . . . .  D ADDR   00CAH   A   
RCLK . . . . . . . . . . . .  B ADDR   00C8H.5 A   
RD . . . . . . . . . . . . .  B ADDR   00B0H.7 A   
REN. . . . . . . . . . . . .  B ADDR   0098H.4 A   
RF_ENCODE_37 . . . . . . . .  B ADDR   0000H.1 R   SEG=?BI?MAIN
RF_ENCODE_38 . . . . . . . .  B ADDR   0000H.2 R   SEG=?BI?MAIN
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    67

RF_ENCODE_39 . . . . . . . .  B ADDR   0000H.3 R   SEG=?BI?MAIN
RF_ENCODE_STATE. . . . . . .  X ADDR   0048H   R   SEG=?XD?MAIN
RF_TXBUF_CH37. . . . . . . .  X ADDR   0050H   R   SEG=?XD?MAIN
RF_TXBUF_CH38. . . . . . . .  X ADDR   0070H   R   SEG=?XD?MAIN
RF_TXBUF_CH39. . . . . . . .  X ADDR   0090H   R   SEG=?XD?MAIN
RF_TXFLAG. . . . . . . . . .  X ADDR   -----       EXT
RF_TXLEN_CH3789. . . . . . .  X ADDR   0047H   R   SEG=?XD?MAIN
RGB_STATIC_DYNAMIC . . . . .  X ADDR   00D4H   R   SEG=?XD?MAIN
RI . . . . . . . . . . . . .  B ADDR   0098H.0 A   
RS0. . . . . . . . . . . . .  B ADDR   00D0H.3 A   
RS1. . . . . . . . . . . . .  B ADDR   00D0H.4 A   
RXD0 . . . . . . . . . . . .  B ADDR   00B0H.0 A   
RXD1 . . . . . . . . . . . .  B ADDR   0090H.2 A   
SBUF0. . . . . . . . . . . .  D ADDR   0099H   A   
SCON0. . . . . . . . . . . .  D ADDR   0098H   A   
SEQUENCENUM_1. . . . . . . .  X ADDR   0000H   R   SEG=?XD?MAIN
SEQUENCENUM_INC_1. . . . . .  X ADDR   0022H   R   SEG=?XD?MAIN
SET_COMMON_COM_DATA. . . . .  C ADDR   0000H   R   SEG=?PR?SET_COMMON_COM_DATA?MAIN
SET_COMMON_TX_DATA . . . . .  C ADDR   0000H   R   SEG=?PR?SET_COMMON_TX_DATA?MAIN
SET_MACADDR. . . . . . . . .  C ADDR   0000H   R   SEG=?PR?SET_MACADDR?MAIN
SHORTKEY_BLUE. . . . . . . .  C ADDR   0000H   R   SEG=?PR?SHORTKEY_BLUE?MAIN
SHORTKEY_B_ADD . . . . . . .  C ADDR   0000H   R   SEG=?PR?SHORTKEY_B_ADD?MAIN
SHORTKEY_B_SUB . . . . . . .  C ADDR   0000H   R   SEG=?PR?SHORTKEY_B_SUB?MAIN
SHORTKEY_COLOR . . . . . . .  C ADDR   0000H   R   SEG=?PR?SHORTKEY_COLOR?MAIN
SHORTKEY_E . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?SHORTKEY_E?MAIN
SHORTKEY_GREEN . . . . . . .  C ADDR   0000H   R   SEG=?PR?SHORTKEY_GREEN?MAIN
SHORTKEY_M1. . . . . . . . .  C ADDR   0000H   R   SEG=?PR?SHORTKEY_M1?MAIN
SHORTKEY_M2. . . . . . . . .  C ADDR   0000H   R   SEG=?PR?SHORTKEY_M2?MAIN
SHORTKEY_M3. . . . . . . . .  C ADDR   0000H   R   SEG=?PR?SHORTKEY_M3?MAIN
SHORTKEY_M4. . . . . . . . .  C ADDR   0000H   R   SEG=?PR?SHORTKEY_M4?MAIN
SHORTKEY_M5. . . . . . . . .  C ADDR   0000H   R   SEG=?PR?SHORTKEY_M5?MAIN
SHORTKEY_M6. . . . . . . . .  C ADDR   0000H   R   SEG=?PR?SHORTKEY_M6?MAIN
SHORTKEY_M7. . . . . . . . .  C ADDR   0000H   R   SEG=?PR?SHORTKEY_M7?MAIN
SHORTKEY_M8. . . . . . . . .  C ADDR   0000H   R   SEG=?PR?SHORTKEY_M8?MAIN
SHORTKEY_M9. . . . . . . . .  C ADDR   0000H   R   SEG=?PR?SHORTKEY_M9?MAIN
SHORTKEY_POWEROFF. . . . . .  C ADDR   0000H   R   SEG=?PR?SHORTKEY_POWEROFF?MAIN
SHORTKEY_POWERON . . . . . .  C ADDR   0000H   R   SEG=?PR?SHORTKEY_POWERON?MAIN
SHORTKEY_RED . . . . . . . .  C ADDR   0000H   R   SEG=?PR?SHORTKEY_RED?MAIN
SHORTKEY_SCALE . . . . . . .  C ADDR   0000H   R   SEG=?PR?SHORTKEY_SCALE?MAIN
SHORTKEY_S_ADD . . . . . . .  C ADDR   0000H   R   SEG=?PR?SHORTKEY_S_ADD?MAIN
SHORTKEY_S_SUB . . . . . . .  C ADDR   0000H   R   SEG=?PR?SHORTKEY_S_SUB?MAIN
SHORTKEY_WHITE . . . . . . .  C ADDR   0000H   R   SEG=?PR?SHORTKEY_WHITE?MAIN
SHORTKEY_YELLOW. . . . . . .  C ADDR   0000H   R   SEG=?PR?SHORTKEY_YELLOW?MAIN
SHORT_LONG_TOUCH_FLAG. . . .  X ADDR   00B0H   R   SEG=?XD?MAIN
SINGLE_RF_TEST . . . . . . .  X ADDR   0023H   R   SEG=?XD?MAIN
SM0. . . . . . . . . . . . .  B ADDR   0098H.7 A   
SM1. . . . . . . . . . . . .  B ADDR   0098H.6 A   
SM2. . . . . . . . . . . . .  B ADDR   0098H.5 A   
SP . . . . . . . . . . . . .  D ADDR   0081H   A   
SPCR . . . . . . . . . . . .  D ADDR   00B1H   A   
SPDR . . . . . . . . . . . .  D ADDR   00B2H   A   
SPSR . . . . . . . . . . . .  D ADDR   00B3H   A   
SRCADDR_1. . . . . . . . . .  X ADDR   004CH   R   SEG=?XD?MAIN
STATIC_SCENE_STATE . . . . .  X ADDR   00D2H   R   SEG=?XD?MAIN
SYS_POWERDOWN. . . . . . . .  C ADDR   0000H   R   SEG=?PR?SYS_POWERDOWN?MAIN
SYS_POWERON. . . . . . . . .  C ADDR   0000H   R   SEG=?PR?SYS_POWERON?MAIN
SYS_SET_1MHZ_RATE. . . . . .  C ADDR   -----       EXT
SYS_SLEEPMODECHECK . . . . .  C ADDR   0000H   R   SEG=?PR?SYS_SLEEPMODECHECK?MAIN
T0 . . . . . . . . . . . . .  B ADDR   00B0H.4 A   
T1 . . . . . . . . . . . . .  B ADDR   00B0H.5 A   
T2 . . . . . . . . . . . . .  B ADDR   0090H.0 A   
T2CON. . . . . . . . . . . .  D ADDR   00C8H   A   
T2EX . . . . . . . . . . . .  B ADDR   0090H.1 A   
TB8. . . . . . . . . . . . .  B ADDR   0098H.3 A   
TCLK . . . . . . . . . . . .  B ADDR   00C8H.4 A   
TCON . . . . . . . . . . . .  D ADDR   0088H   A   
A51 MACRO ASSEMBLER  MAIN                                                                 12/30/2020 12:14:31 PAGE    68

TF0. . . . . . . . . . . . .  B ADDR   0088H.5 A   
TF1. . . . . . . . . . . . .  B ADDR   0088H.7 A   
TF2. . . . . . . . . . . . .  B ADDR   00C8H.7 A   
TH0. . . . . . . . . . . . .  D ADDR   008CH   A   
TH1. . . . . . . . . . . . .  D ADDR   008DH   A   
TH2. . . . . . . . . . . . .  D ADDR   00CDH   A   
TI . . . . . . . . . . . . .  B ADDR   0098H.1 A   
TL0. . . . . . . . . . . . .  D ADDR   008AH   A   
TL1. . . . . . . . . . . . .  D ADDR   008BH   A   
TL2. . . . . . . . . . . . .  D ADDR   00CCH   A   
TMOD . . . . . . . . . . . .  D ADDR   0089H   A   
TR0. . . . . . . . . . . . .  B ADDR   0088H.4 A   
TR1. . . . . . . . . . . . .  B ADDR   0088H.6 A   
TR2. . . . . . . . . . . . .  B ADDR   00C8H.2 A   
TXD0 . . . . . . . . . . . .  B ADDR   00B0H.1 A   
TXD1 . . . . . . . . . . . .  B ADDR   0090H.3 A   
TX_CMD_USE_BLE_MODE. . . . .  C ADDR   0000H   R   SEG=?PR?TX_CMD_USE_BLE_MODE?MAIN
TX_DATA_SETED. . . . . . . .  B ADDR   0000H.0 R   SEG=?BI?MAIN
U10MSFLAG. . . . . . . . . .  X ADDR   -----       EXT
U20MSFLAG. . . . . . . . . .  X ADDR   -----       EXT
U2MSFLAG . . . . . . . . . .  X ADDR   -----       EXT
UART_DATA_SEND . . . . . . .  X ADDR   -----       EXT
WDT. . . . . . . . . . . . .  D ADDR   00A6H   A   
WIDLETIME. . . . . . . . . .  X ADDR   -----       EXT
WR . . . . . . . . . . . . .  B ADDR   00B0H.6 A   
_BLEPACKETDEDUCTIVE. . . . .  C ADDR   -----       EXT
_BLEPACKETENCODE . . . . . .  C ADDR   -----       EXT
_DELAY_MS. . . . . . . . . .  C ADDR   -----       EXT
_DRIVER_UART_SEND_START. . .  C ADDR   -----       EXT
_KEY_SCAN_FUNC . . . . . . .  C ADDR   0000H   R   SEG=?PR?_KEY_SCAN_FUNC?MAIN
_LOGINFO . . . . . . . . . .  C ADDR   -----       EXT
_LOGVALUE. . . . . . . . . .  C ADDR   -----       EXT
_LONGKEY_INDENTIFY . . . . .  C ADDR   0000H   R   SEG=?PR?_LONGKEY_INDENTIFY?MAIN
_RF_TXNOACK. . . . . . . . .  C ADDR   -----       EXT
_UARTCONFIG. . . . . . . . .  C ADDR   -----       EXT
_WAITUS. . . . . . . . . . .  C ADDR   -----       EXT


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
